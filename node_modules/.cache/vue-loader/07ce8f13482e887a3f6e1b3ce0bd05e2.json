{"remainingRequest":"D:\\thousandProject\\editor\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\thousandProject\\editor\\src\\views\\customToolbar\\customToolbar.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\thousandProject\\editor\\src\\views\\customToolbar\\customToolbar.vue","mtime":1691476228089},{"path":"D:\\thousandProject\\editor\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\thousandProject\\editor\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\thousandProject\\editor\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\thousandProject\\editor\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyDlr7zlhaXoh6rlrprkuYnlm77moIfmlbDnu4QNCmltcG9ydCB7IGdlbmVyYWxUb29sYmFySXRlbXMgfSBmcm9tICIuL2dlbmVyYWwtc2hhcGUiDQppbXBvcnQgeyB0b29sYmFySXRlbXMgfSBmcm9tICcuL3Rvb2xiYXInDQovLyDnu4TlhYPntKANCmltcG9ydCB7IGdyb3VwdG9vbEl0ZW1zIH0gZnJvbSAnLi9Hcm91cFRvb2xiYXJJdGVtcycNCmltcG9ydCAqIGFzIFIgZnJvbSAicmFtZGEiOw0KaW1wb3J0IG14IGZyb20gJ214Z3JhcGgnOw0KaW1wb3J0IF8gZnJvbSAnbG9kYXNoJzsNCmNvbnN0IG14Z3JhcGggPSBteCh7fSkNCmltcG9ydCBzdHlsZVNlbGVjdCBmcm9tICIuL2NvbXBvbmVudC9zdHlsZVNlbGVjdCI7DQpjb25zdCB7DQogIG14U3RlbmNpbFJlZ2lzdHJ5LA0KICBteFN0ZW5jaWwsDQogIG14RXZlbnQsDQogIG14R3JhcGgsDQogIG14RWRpdG9yLA0KICBteFV0aWxzLA0KICBteFJ1YmJlcmJhbmQsDQogIG14S2V5SGFuZGxlciwNCiAgbXhHcmFwaEhhbmRsZXIsDQogIG14Q29uc3RhbnRzLA0KICBteEltYWdlLA0KICBteENlbGxTdGF0ZSwNCiAgbXhDb25uZWN0aW9uSGFuZGxlciwNCiAgbXhDb2RlYywNCiAgbXhSZWN0YW5nbGVTaGFwZSwNCiAgbXhQb2ludCwNCiAgbXhDbGlwYm9hcmQsDQogIG14Q2VsbFRyYWNrZXIsDQogIG14VW5kb01hbmFnZXIsDQogIG14Q2xpZW50LA0KICBteEVkZ2VIYW5kbGVyLA0KICBteFBlcmltZXRlciwNCiAgbXhPdXRsaW5lLA0KICBteEV2ZW50T2JqZWN0LA0KICBteEdlb21ldHJ5LA0KICBteENlbGwsDQogIG14U2hhcGUsDQogIG14Q29uc3RyYWludEhhbmRsZXIsDQogIG14RWxsaXBzZSwNCiAgLy8gbXhUcmlhbmdsZSwNCiAgbXhGYXN0T3JnYW5pY0xheW91dCwNCiAgbXhIaWVyYXJjaGljYWxMYXlvdXQsDQogIG14Q29tcGFjdFRyZWVMYXlvdXQsDQogIG14TW9ycGhpbmcsDQogIG14Q2lyY2xlTGF5b3V0LA0KICBteFN2Z0NhbnZhczJELA0KICBteEltYWdlRXhwb3J0LA0KICBteENvbm5lY3Rpb25Db25zdHJhaW50LA0KICBteFBvbHlsaW5lLA0KICBteFZlcnRleEhhbmRsZXIsDQogIG14UmVjdGFuZ2xlLA0KICBteEltYWdlU2hhcGUsDQogIEFjdGl2ZVhPYmplY3QsDQp9ID0gbXhncmFwaDsNCmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7DQovLyDphY3nva7oh6rlrprkuYnkuovku7YNCk9iamVjdC5hc3NpZ24obXhFdmVudCwgew0KICBOT1JNQUxfVFlQRV9DTElDS0VEOiAnTk9STUFMX1RZUEVfQ0xJQ0tFRCcsDQp9KTsNCi8vIOWvvOWFpea1geeoi+WbvuahiOS+i+aVsOaNrg0KY29uc3QgeG1sRGF0YTEgPSBwYXRoLmpvaW4oJ2RhdGEvZGF0YTEueG1sJyk7DQpjb25zdCB4bWxEYXRhMiA9IHBhdGguam9pbignZGF0YS9kYXRhMi54bWwnKTsNCmNvbnN0IHhtbERhdGEzID0gcGF0aC5qb2luKCdkYXRhL2RhdGEzLnhtbCcpOw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wdXRlZDogew0KICAgIC8vIOe7hOWFg+e0oA0KICAgIGdyb3VwdG9vbEl0ZW1zOiAoKSA9PiBncm91cHRvb2xJdGVtcywNCiAgICB0b29sYmFySXRlbXM6ICgpID0+IHRvb2xiYXJJdGVtcywNCiAgICBnZW5lcmFsVG9vbGJhckl0ZW1zOiAoKSA9PiBnZW5lcmFsVG9vbGJhckl0ZW1zLA0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgc3R5bGVTZWxlY3QsDQogIH0sDQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBncmFwaDogbnVsbCwNCiAgICAgIGVkaXRvcjogbnVsbCwNCiAgICAgIHBhbGV0dGVzOiB7fSwNCiAgICAgIGdyYXBoWG1sOiAnJywNCiAgICAgIGFjdGl2ZU5hbWVzOiBbJzEnLCAnMicsICczJ10sDQogICAgICBpc05vZGU6IGZhbHNlLA0KICAgICAgY2VsbFN0eWxlOiAnJywNCiAgICAgIGdyYXBoWDogMTAwLA0KICAgICAgZ3JhcGhZOiAxMCwNCiAgICAgIHVuZG9Nbmc6ICcnLA0KICAgICAgdGV4dFZhbHVlOiAnJywNCiAgICAgIHVwbG9hZERhdGFWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGlzT3V0cHV0WG1sOiBmYWxzZSwNCiAgICAgIGVkZ2VTdHlsZTogJ29ydGhvZ29uYWxFZGdlU3R5bGUnLA0KICAgICAgb3V0bGluZTogJycsDQogICAgICBpZFNlZWQ6IDAsDQogICAgICBub3JtYWxJZFNlZWQ6IDAsDQogICAgICAvLyBjb25maWdPcmRlcjogMCwNCiAgICAgIGpzb25EYXRhOiB7DQogICAgICAgIGNlbGxzOiB7DQogICAgICAgICAgbm9kZXM6IFtdLA0KICAgICAgICAgIGdyb3VwczogW10NCiAgICAgICAgfSwNCiAgICAgICAgZWRnZXM6IFtdDQogICAgICB9LA0KICAgICAgc2hvd0JhY2tncm91bmQ6IGZhbHNlLA0KICAgICAgY3VycmVudE5vcm1hbFR5cGU6IHt9LA0KICAgICAgbm9ybWFsVHlwZVBvc2l0aW9uOiB7DQogICAgICAgIHRvcDogJzAnLA0KICAgICAgICBsZWZ0OiAnMCcsDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDliJvlu7rnlLvluIPlubbov5vooYzliJ3lp4vljJYNCiAgICBjcmVhdGVHcmFwaCAoKSB7DQogICAgICAvLyDliJvlu7pncmFwaA0KICAgICAgLy8g5pa55byP5LiA77ya55u05o6l5p6E5bu6Z3JhcGjlrp7kvosNCiAgICAgIC8vIHRoaXMuZ3JhcGggPSBuZXcgbXhHcmFwaCh0aGlzLiRyZWZzLmNvbnRhaW5lcikNCiAgICAgIHRoaXMuZWRpdG9yID0gbmV3IG14RWRpdG9yKCk7DQogICAgICB0aGlzLmdyYXBoID0gdGhpcy5lZGl0b3IuZ3JhcGg7DQogICAgICB0aGlzLmVkaXRvci5zZXRHcmFwaENvbnRhaW5lcih0aGlzLiRyZWZzLmNvbnRhaW5lcik7DQogICAgICAvLyDphY3nva7pu5jorqTlhajlsYDmoLflvI8NCiAgICAgIHRoaXMuY29uZmlndXJlU3R5bGVzaGVldCh0aGlzLmdyYXBoKTsNCiAgICAgIC8vIOWOu+mUr+m9v+aViOaenA0KICAgICAgbXhSZWN0YW5nbGVTaGFwZS5wcm90b3R5cGUuY3Jpc3AgPSB0cnVlOw0KICAgICAgLy8g5a6a5LmJ5YWo5bGA5Y+Y6YeP77yM5aaC44CC55So5LqO6Kem5Y+R5bu656uL5paw55qE6L+e5o6l55qE5rS75Yqo5Yy65Z+f55qE5pyA5bCP5bC65a+477yI5Lul5YOP57Sg5Li65Y2V5L2N77yJ77yM6K+l6YOo5YiG77yIMTAw77yF77yJ55qE5bCP5Yy65Yy65Z+f6KKr55So5LqO6Kem5Y+R5paw55qE6L+e5o6l77yM5Lul5Y+K5LiA5Lqb56qX5Y+j5ZKM4oCc5LiL5ouJ6I+c6I+c5Y2V6YCJ5oupDQogICAgICBteENvbnN0YW50cy5NSU5fSE9UU1BPVF9TSVpFID0gMTY7DQogICAgICBteENvbnN0YW50cy5ERUZBVUxUX0hPVFNQT1QgPSAxOw0KDQogICAgICAvL2NlbGzliJvlu7rmlK/mjIHkvKDlhaVodG1sDQogICAgICB0aGlzLmdyYXBoLnNldEh0bWxMYWJlbHModHJ1ZSk7DQogICAgICB0aGlzLmdyYXBoLnNldERyb3BFbmFibGVkKHRydWUpOw0KICAgICAgdGhpcy5ncmFwaC5zZXRTcGxpdEVuYWJsZWQoZmFsc2UpOw0KICAgICAgLy8g5pyJ5pWI55qE5ouW5pS+5pON5L2c77yM5YiZ6L+U5ZuedHJ1ZQ0KICAgICAgdGhpcy5ncmFwaC5pc1ZhbGlkRHJvcFRhcmdldCA9ICh0YXJnZXQsIGNlbGxzLCBldnQpID0+IHsNCiAgICAgICAgaWYgKHRoaXMuZ3JhcGguaXNTcGxpdEVuYWJsZWQoKSAmJiB0aGlzLmdyYXBoLmlzU3BsaXRUYXJnZXQodGFyZ2V0LCBjZWxscywgZXZ0KSkgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCfmi5bmlL4nKTsNCiAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgfTsNCg0KICAgICAgLy8g56aB55So5YiG57uE55qE5pS257yp5Yqf6IO9IOaWueazlTE6DQogICAgICAvLyB0aGlzLmdyYXBoLmlzQ2VsbEZvbGRhYmxlID0gKGNlbGwpID0+IHsNCiAgICAgIC8vICAgcmV0dXJuIGZhbHNlDQogICAgICAvLyB9DQogICAgICAvLyDnpoHnlKjliIbnu4TnmoTmlLbnvKnlip/og70g5pa55rOVMjoNCiAgICAgIHRoaXMuZ3JhcGguZm9sZGluZ0VuYWJsZWQgPSBmYWxzZTsNCiAgICAgIC8vIOe7hOWGheeahOWtkOWFg+e0oOaYr+WQpumaj+eItuWFg+e0oOWPmOWMluiAjOWPmOWMlg0KICAgICAgdGhpcy5ncmFwaC5yZWN1cnNpdmVSZXNpemUgPSB0cnVlOw0KDQogICAgICAvLyDorr7nva7ov57nur/ml7bnmoTpooTop4jot6/lvoTlj4rmoLflvI8NCiAgICAgIHRoaXMuZ3JhcGguY29ubmVjdGlvbkhhbmRsZXIuY3JlYXRlRWRnZVN0YXRlID0gKCkgPT4gew0KICAgICAgICAvLyDorr7nva7pooTop4jnmoTov57mjqXnur8s56ys5LiJ5Liq5Y+C5pWw5Li66L+e5o6l5oiQ5Yqf5ZCO6L+e5o6l57q/5LiK55qEbGFiZWwNCiAgICAgICAgdmFyIGVkZ2UgPSB0aGlzLmdyYXBoLmNyZWF0ZUVkZ2UobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCk7DQogICAgICAgIC8vIGVkZ2Uuc3R5bGUgKz0gYDtlZGdlU3R5bGU9b3J0aG9nb25hbEVkZ2VTdHlsZSBgDQogICAgICAgIHJldHVybiBuZXcgbXhDZWxsU3RhdGUodGhpcy5ncmFwaC52aWV3LCBlZGdlLCB0aGlzLmdyYXBoLmdldENlbGxTdHlsZShlZGdlKSk7DQogICAgICB9Ow0KDQogICAgICAvLyDmmK/lkKblvIDlkK/ml4vovawNCiAgICAgIG14VmVydGV4SGFuZGxlci5wcm90b3R5cGUubGl2ZVByZXZpZXcgPSB0cnVlOw0KICAgICAgbXhWZXJ0ZXhIYW5kbGVyLnByb3RvdHlwZS5yb3RhdGlvbkVuYWJsZWQgPSB0cnVlOw0KICAgICAgLy8g6K6+572u5peL6L2s5oyJ6ZKuDQogICAgICBteFZlcnRleEhhbmRsZXIucHJvdG90eXBlLmNyZWF0ZVNpemVyU2hhcGUgPSBmdW5jdGlvbiAoYm91bmRzLCBpbmRleCwgZmlsbENvbG9yKSB7DQogICAgICAgIGlmICh0aGlzLmhhbmRsZUltYWdlICE9IG51bGwpIHsNCiAgICAgICAgICBib3VuZHMgPSBuZXcgbXhSZWN0YW5nbGUoYm91bmRzLngsIGJvdW5kcy55LCB0aGlzLmhhbmRsZUltYWdlLndpZHRoLCB0aGlzLmhhbmRsZUltYWdlLmhlaWdodCk7DQogICAgICAgICAgbGV0IHNoYXBlID0gbmV3IG14SW1hZ2VTaGFwZShib3VuZHMsIHRoaXMuaGFuZGxlSW1hZ2Uuc3JjKTsNCiAgICAgICAgICAvLyBBbGxvd3MgSFRNTCByZW5kZXJpbmcgb2YgdGhlIGltYWdlcw0KICAgICAgICAgIHNoYXBlLnByZXNlcnZlSW1hZ2VBc3BlY3QgPSB0cnVlOw0KICAgICAgICAgIHJldHVybiBzaGFwZTsNCiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PSBteEV2ZW50LlJPVEFUSU9OX0hBTkRMRSkgew0KICAgICAgICAgIC8vIHJldHVybiBuZXcgbXhEb3VibGVFbGxpcHNlKGJvdW5kcywgZmlsbENvbG9yIHx8IG14Q29uc3RhbnRzLkhBTkRMRV9GSUxMQ09MT1IsIG14Q29uc3RhbnRzLkhBTkRMRV9TVFJPS0VDT0xPUik7DQogICAgICAgICAgLy8g6K6+572u5peL6L2s5Zu+5qCHDQogICAgICAgICAgYm91bmRzID0gbmV3IG14UmVjdGFuZ2xlKGJvdW5kcy54LCBib3VuZHMueSwgMTUsIDE1KTsNCiAgICAgICAgICBsZXQgcm90YXRpb25TaGFwZSA9IG5ldyBteEltYWdlU2hhcGUoYm91bmRzLCAnaWNvbi9yb3RhdGUuc3ZnJyk7DQogICAgICAgICAgcm90YXRpb25TaGFwZS5wcmVzZXJ2ZUltYWdlQXNwZWN0ID0gdHJ1ZTsNCiAgICAgICAgICByZXR1cm4gcm90YXRpb25TaGFwZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gbmV3IG14UmVjdGFuZ2xlU2hhcGUoYm91bmRzLCBmaWxsQ29sb3IgfHwgbXhDb25zdGFudHMuSEFORExFX0ZJTExDT0xPUiwgbXhDb25zdGFudHMuSEFORExFX1NUUk9LRUNPTE9SKTsNCiAgICAgICAgfQ0KICAgICAgfTsNCiAgICAgIC8vIOiuvue9ruaXi+i9rOinkuW6pu+8iOino+WGs+m7mOiupOaXi+i9rDE4MOW6pueahGJ1Z++8iQ0KICAgICAgbXhWZXJ0ZXhIYW5kbGVyLnByb3RvdHlwZS5nZXRSb3RhdGlvbkhhbmRsZVBvc2l0aW9uID0gZnVuY3Rpb24gKCkgew0KICAgICAgICBsZXQgcGFkZGluZyA9IHRoaXMuZ2V0SGFuZGxlUGFkZGluZygpOw0KICAgICAgICByZXR1cm4gbmV3IG14UG9pbnQodGhpcy5ib3VuZHMueCArIHRoaXMuYm91bmRzLndpZHRoIC0gdGhpcy5yb3RhdGlvbkhhbmRsZVZTcGFjaW5nICsgcGFkZGluZy54IC8gMiwgdGhpcy5ib3VuZHMueSArIHRoaXMucm90YXRpb25IYW5kbGVWU3BhY2luZyAtIHBhZGRpbmcueSAvIDIpOw0KICAgICAgfTsNCiAgICAgIC8vIOiuvue9rum7mOiupOe7hA0KICAgICAgLy8gZ3JvdXBCb3JkZXJTaXplIOiuvue9ruWbvuW9ouWSjOWug+eahOWtkOWFg+e0oOeahOi+uei3nQ0KICAgICAgbGV0IGdyb3VwID0gbmV3IG14Q2VsbCgnR3JvdXAnLCBuZXcgbXhHZW9tZXRyeSgpLCAnZ3JvdXA7Zm9udENvbG9yPXdoaXRlOycpOw0KICAgICAgZ3JvdXAuc2V0VmVydGV4KHRydWUpOw0KICAgICAgLy8g6K6+572u57uE5Y+v6L+e5o6lDQogICAgICBncm91cC5zZXRDb25uZWN0YWJsZSh0cnVlKTsNCiAgICAgIC8vIGdyb3VwLnNldENlbGxzUmVzaXphYmxlKGZhbHNlKTsNCiAgICAgIHRoaXMuZWRpdG9yLmRlZmF1bHRHcm91cCA9IGdyb3VwOw0KICAgICAgdGhpcy5lZGl0b3IuZ3JvdXBCb3JkZXJTaXplID0gODA7DQoNCiAgICAgIC8vIOaYr+WQpuagueWFg+e0oA0KICAgICAgdGhpcy5ncmFwaC5pc1ZhbGlkUm9vdCA9IGZ1bmN0aW9uIChjZWxsKSB7DQogICAgICAgIHJldHVybiB0aGlzLmlzVmFsaWREcm9wVGFyZ2V0KGNlbGwpOw0KICAgICAgfTsNCg0KICAgICAgLy8gLy8g5piv5ZCm5Y+v5Lul6KKr6YCJ5LitDQogICAgICAvLyB0aGlzLmdyYXBoLmlzQ2VsbFNlbGVjdGFibGUgPSBmdW5jdGlvbiAoY2VsbCkgew0KICAgICAgLy8gICByZXR1cm4gIXRoaXMuaXNDZWxsTG9ja2VkKGNlbGwpOw0KICAgICAgLy8gfTsNCg0KICAgICAgLy8g6L+U5Zue5YWD57SgDQogICAgICB0aGlzLmdyYXBoLmdldExhYmVsID0gZnVuY3Rpb24gKGNlbGwpIHsNCiAgICAgICAgdmFyIHRtcCA9IG14R3JhcGgucHJvdG90eXBlLmdldExhYmVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vICJzdXBlcmNhbGwiDQogICAgICAgIGlmICh0aGlzLmlzQ2VsbExvY2tlZChjZWxsKSkgew0KICAgICAgICAgIC8vIOWmguWFg+e0oOiiq+mUgeWumiDov5Tlm57nqbrmoIfnrb4NCiAgICAgICAgICByZXR1cm4gJyc7DQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0NlbGxDb2xsYXBzZWQoY2VsbCkpIHsNCiAgICAgICAgICB2YXIgaW5kZXggPSB0bXAuaW5kZXhPZignPC9oMT4nKTsNCiAgICAgICAgICBpZiAoaW5kZXggPiAwKSB7DQogICAgICAgICAgICB0bXAgPSB0bXAuc3Vic3RyaW5nKDAsIGluZGV4ICsgNSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0bXA7DQogICAgICB9Ow0KDQogICAgICAvLyDnm67moIfmmK/lkKbmnInmlYgNCiAgICAgIHRoaXMuZ3JhcGguaXNWYWxpZERyb3BUYXJnZXQgPSBmdW5jdGlvbiAoY2VsbCkgew0KICAgICAgICAvLyBjb25zb2xlLmxvZyhjZWxsLCBjZWxscywgZXZ0KTsNCiAgICAgICAgcmV0dXJuIHRoaXMuaXNTd2ltbGFuZShjZWxsKTsNCiAgICAgIH07DQoNCiAgICAgIC8vIOaYr+WQpuagueWFg+e0oA0KICAgICAgdGhpcy5ncmFwaC5pc1ZhbGlkUm9vdCA9IGZ1bmN0aW9uIChjZWxsKSB7DQogICAgICAgIHJldHVybiB0aGlzLmlzVmFsaWREcm9wVGFyZ2V0KGNlbGwpOw0KICAgICAgfTsNCg0KICAgICAgLy8g5piv5ZCm5Y+v5Lul6KKr6YCJ5LitDQogICAgICB0aGlzLmdyYXBoLmlzQ2VsbFNlbGVjdGFibGUodHJ1ZSkNCg0KICAgICAgLy8g5YWB6K646YeN5aSN6L+e5o6lDQogICAgICB0aGlzLmdyYXBoLnNldE11bHRpZ3JhcGgodHJ1ZSk7DQogICAgICAvLyDnpoHmraLov57mjqXnur/mmYPliqgo5Y2z6L+e57q/5Lik56uv5b+F6aG75Zyo6IqC54K55LiKKQ0KICAgICAgdGhpcy5ncmFwaC5zZXRBbGxvd0RhbmdsaW5nRWRnZXMoZmFsc2UpOw0KICAgICAgLy8g5YWB6K646L+e57q/55qE55uu5qCH5ZKM5rqQ5piv5ZCM5LiA5YWD57SgDQogICAgICB0aGlzLmdyYXBoLnNldEFsbG93TG9vcHMoZmFsc2UpOw0KICAgICAgLy/ovrnooqvmi5bliqjml7blp4vnu4jkv53mjIHov57mjqUNCiAgICAgIHRoaXMuZ3JhcGguc2V0RGlzY29ubmVjdE9uTW92ZShmYWxzZSk7DQogICAgICAvLyDpgInmi6nln7rmnKzlhYPntKDlvIDlkK8NCiAgICAgIHRoaXMuZ3JhcGguc2V0RW5hYmxlZCh0cnVlKTsNCiAgICAgIC8vIOWKqOaAgeaUueWPmOagt+W8jw0KICAgICAgdGhpcy5ncmFwaC5nZXRWaWV3KCkudXBkYXRlU3R5bGUgPSB0cnVlOw0KICAgICAgLy8g6byg5qCH5qGG6YCJDQogICAgICB0aGlzLnJ1YmJlckJhbmQgPSBuZXcgbXhSdWJiZXJiYW5kKHRoaXMuZ3JhcGgpOw0KICAgICAgdGhpcy5ncmFwaC5zZXRSZXNpemVDb250YWluZXIodHJ1ZSk7DQoNCiAgICAgIC8vIOW8gOWQr+eUu+W4g+W5s+a7keenu+WKqA0KICAgICAgLy8gdGhpcy5ncmFwaC5zZXRQYW5uaW5nKHRydWUpOw0KICAgICAgdGhpcy5ncmFwaC5zZXRQYW5uaW5nID0gdHJ1ZTsNCiAgICAgIC8vIOW8gOWQr+aPkOekug0KICAgICAgdGhpcy5ncmFwaC5zZXRUb29sdGlwcyhmYWxzZSk7DQogICAgICAvLyDlhYHorrjov57nur8NCiAgICAgIHRoaXMuZ3JhcGguc2V0Q29ubmVjdGFibGUodHJ1ZSk7DQogICAgICAvL+enu+WKqOWFg+e0oOeahOatpemVvw0KICAgICAgdGhpcy5ncmFwaC5ncmlkU2l6ZSA9IDM7DQogICAgICB0aGlzLmdyYXBoLnNldEJvcmRlcigxNjApOw0KDQogICAgICAvLyDlvIDlkK/mlrnlnZfkuIrnmoTmloflrZfnvJbovpHlip/og70NCiAgICAgIHRoaXMuZ3JhcGguc2V0Q2VsbHNFZGl0YWJsZSh0cnVlKTsNCiAgICAgIC8vIOemgeatouWPjOWHu+S/ruaUueWGheWuuSjlvIPnlKgpDQogICAgICAvLyB0aGlzLmdyYXBoLmRibENsaWNrID0gKGV2dCwgY2VsbCkgPT4gew0KICAgICAgLy8gICB2YXIgbW9kZWwgPSB0aGlzLmdyYXBoLmdldE1vZGVsKCk7DQogICAgICAvLyAgIGlmIChtb2RlbC5pc1ZlcnRleChjZWxsKSkgew0KICAgICAgLy8gICAgIHJldHVybiBmYWxzZTsNCiAgICAgIC8vICAgfQ0KICAgICAgLy8gfTsNCiAgICAgIC8vIERpc2FibGVzIHN5bmNocm9ub3VzIGxvYWRpbmcgb2YgcmVzb3VyY2VzDQogICAgICAvLyDlj6/nlKjkuo7npoHnlKhIVE1M55qE5rOz6YGT5qCH562+77yM6YG/5YWN5Yay56qBKOi/lOWbnmZhbHNl5Y2z5Y+vKQ0KICAgICAgLy8g5Yik5pat5piv5ZCm5Li65rOz6YGT5qCH562+DQogICAgICAvLyB0aGlzLmdyYXBoLmlzSHRtbExhYmVsID0gZnVuY3Rpb24gKGNlbGwpIHsNCiAgICAgIC8vICAgcmV0dXJuIHRoaXMuaXNTd2ltbGFuZShjZWxsKTsNCiAgICAgIC8vIH07DQogICAgICAvL+WHhuWkh+aSpOmUgOi/mOWOn+WKn+iDvQ0KICAgICAgLy8g5p6E6YCg5YW35pyJ57uZ5a6a5Y6G5Y+y6K6w5b2V5aSn5bCP55qE5paw5pKk5raI566h55CG5Zmo44CC6buY6K6kMTAw5q2lDQogICAgICB0aGlzLnVuZG9NbmcgPSBuZXcgbXhVbmRvTWFuYWdlcigpOw0KICAgICAgbGV0IGxpc3RlbmVyID0gKHNlbmRlciwgZXZ0KSA9PiB7DQogICAgICAgIHRoaXMudW5kb01uZy51bmRvYWJsZUVkaXRIYXBwZW5lZChldnQuZ2V0UHJvcGVydHkoJ2VkaXQnKSk7DQoNCiAgICAgIH07DQogICAgICB0aGlzLmdyYXBoLmdldE1vZGVsKCkuYWRkTGlzdGVuZXIobXhFdmVudC5VTkRPLCBsaXN0ZW5lcik7DQogICAgICB0aGlzLmdyYXBoLmdldFZpZXcoKS5hZGRMaXN0ZW5lcihteEV2ZW50LlVORE8sIGxpc3RlbmVyKTsNCiAgICAgIC8vIOWIm+W7uue8qeeVpeWbvg0KICAgICAgdGhpcy5vdXRsaW5lID0gbmV3IG14T3V0bGluZSh0aGlzLmdyYXBoLCB0aGlzLiRyZWZzLnN0eWxlU2VsZWN0LiRyZWZzLnNob3dNYXApOw0KICAgICAgaWYgKCh0aGlzLmdyYXBoKSA9PSBudWxsIHx8ICh0aGlzLmdyYXBoKSA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgLy8g5LuOdmFsdWXkuK3ojrflj5bmmL7npLrnmoTlhoXlrrko5aaC5p6c6IqC54K555qEdmFsdWXkuLrnqbrliJnmmL7npLroioLngrnnmoR0aXRsZSkNCiAgICAgIHRoaXMuZ3JhcGguY29udmVydFZhbHVlVG9TdHJpbmcgPSAoY2VsbCkgPT4gew0KICAgICAgICByZXR1cm4gY2VsbFsndmFsdWUnXSA/IGNlbGxbJ3ZhbHVlJ10gOiBjZWxsWyd0aXRsZSddOw0KICAgICAgfTsNCiAgICB9LA0KDQogICAgLy8g5paw5aKe6Ieq5a6a5LmJ6IqC54K5DQogICAgYWRkQ3VzdG9tQ2VsbCAoZHJvcENlbGwsIHRvb2xJdGVtLCB4LCB5KSB7DQogICAgICAvLyDliKTmlq3mmK/lkKbmmK/mlL7lnKjnu4TlhYPntKDkuIoNCiAgICAgIGNvbnN0IGRyb3AgPSAhUi5pc05pbChkcm9wQ2VsbCk7DQogICAgICAvLyBkcm9wICYmIHRoaXMuJG1lc3NhZ2UuaW5mbyhgJHt0b29sSXRlbVsndGl0bGUnXX3oioLngrnov5vlhaUke2Ryb3BDZWxsLnRpdGxlfWApOw0KICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0b29sSXRlbTsNCiAgICAgIGNvbnN0IHN0eWxlT2JqID0gdG9vbEl0ZW0uc3R5bGU7DQogICAgICBjb25zdCBzdHlsZSA9IE9iamVjdC5rZXlzKHN0eWxlT2JqKS5tYXAoKGF0dHIpID0+IGAke2F0dHJ9PSR7c3R5bGVPYmpbYXR0cl19YCkuam9pbignOycpOw0KICAgICAgY29uc3QgcmVhbFggPSBkcm9wID8geCAtIGRyb3BDZWxsLmdlb21ldHJ5LnggOiB4Ow0KICAgICAgY29uc3QgcmVhbFkgPSBkcm9wID8geSAtIGRyb3BDZWxsLmdlb21ldHJ5LnkgOiB5Ow0KICAgICAgY29uc3QgcGFyZW50ID0gZHJvcCA/IGRyb3BDZWxsIDogdGhpcy5ncmFwaC5nZXREZWZhdWx0UGFyZW50KCk7DQogICAgICB0aGlzLmdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTsNCiAgICAgIHRyeSB7DQogICAgICAgIGxldCB2ZXJ0ZXggPSB0aGlzLmdyYXBoLmluc2VydFZlcnRleChwYXJlbnQsIG51bGwsIG51bGwsIHJlYWxYIC0gKHdpZHRoIC8gMiksIHJlYWxZIC0gKGhlaWdodCAvIDIpLCB3aWR0aCwgaGVpZ2h0LCBzdHlsZSArICc7d2hpdGVTcGFjZT13cmFwO3dvcmQtYnJlYWs9YnJlYWstYWxsJyk7DQogICAgICAgIHZlcnRleC50aXRsZSA9IHRvb2xJdGVtWyd0aXRsZSddOw0KICAgICAgICB2ZXJ0ZXguaWQgPSB0b29sSXRlbVsnaWQnXSArICctJyArIHRvb2xJdGVtWydpZFNlZWQnXTsNCiAgICAgICAgLy8g5re75Yqg5a6M6IqC54K55ZCO6Ieq5Yqo5re75Yqg6aG65bqP5Zu+5qCHDQogICAgICAgIHRoaXMuYWRkUG9pbnQodmVydGV4LCB0b29sSXRlbVsnaWRTZWVkJ10pOw0KICAgICAgICB0b29sSXRlbVsnaWRTZWVkJ10rKzsNCiAgICAgICAgdmVydGV4Wydpc0dyb3VwJ10gPSB0b29sSXRlbVsnaWQnXS5pbmNsdWRlcygnZ3JvdXAnKSA/IHRydWUgOiBmYWxzZQ0KICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgdGhpcy5ncmFwaC5nZXRNb2RlbCgpLmVuZFVwZGF0ZSgpOw0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g5biD5bGADQogICAgZ3JhcGhMYXlvdXQgKGFuaW1hdGUsIGxheW91dFR5cGUpIHsNCiAgICAgIHRoaXMuZ3JhcGguZ2V0TW9kZWwoKS5iZWdpblVwZGF0ZSgpDQogICAgICB0cnkgew0KICAgICAgICBpZiAobGF5b3V0VHlwZSA9PT0gJ3JhbmRvbUxheW91dCcpIHsNCiAgICAgICAgICAvLyDpmo/mnLrluIPlsYANCiAgICAgICAgICBteEZhc3RPcmdhbmljTGF5b3V0LnByb3RvdHlwZS5taW5EaXN0YW5jZUxpbWl0ID0gMTAwDQogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ldy1jYXANCiAgICAgICAgICB2YXIgbGF5b3V0ID0gbmV3IG14RmFzdE9yZ2FuaWNMYXlvdXQodGhpcy5ncmFwaCkNCiAgICAgICAgICBsYXlvdXQuZm9yY2VDb25zdGFudCA9IDUwMA0KICAgICAgICAgIGxheW91dC5leGVjdXRlKHRoaXMuZ3JhcGguZ2V0RGVmYXVsdFBhcmVudCgpKQ0KICAgICAgICB9IGVsc2UgaWYgKGxheW91dFR5cGUgPT09ICdoaWVyYXJjaGljYWxMYXlvdXQnKSB7DQogICAgICAgICAgLy8g5YiG5bGC5biD5bGADQogICAgICAgICAgbXhIaWVyYXJjaGljYWxMYXlvdXQucHJvdG90eXBlLmludHJhQ2VsbFNwYWNpbmcgPSAzMDANCiAgICAgICAgICBteEhpZXJhcmNoaWNhbExheW91dC5wcm90b3R5cGUuZmluZVR1bmluZyA9IGZhbHNlDQogICAgICAgICAgbXhIaWVyYXJjaGljYWxMYXlvdXQucHJvdG90eXBlLnRyYXZlcnNlQW5jZXN0b3JzID0gZmFsc2UNCiAgICAgICAgICBteEhpZXJhcmNoaWNhbExheW91dC5wcm90b3R5cGUucmVzaXplUGFyZW50ID0gdHJ1ZQ0KICAgICAgICAgIC8vIOaXoOWFs+ezu+WunuS9k+S5i+mXtOeahOmXtOi3nQ0KICAgICAgICAgIG14SGllcmFyY2hpY2FsTGF5b3V0LnByb3RvdHlwZS5pbnRlckhpZXJhcmNoeVNwYWNpbmcgPSAyMDANCiAgICAgICAgICAvLyDlsYLnuqfkuYvpl7TnmoTot53nprsNCiAgICAgICAgICBteEhpZXJhcmNoaWNhbExheW91dC5wcm90b3R5cGUuaW50ZXJSYW5rQ2VsbFNwYWNpbmcgPSA4MDANCg0KICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuZXctY2FwDQogICAgICAgICAgdmFyIGhpZXJhcmNoaWNhbGxheW91dCA9IG5ldyBteEhpZXJhcmNoaWNhbExheW91dCh0aGlzLmdyYXBoLCBteENvbnN0YW50cy5ESVJFQ1RJT05fTk9SVEgpDQogICAgICAgICAgaGllcmFyY2hpY2FsbGF5b3V0LmV4ZWN1dGUodGhpcy5ncmFwaC5nZXREZWZhdWx0UGFyZW50KCkpDQogICAgICAgIH0gZWxzZSBpZiAobGF5b3V0VHlwZSA9PT0gJ2NvbXBhY3RUcmVlTGF5b3V0Jykgew0KICAgICAgICAgIC8vIOagkeW9ouW4g+WxgA0KICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuZXctY2FwDQogICAgICAgICAgdmFyIGNvbXBhY3RUcmVlbGF5b3V0ID0gbmV3IG14Q29tcGFjdFRyZWVMYXlvdXQodGhpcy5ncmFwaCkNCiAgICAgICAgICBjb21wYWN0VHJlZWxheW91dC5leGVjdXRlKHRoaXMuZ3JhcGguZ2V0RGVmYXVsdFBhcmVudCgpKQ0KICAgICAgICB9IGVsc2UgaWYgKGxheW91dFR5cGUgPT09ICdjaXJjbGVMYXlvdXQnKSB7DQogICAgICAgICAgLy8g5ZyG5b2i5biD5bGADQogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ldy1jYXANCiAgICAgICAgICB2YXIgY2lyY2xlTGF5b3V0ID0gbmV3IG14Q2lyY2xlTGF5b3V0KHRoaXMuZ3JhcGgsIDQwMCkNCiAgICAgICAgICBjaXJjbGVMYXlvdXQuZXhlY3V0ZSh0aGlzLmdyYXBoLmdldERlZmF1bHRQYXJlbnQoKSkNCiAgICAgICAgfQ0KICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgLy8g5piv5ZCm5byA5ZCv5biD5bGA5Yqo55S7DQogICAgICAgIGlmIChhbmltYXRlKSB7DQogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ldy1jYXANCiAgICAgICAgICB2YXIgbW9ycGggPSBuZXcgbXhNb3JwaGluZyh0aGlzLmdyYXBoLCAyMCwgNy43LCA0MCkNCiAgICAgICAgICBtb3JwaC5hZGRMaXN0ZW5lcihteEV2ZW50LkRPTkUsICgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuZ3JhcGguZ2V0TW9kZWwoKS5lbmRVcGRhdGUoKQ0KICAgICAgICAgIH0pDQogICAgICAgICAgbW9ycGguc3RhcnRBbmltYXRpb24oKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuZ3JhcGguZ2V0TW9kZWwoKS5lbmRVcGRhdGUoKQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAvLyDliJ3lp4vljJbln7rnoYDoioLngrkNCiAgICBpbml0R2VuZXJhbFRvb2wgKCkgew0KICAgICAgdmFyIGdlbmVyYWxUb29sYmFyRG9tQXJyYXkgPSB0aGlzLiRyZWZzLmdlbmVyYWxUb29sSXRlbXM7DQogICAgICAvLyDliKTmlq3mmK/lkKbkuLrmlbDnu4TkuJTmlbDnu4TmmK/lkKbkuLrnqboNCiAgICAgIGlmICghKGdlbmVyYWxUb29sYmFyRG9tQXJyYXkgaW5zdGFuY2VvZiBBcnJheSB8fCBnZW5lcmFsVG9vbGJhckRvbUFycmF5Lmxlbmd0aCA8PSAwKSkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBnZW5lcmFsVG9vbGJhckRvbUFycmF5LmZvckVhY2goKGRvbSwgZG9tSW5kZXgpID0+IHsNCiAgICAgICAgdmFyIHRvb2xJdGVtID0gdGhpcy5nZW5lcmFsVG9vbGJhckl0ZW1zW2RvbUluZGV4XTsNCiAgICAgICAgdmFyIHsgd2lkdGgsIGhlaWdodCB9ID0gdG9vbEl0ZW07DQogICAgICAgIHZhciBpdGVtQ2xhc3MgPSAodG9vbEl0ZW0uY2xhc3MpOw0KICAgICAgICAvL+aWsOWinuWfuuehgOiKgueCuQ0KICAgICAgICB2YXIgZ2VuZXJhbERyb3BIYW5kbGVyID0gKGdyYXBoLCBldnQsIGRyb3BDZWxsLCB4LCB5KSA9PiB7DQogICAgICAgICAgY29uc3QgZHJvcCA9ICFSLmlzTmlsKGRyb3BDZWxsKTsNCiAgICAgICAgICAvLyBkcm9wICYmIHRoaXMuJG1lc3NhZ2UuaW5mbyhgJHt0b29sSXRlbVsndGl0bGUnXX3oioLngrnov5vlhaUke2Ryb3BDZWxsLnRpdGxlfWApOw0KICAgICAgICAgIGNvbnN0IHJlYWxYID0gZHJvcCA/IHggLSBkcm9wQ2VsbC5nZW9tZXRyeS54IDogeDsNCiAgICAgICAgICBjb25zdCByZWFsWSA9IGRyb3AgPyB5IC0gZHJvcENlbGwuZ2VvbWV0cnkueSA6IHk7DQogICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0b29sSXRlbTsNCiAgICAgICAgICBjb25zdCBzdHlsZU9iaiA9IHRvb2xJdGVtLnN0eWxlOw0KICAgICAgICAgIGNvbnN0IHN0eWxlID0gT2JqZWN0LmtleXMoc3R5bGVPYmopLm1hcCgoYXR0cikgPT4gYCR7YXR0cn09JHtzdHlsZU9ialthdHRyXX1gKS5qb2luKCc7Jyk7DQogICAgICAgICAgY29uc3QgcGFyZW50ID0gZHJvcCA/IGRyb3BDZWxsIDogdGhpcy5ncmFwaC5nZXREZWZhdWx0UGFyZW50KCk7DQogICAgICAgICAgdGhpcy5ncmFwaC5nZXRNb2RlbCgpLmJlZ2luVXBkYXRlKCk7DQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGxldCB2ZXJ0ZXggPSB0aGlzLmdyYXBoLmluc2VydFZlcnRleChwYXJlbnQsIG51bGwsIG51bGwsIHJlYWxYIC0gKHdpZHRoIC8gMiksIHJlYWxZIC0gKGhlaWdodCAvIDIpLCB3aWR0aCwgaGVpZ2h0LCBzdHlsZSArICc7d2hpdGVTcGFjZT13cmFwO3dvcmQtYnJlYWs9YnJlYWstYWxsJyk7DQogICAgICAgICAgICB2ZXJ0ZXgudGl0bGUgPSBgPGRpdiBzdHlsZT0nd29yZC1icmVhazpicmVhay1hbGwnPmAgKyB0b29sSXRlbVsndGl0bGUnXSArICc8L2Rpdj4nOw0KICAgICAgICAgICAgdmVydGV4LmRyb3BBYmxlID0gdG9vbEl0ZW1bJ2Ryb3BBYmxlJ107DQogICAgICAgICAgICB2ZXJ0ZXguaWQgPSB0b29sSXRlbVsnaWQnXSArICctJyArIHRvb2xJdGVtWydpZFNlZWQnXTsNCiAgICAgICAgICAgIHRvb2xJdGVtWydpZFNlZWQnXSsrOw0KICAgICAgICAgICAgdmVydGV4Wydpc0dyb3VwJ10gPSB0b29sSXRlbVsnaWQnXS5pbmNsdWRlcygnZ3JvdXAnKSA/IHRydWUgOiBmYWxzZQ0KDQogICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIHRoaXMuZ3JhcGguZ2V0TW9kZWwoKS5lbmRVcGRhdGUoKTsNCiAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIC8vIOiuvue9ruiKgueCueiiq+aLluaLveaXtueahOagt+W8jyjpooTop4gpDQogICAgICAgIHZhciBnZW5lcmFsY3JlYXRlRHJhZ1ByZXZpZXcgPSAoKSA9PiB7DQogICAgICAgICAgdmFyIGVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgIGVsdC5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDsNCiAgICAgICAgICBlbHQuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDsNCiAgICAgICAgICBlbHQuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgtNTAlLC01MCUpJzsNCiAgICAgICAgICBlbHQuY2xhc3NOYW1lID0gaXRlbUNsYXNzOw0KICAgICAgICAgIHJldHVybiBlbHQ7DQogICAgICAgIH07DQogICAgICAgIC8vIOWFgeiuuOaLluaLvQ0KICAgICAgICBsZXQgZHMgPSBteFV0aWxzLm1ha2VEcmFnZ2FibGUoZG9tLCB0aGlzLmdyYXBoLCBnZW5lcmFsRHJvcEhhbmRsZXIsIGdlbmVyYWxjcmVhdGVEcmFnUHJldmlldygpLCAwLCAwLCB0cnVlLCB0cnVlKTsNCiAgICAgICAgZHMuc2V0R3VpZGVzRW5hYmxlZCh0cnVlKTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICAvLyDliJ3lp4vljJboh6rlrprkuYnlm77moIcNCiAgICBpbml0Q3VzdG9tVG9vbGJhciAoKSB7DQogICAgICAvLyDojrflj5blt6XlhbfmoI/kuK3nmoToh6rlrprkuYnoioLngrnnmoRkb20NCiAgICAgIHZhciB0b29sYmFyRG9tQXJyYXkgPSB0aGlzLiRyZWZzLnRvb2xJdGVtOw0KICAgICAgaWYgKCEodG9vbGJhckRvbUFycmF5IGluc3RhbmNlb2YgQXJyYXkpIHx8IHRvb2xiYXJEb21BcnJheS5sZW5ndGggPD0gMCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQoNCiAgICAgIHRvb2xiYXJEb21BcnJheS5mb3JFYWNoKChkb20sIGRvbUluZGV4KSA9PiB7DQogICAgICAgIHZhciB0b29sSXRlbSA9IHRoaXMudG9vbGJhckl0ZW1zW2RvbUluZGV4XTsNCiAgICAgICAgdmFyIHsgd2lkdGgsIGhlaWdodCB9ID0gdG9vbEl0ZW07DQogICAgICAgIHZhciBpbWFnZSA9IHRvb2xJdGVtLnN0eWxlLmltYWdlOw0KICAgICAgICAvL+WumuS5ieaLluaLveWQjueahOWbnuiwg+WHveaVsA0KICAgICAgICB2YXIgZHJvcEhhbmRsZXIgPSAoZ3JhcGgsIGV2dCwgY2VsbCwgeCwgeSkgPT4gew0KICAgICAgICAgIHRoaXMuYWRkQ3VzdG9tQ2VsbChjZWxsLCB0b29sSXRlbSwgeCwgeSk7DQogICAgICAgIH07DQogICAgICAgIC8vIOiuvue9ruiKgueCueiiq+aLluaLveaXtueahOagt+W8jyjpooTop4gpDQogICAgICAgIHZhciBjcmVhdGVEcmFnUHJldmlldyA9ICgpID0+IHsNCiAgICAgICAgICB2YXIgZWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgZWx0LnN0eWxlLmJvcmRlciA9ICcycHggZG90dGVkIGJsYWNrJzsNCiAgICAgICAgICBlbHQuc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7DQogICAgICAgICAgZWx0LnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7DQogICAgICAgICAgZWx0LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtpbWFnZX0pYDsNCiAgICAgICAgICBlbHQuc3R5bGUuYmFja2dyb3VuZFNpemUgPSBgY29udGFpbmA7DQogICAgICAgICAgZWx0LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwtNTAlKSc7DQogICAgICAgICAgZWx0LnN0eWxlLmJhY2tncm91bmRSZXBlYXQgPSAnbm8tcmVwZWF0JzsNCiAgICAgICAgICByZXR1cm4gZWx0Ow0KICAgICAgICB9Ow0KICAgICAgICAvLyDlhYHorrjmi5bmi70NCiAgICAgICAgbGV0IGRzID0gbXhVdGlscy5tYWtlRHJhZ2dhYmxlKGRvbSwgdGhpcy5ncmFwaCwgZHJvcEhhbmRsZXIsIGNyZWF0ZURyYWdQcmV2aWV3KCksIDAsIDAsIGZhbHNlLCB0cnVlLCB0cnVlKTsNCiAgICAgICAgZHMuc2V0R3VpZGVzRW5hYmxlZCh0cnVlKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g5ouW5ou957uE5YWD57SgDQogICAgbWFrZVRvb2xiYXJEcmFnZ2FibGUgKCkgew0KICAgICAgY29uc3QgZ3JvdXB0b29sSXRlbSA9IHRoaXMuJHJlZnMuZ3JvdXB0b29sSXRlbTsNCiAgICAgIGlmICghKGdyb3VwdG9vbEl0ZW0gaW5zdGFuY2VvZiBBcnJheSkpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgZ3JvdXB0b29sSXRlbS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICBjb25zdCB0b29sSXRlbSA9IHRoaXMuZ3JvdXB0b29sSXRlbXNbaW5kZXhdOw0KICAgICAgICBjb25zdCB7IGhlaWdodCwgd2lkdGggfSA9IHRvb2xJdGVtOw0KICAgICAgICAvLyDliJvlu7rmi5bmi73ml7bnmoTpooTop4jlm77lvaINCiAgICAgICAgY29uc3QgY3JlYXRlRHJhZ1ByZXZpZXcgPSAoKSA9PiB7DQogICAgICAgICAgY29uc3QgZWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgICAgICAgZWx0LnN0eWxlLmJvcmRlciA9ICcycHggZG90dGVkIGJsYWNrJzsNCiAgICAgICAgICBlbHQuc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7DQogICAgICAgICAgZWx0LnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7DQogICAgICAgICAgZWx0LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwtNTAlKSc7DQogICAgICAgICAgZWx0LmNsYXNzTmFtZSA9IHRvb2xJdGVtLmNsYXNzOw0KICAgICAgICAgIHJldHVybiBlbHQ7DQogICAgICAgIH07DQogICAgICAgIC8vIGRyb3DnmoTlpITnkIblh73mlbANCiAgICAgICAgY29uc3QgZHJvcEhhbmRsZXIgPSAoZ3JhcGgsIGV2dCwgY2VsbCwgeCwgeSkgPT4gew0KICAgICAgICAgIHRoaXMuaW5zdGFuY2VDZWxsKGNlbGwsIHRvb2xJdGVtLCB4LCB5KTsNCiAgICAgICAgfTsNCiAgICAgICAgLy8g6I635Y+W5ouW5pS+55qE5a+56LGhDQogICAgICAgIGNvbnN0IGdldERyb3BUYXJnZXQgPSAoZ3JhcGgsIHgsIHkpID0+IHsNCiAgICAgICAgICBjb25zdCBjZWxsID0gZ3JhcGguZ2V0Q2VsbEF0KHgsIHkpOw0KICAgICAgICAgIHJldHVybiBSLnByb3BPcihudWxsLCAnZHJvcEFibGUnLCBjZWxsKSA/IGNlbGwgOiBudWxsOw0KICAgICAgICB9Ow0KICAgICAgICBteFV0aWxzLm1ha2VEcmFnZ2FibGUoaXRlbSwgdGhpcy5ncmFwaCwgZHJvcEhhbmRsZXIsIGNyZWF0ZURyYWdQcmV2aWV3KGluZGV4KSwgMCwgMCwgZmFsc2UsIHRydWUsIHRydWUsIGdldERyb3BUYXJnZXQpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDmlrDlop7nu4TlhYPntKANCiAgICBpbnN0YW5jZUNlbGwgKGRyb3BDZWxsLCB0b29sSXRlbSwgeCwgeSkgew0KICAgICAgY29uc3QgZHJvcCA9ICFSLmlzTmlsKGRyb3BDZWxsKTsNCiAgICAgIC8vIGRyb3AgJiYgdGhpcy4kbWVzc2FnZS5pbmZvKGAke3Rvb2xJdGVtWyd0aXRsZSddfeiKgueCueWFpSR7ZHJvcENlbGwudGl0bGV9YCk7DQogICAgICBjb25zdCBzdHlsZU9iaiA9IHRvb2xJdGVtWydzdHlsZSddIHx8IHt9Ow0KICAgICAgY29uc3Qgc3R5bGUgPSBPYmplY3Qua2V5cyhzdHlsZU9iaikubWFwKChrZXkpID0+IGAke2tleX09JHtzdHlsZU9ialtrZXldfWApLmpvaW4oJzsnKTsNCiAgICAgIGNvbnN0IHJlYWxYID0gZHJvcCA/IHggLSBkcm9wQ2VsbC5nZW9tZXRyeS54IDogeDsNCiAgICAgIGNvbnN0IHJlYWxZID0gZHJvcCA/IHkgLSBkcm9wQ2VsbC5nZW9tZXRyeS55IDogeTsNCiAgICAgIGNvbnN0IHsgaGVpZ2h0LCB3aWR0aCB9ID0gdG9vbEl0ZW07DQogICAgICBjb25zdCBwYXJlbnQgPSBkcm9wID8gZHJvcENlbGwgOiB0aGlzLmdyYXBoLmdldERlZmF1bHRQYXJlbnQoKTsNCiAgICAgIGNvbnN0IGlzSHRtbCA9IE9iamVjdC5pcygnMScsIHRvb2xJdGVtWydzdHlsZSddWydodG1sJ10pOw0KICAgICAgY29uc3QgdG1wSW5kZXggPSBEYXRlLm5vdygpOw0KICAgICAgY29uc3QgdmFsdWUgPSBpc0h0bWwgPyB0b29sSXRlbVsnaHRtbCddKHRtcEluZGV4KSA6IG51bGw7DQogICAgICB0aGlzLmdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTsNCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHZlcnRleCA9IHRoaXMuZ3JhcGguaW5zZXJ0VmVydGV4KHBhcmVudCwgbnVsbCwgdmFsdWUsIHJlYWxYIC0gKHdpZHRoIC8gMiksIHJlYWxZIC0gKGhlaWdodCAvIDIpLCB3aWR0aCwgaGVpZ2h0LCBzdHlsZSArICc7d2hpdGVTcGFjZT13cmFwO3dvcmQtYnJlYWs9YnJlYWstYWxsJyk7DQogICAgICAgIHZlcnRleFsndGl0bGUnXSA9IHRvb2xJdGVtWyd0aXRsZSddOw0KICAgICAgICB2ZXJ0ZXhbJ2Ryb3BBYmxlJ10gPSB0b29sSXRlbVsnZHJvcEFibGUnXTsNCiAgICAgICAgdmVydGV4WydpZCddID0gdG9vbEl0ZW1bJ2lkJ107DQogICAgICAgIHZlcnRleFsnaXNHcm91cCddID0gdG9vbEl0ZW1bJ2lkJ10uaW5jbHVkZXMoJ2dyb3VwJykgPyB0cnVlIDogZmFsc2UNCiAgICAgICAgLy8g6K6+572u6L+e5o6l54K5DQogICAgICAgIC8vIGNlbGxbJ2NvbnN0cmFpbnRzJ10gPSB0b29sSXRlbVsnY29uc3RyYWludHMnXQ0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgY29uc3QgY3JlYXRlZENhbGxiYWNrID0gdG9vbEl0ZW1bJ2NyZWF0ZWQnXTsNCiAgICAgICAgICBpZiAoY3JlYXRlZENhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24pIHsNCiAgICAgICAgICAgIGNyZWF0ZWRDYWxsYmFjayh0aGlzLmdyYXBoLCB2ZXJ0ZXgsIHRtcEluZGV4KTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgdGhpcy5ncmFwaC5nZXRNb2RlbCgpLmVuZFVwZGF0ZSgpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDln7rnoYDphY3nva7lh73mlbANCiAgICBldmVudENlbnRlciAoKSB7DQoNCiAgICAgIC8vIOe7mWdyYXBo5re75Yqg5LqL5Lu2DQogICAgICAvLyDnm5HlkKzoh6rlrprkuYnkuovku7YNCiAgICAgIHRoaXMuZ3JhcGguYWRkTGlzdGVuZXIobXhFdmVudC5OT1JNQUxfVFlQRV9DTElDS0VELCAoc2VuZGVyLCBldnQpID0+IHsNCiAgICAgICAgbGV0IGNlbGwgPSBldnQucHJvcGVydGllcy5jZWxsLnN0YXRlLmNlbGw7DQogICAgICAgIHRoaXMuY3VycmVudE5vcm1hbFR5cGUgPSBjZWxsOw0KICAgICAgfSk7DQogICAgICAvLyB0aGlzLmdyYXBoLmFkZExpc3RlbmVyKG14RXZlbnQuVkVSVEVYX1NUQVJUX01PVkUsIChzZW5kZXIsIGV2dCkgPT4gew0KICAgICAgLy8gICBjb25zb2xlLmxvZygnVkVSVEVYX1NUQVJUX01PVkUnLCBzZW5kZXIsIGV2dCk7DQogICAgICAvLyB9KTsNCiAgICAgIC8vIOeUu+W4g+W5s+enu+S6i+S7tg0KICAgICAgdGhpcy5ncmFwaC5hZGRMaXN0ZW5lcihteEV2ZW50LlBBTiwgKHNlbmRlciwgZXZ0KSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKCfnlLvluIPlubPnp7vkuoYnLCBzZW5kZXIsIGV2dCk7DQogICAgICB9KTsNCiAgICAgIC8vIOaWsOWinuiKgueCueS6i+S7tg0KICAgICAgdGhpcy5ncmFwaC5hZGRMaXN0ZW5lcihteEV2ZW50LkFERF9DRUxMUywgKHNlbmRlciwgZXZ0KSA9PiB7DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICBsZXQgYWRkQ2VsbCA9IGV2dC5wcm9wZXJ0aWVzLmNlbGxzWzBdOw0KICAgICAgICAgIGlmIChhZGRDZWxsLnZlcnRleCkgew0KICAgICAgICAgICAgLy8g5Yik5pat5piv5ZCm5Li657uE6IqC54K5DQogICAgICAgICAgICBpZiAoYWRkQ2VsbC5pc0dyb3VwKSB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygnQWRkZWQgYSBncm91cCcpOw0KICAgICAgICAgICAgICBsZXQgZ3JvdXBPYmogPSBfLnBpY2soYWRkQ2VsbCwgWydpZCcsICd0aXRsZScsICdwYXJlbnQnLCAnZ2VvbWV0cnknXSk7DQogICAgICAgICAgICAgIHRoaXMuanNvbkRhdGFbJ2NlbGxzJ11bJ2dyb3VwcyddLnB1c2goZ3JvdXBPYmopOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgbGV0IG5vZGVPYmogPSBfLnBpY2soYWRkQ2VsbCwgWydpZCcsICd0aXRsZScsICdwYXJlbnQnLCAnZ2VvbWV0cnknXSk7DQogICAgICAgICAgICAgIHRoaXMuanNvbkRhdGFbJ2NlbGxzJ11bJ25vZGVzJ10ucHVzaChub2RlT2JqKTsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKCfmt7vliqDkuobkuIDkuKroioLngrknKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vICDlkJFqc29uRGF0YeS4reabtOaWsOaVsOaNrg0KICAgICAgICAgIH0gZWxzZSBpZiAoYWRkQ2VsbC5lZGdlKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhhZGRDZWxsKQ0KICAgICAgICAgICAgbGV0IGxpbmVPYmogPSBfLnBpY2soYWRkQ2VsbCwgWydpZCcsICdlZGdlJywgJ3NvdXJjZScsICdwYXJlbnQnLCAnZ2VvbWV0cnknLCAndmFsdWUnXSk7DQogICAgICAgICAgICB0aGlzLmpzb25EYXRhWydlZGdlcyddLnB1c2gobGluZU9iaik7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oJ0EgbGluZSB3YXMgYWRkZWQnKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9KTsNCg0KICAgICAgLy/mi5bliqjoioLngrnnmoTkuovku7YNCiAgICAgIHRoaXMuZ3JhcGguYWRkTGlzdGVuZXIobXhFdmVudC5DRUxMU19NT1ZFRCwgKHNlbmRlciwgZXZ0KSA9PiB7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZ3JhcGgsICdncmFwaCcpOw0KICAgICAgICBsZXQgY2VsbHNOYW1lID0gW107DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICBldnQucHJvcGVydGllcy5jZWxscy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgaXRlbS5wYXJlbnQuaWQuaW5jbHVkZXMoJ2dyb3VwJykgJiYgY2VsbHNOYW1lLnB1c2goaXRlbS50aXRsZSk7DQogICAgICAgICAgfSk7DQogICAgICAgICAgZXZ0LnByb3BlcnRpZXMuY2VsbHNbMF0ucGFyZW50LmlkICE9PSAnMScgJiYgdGhpcy4kbWVzc2FnZS5pbmZvKGAke1suLi5jZWxsc05hbWVdfeiKgueCuei/m+WFpSR7ZXZ0LnByb3BlcnRpZXMuY2VsbHNbMF0ucGFyZW50LnRpdGxlfWApOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgICAgLy8g5Yig6Zmk6IqC54K56Kem5Y+R5LqL5Lu2DQogICAgICB0aGlzLmdyYXBoLmFkZExpc3RlbmVyKG14RXZlbnQuQ0VMTFNfUkVNT1ZFRCwgKHNlbmRlciwgZXZ0KSA9PiB7DQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICBsZXQgcmVtb3ZlQ2VsbHMgPSBldnQucHJvcGVydGllcy5jZWxsczsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZW1vdmVDZWxscywgJ3JlbW92ZUNlbGxzJykNCiAgICAgICAgICByZW1vdmVDZWxscy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgLy8g5ou/5q+P5LiA5LiqY2VsbElk5ZyoanNvbkRhdGHkuK3ov5vooYzpgY3ljoYs5bm26L+b6KGM56e76ZmkDQogICAgICAgICAgICBpZiAoaXRlbS52ZXJ0ZXgpIHsNCiAgICAgICAgICAgICAgLy8g5Yik5pat5piv5ZCm5Li657uE6IqC54K5DQogICAgICAgICAgICAgIGlmIChpdGVtLmlzR3JvdXApIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oYHJlbW92ZSR7aXRlbS5pZH1ncm91cGApOw0KICAgICAgICAgICAgICAgIHRoaXMuanNvbkRhdGFbJ2NlbGxzJ11bJ2dyb3VwcyddLnNwbGljZSh0aGlzLmpzb25EYXRhWydjZWxscyddWydncm91cHMnXS5maW5kSW5kZXgoanNvbkl0ZW0gPT4geyByZXR1cm4ganNvbkl0ZW0uaWQgPT09IGl0ZW0uaWQgfSksIDEpDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKGByZW1vdmUke2l0ZW0uaWR9bm9kZWApOw0KICAgICAgICAgICAgICAgIHRoaXMuanNvbkRhdGFbJ2NlbGxzJ11bJ25vZGVzJ10uc3BsaWNlKHRoaXMuanNvbkRhdGFbJ2NlbGxzJ11bJ25vZGVzJ10uZmluZEluZGV4KGpzb25JdGVtID0+IHsgcmV0dXJuIGpzb25JdGVtLmlkID09PSBpdGVtLmlkIH0pLCAxKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uZWRnZSkgew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oJ1JlbW92ZWQgbGluZScpOw0KICAgICAgICAgICAgICB0aGlzLmpzb25EYXRhWydlZGdlcyddLnNwbGljZSh0aGlzLmpzb25EYXRhWydlZGdlcyddLmZpbmRJbmRleChqc29uSXRlbSA9PiB7IHJldHVybiBqc29uSXRlbS5pZCA9PT0gaXRlbS5pZCB9KSwgMSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIHRoaXMuanNvbkRhdGEuZm9yRWFjaChpdGVtKQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KDQogICAgfSwNCiAgICAvLyDphY3nva7pvKDmoIfkuovku7YNCiAgICBjb25maWdNb3VzZUV2ZW50ICgpIHsNCiAgICAgIHRoaXMuZ3JhcGguYWRkTW91c2VMaXN0ZW5lcigNCiAgICAgICAgew0KICAgICAgICAgIGN1cnJlbnRTdGF0ZTogbnVsbCwNCiAgICAgICAgICBwcmV2aW91c1N0eWxlOiBudWxsLA0KDQogICAgICAgICAgbW91c2VEb3duOiAoc2VuZGVyLCBldnQpID0+IHsNCiAgICAgICAgICAgIGlmICghZXZ0LnN0YXRlKSB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfngrnlh7vkuobnlLvluIMnKTsNCiAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChldnQuc3RhdGUuY2VsbC5lZGdlKSB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfngrnlh7vkuobov57nur8nKTsNCiAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCBjZWxsID0gZXZ0LnN0YXRlLmNlbGw7DQogICAgICAgICAgICBsZXQgY2xpY2tOb3JtYWxUeXBlID0gZmFsc2U7DQogICAgICAgICAgICBpZiAoY2VsbC5zdHlsZSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgIGNsaWNrTm9ybWFsVHlwZSA9IGNlbGwuc3R5bGUuaW5jbHVkZXMoJ25vcm1hbFR5cGUnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChjbGlja05vcm1hbFR5cGUpIHsNCiAgICAgICAgICAgICAgLy8g5L2/55SoIG14R3JhcGgg5LqL5Lu25Lit5b+D77yM5rOo5YaM6Ieq5a6a5LmJ5LqL5Lu2DQogICAgICAgICAgICAgIHRoaXMuZ3JhcGguZmlyZUV2ZW50KG5ldyBteEV2ZW50T2JqZWN0KG14RXZlbnQuTk9STUFMX1RZUEVfQ0xJQ0tFRCwgJ2NlbGwnLCBldnQpKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KDQogICAgICAgICAgbW91c2VNb3ZlOiAoc2VuZGVyLCBtZSkgPT4gew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ21vdXNlTW92ZScpDQogICAgICAgICAgICB0aGlzLmdyYXBoWCA9IE1hdGguY2VpbChtZS5ncmFwaFgpOw0KICAgICAgICAgICAgdGhpcy5ncmFwaFkgPSBNYXRoLmNlaWwobWUuZ3JhcGhZKTsNCiAgICAgICAgICB9LA0KDQogICAgICAgICAgbW91c2VVcDogKHNlbmRlciwgZXZ0KSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnbW91c2VVcCcpOw0KICAgICAgICAgICAgaWYgKGV2dC5zb3VyY2VTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHZhciBjZWxsID0gZXZ0LnNvdXJjZVN0YXRlLmNlbGw7DQogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGNlbGwpOw0KICAgICAgICAgICAgICAvLyAgdmFyIGNlbGwgPSB0aGlzLmdyYXBoLmdldFNlbGVjdGlvbkNlbGwoKTsNCiAgICAgICAgICAgICAgaWYgKGNlbGwpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnRleHRWYWx1ZSA9IGNlbGxbJ3ZhbHVlJ10gPyBjZWxsWyd2YWx1ZSddIDogY2VsbFsndGl0bGUnXTsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRleHRWYWx1ZSwgJ2NlbGxWYWx1ZScpDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NlbGxWYWx1aWUnLCBjZWxsKQ0KICAgICAgICAgICAgICAgIGNlbGwudmVydGV4ID8gdGhpcy5pc05vZGUgPSB0cnVlIDogdGhpcy5pc05vZGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB2YXIgZ2V0Y2VsbFN0eWxlID0gY2VsbC5nZXRTdHlsZSgpID8gY2VsbC5nZXRTdHlsZSgpIDogbnVsbDsNCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNOb2RlKSB7DQogICAgICAgICAgICAgICAgICAvLyDngrnlh7vnmoTkuI3mmK/oioLngrkNCiAgICAgICAgICAgICAgICAgIGdldGNlbGxTdHlsZSA/IHRoaXMuZWRnZVN0eWxlID0gZ2V0Y2VsbFN0eWxlIDogJ29ydGhvZ29uYWxFZGdlU3R5bGUnOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAvLyDngrnlh7vnmoTmmK/oioLngrkNCiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdnZXRjZWxsU3R5bGUnLCBnZXRjZWxsU3R5bGUpOw0KICAgICAgICAgICAgICAgICAgaWYgKGdldGNlbGxTdHlsZSkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgYXJyID0gZ2V0Y2VsbFN0eWxlLnNwbGl0KCc7Jyk7DQogICAgICAgICAgICAgICAgICAgIC8vIGFyci5wb3AoKQ0KICAgICAgICAgICAgICAgICAgICB2YXIgc3R5bGVPYmplY3QgPSB7fTsNCiAgICAgICAgICAgICAgICAgICAgYXJyLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgc3R5bGVPYmplY3RbaXRlbS5zcGxpdCgnPScpWzBdXSA9IGl0ZW0uc3BsaXQoJz0nKVsxXTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY2VsbFN0eWxlID0gc3R5bGVPYmplY3Q7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ1BsZWFzZSBzZWxlY3QgYSBub2RlIG9yIGNvbm5lY3Rpb24nKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgIH0pOw0KICAgIH0sDQogICAgLy/phY3nva7plK7nm5jkuovku7YNCiAgICBjb25maWdLZXlFdmVudCAoKSB7DQogICAgICAvLyDlkK/liqjnm5jkuovku7bplK4NCiAgICAgIHRoaXMua2V5SGFuZGxlciA9IG5ldyBteEtleUhhbmRsZXIodGhpcy5ncmFwaCk7DQogICAgICAvLyDplK7nm5jmjInkuIvliKDpmaTplK7nu5Hlrprkuovku7YNCiAgICAgIHRoaXMua2V5SGFuZGxlci5iaW5kS2V5KDQ2LCAoKSA9PiB7DQogICAgICAgIHRoaXMuZGVsZXRlTm9kZSgpDQogICAgICB9KTsNCiAgICAgIHRoaXMua2V5SGFuZGxlci5iaW5kQ29udHJvbEtleSg2NSwgKCkgPT4gew0KICAgICAgICB0aGlzLmdyYXBoLnNlbGVjdEFsbCgpOw0KICAgICAgfSk7DQogICAgICB0aGlzLmtleUhhbmRsZXIuYmluZENvbnRyb2xLZXkoNjcsICgpID0+IHsNCiAgICAgICAgdGhpcy5jb3B5KCk7DQogICAgICB9KTsNCiAgICAgIHRoaXMua2V5SGFuZGxlci5iaW5kQ29udHJvbEtleSg4OCwgKCkgPT4gew0KICAgICAgICB0aGlzLmN1dCgpOw0KICAgICAgfSk7DQogICAgICB0aGlzLmtleUhhbmRsZXIuYmluZENvbnRyb2xLZXkoODYsICgpID0+IHsNCiAgICAgICAgdGhpcy5wYXN0ZSgpOw0KICAgICAgfSk7DQogICAgICB0aGlzLmtleUhhbmRsZXIuYmluZENvbnRyb2xLZXkoODksICgpID0+IHsNCiAgICAgICAgdGhpcy5nb0ZvcndhcmQoKTsNCiAgICAgIH0pOw0KICAgICAgdGhpcy5rZXlIYW5kbGVyLmJpbmRDb250cm9sS2V5KDkwLCAoKSA9PiB7DQogICAgICAgIHRoaXMuZ29CYWNrKCk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8v6YWN572u5Y+z6ZSu6I+c5Y2V5qCPDQogICAgY29uZmlnTWVudSAoKSB7DQogICAgICAvLyDnpoHnlKjmtY/op4jlmajpu5jorqTnmoTlj7PplK7oj5zljZXmoI8NCiAgICAgIG14RXZlbnQuZGlzYWJsZUNvbnRleHRNZW51KHRoaXMuJHJlZnMuY29udGFpbmVyKTsNCiAgICAgIHRoaXMuZ3JhcGgucG9wdXBNZW51SGFuZGxlci5mYWN0b3J5TWV0aG9kID0gKG1lbnUpID0+IHsNCiAgICAgICAgbWVudS5hZGRJdGVtKCdPdXRwdXQgYWxsIG5vZGVzJywgbnVsbCwgKCkgPT4gew0KICAgICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5ncmFwaC5nZXRNb2RlbCgpLmNlbGxzKS5mb3JFYWNoKChjZWxsKSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhjZWxsKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgbWVudS5hZGRTZXBhcmF0b3IoKTsNCiAgICAgICAgbWVudS5hZGRJdGVtKCdjb3B5JywgbnVsbCwgKCkgPT4gew0KICAgICAgICAgIHRoaXMuY29weSgpOw0KICAgICAgICB9KTsNCg0KICAgICAgICBtZW51LmFkZEl0ZW0oJ2FmZml4JywgbnVsbCwgKCkgPT4gew0KICAgICAgICAgIHRoaXMucGFzdGUoKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgbWVudS5hZGRTZXBhcmF0b3IoKTsNCiAgICAgICAgbWVudS5hZGRJdGVtKCdhc3NlbWJseScsIG51bGwsICgpID0+IHsNCiAgICAgICAgICB0aGlzLmVuR3JvdXAoKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgbWVudS5hZGRJdGVtKCdTYWx2YWdlJywgbnVsbCwgKCkgPT4gew0KICAgICAgICAgIHRoaXMuZ3JhcGgudW5ncm91cENlbGxzKHRoaXMuZ3JhcGguZ2V0U2VsZWN0aW9uQ2VsbHMoKSk7DQogICAgICAgIH0pOw0KICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpOw0KICAgICAgICBtZW51LmFkZEl0ZW0oJ0Zsb3dpbmcgbGluZScsIG51bGwsICgpID0+IHsNCiAgICAgICAgICBsZXQgY2VsbCA9IHRoaXMuZ3JhcGguZ2V0U2VsZWN0aW9uQ2VsbCgpOw0KICAgICAgICAgIGlmIChjZWxsICYmIGNlbGwuZWRnZSkgew0KICAgICAgICAgICAgbGV0IHN0YXRlID0gdGhpcy5ncmFwaC52aWV3LmdldFN0YXRlKGNlbGwpOw0KICAgICAgICAgICAgc3RhdGUuc2hhcGUubm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgncGF0aCcpWzBdLnJlbW92ZUF0dHJpYnV0ZSgndmlzaWJpbGl0eScpOw0KICAgICAgICAgICAgc3RhdGUuc2hhcGUubm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgncGF0aCcpWzBdLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzYnKTsNCiAgICAgICAgICAgIHN0YXRlLnNoYXBlLm5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhdGgnKVswXS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdsaWdodEdyYXknKTsNCiAgICAgICAgICAgIHN0YXRlLnNoYXBlLm5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhdGgnKVsxXS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2Zsb3cnKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcignUGxlYXNlIHNlbGVjdCBjb25uZWN0aW9uJyk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgICAgbWVudS5hZGRTZXBhcmF0b3IoKTsNCiAgICAgICAgLy8gbWVudS5hZGRJdGVtKCfphY3nva7lrozmiJAnLCBudWxsLCAoKSA9PiB7DQogICAgICAgIC8vICAgbGV0IGNlbGwgPSB0aGlzLmdyYXBoLmdldFNlbGVjdGlvbkNlbGwoKS5jaGlsZHJlblswXTsNCiAgICAgICAgLy8gICBsZXQgY2VsbEFycmF5U3R5bGUgPSBjZWxsLmdldFN0eWxlKCkuc3BsaXQoJzsnKTsNCiAgICAgICAgLy8gICBjZWxsQXJyYXlTdHlsZS5zaGlmdCgpOw0KICAgICAgICAvLyAgIGxldCBjZWxsU3R5bGUgPSB7fTsNCiAgICAgICAgLy8gICBjZWxsQXJyYXlTdHlsZS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAvLyAgICAgY2VsbFN0eWxlW2l0ZW0uc3BsaXQoJz0nKVswXV0gPSBpdGVtLnNwbGl0KCc9JylbMV07DQogICAgICAgIC8vICAgfSk7DQogICAgICAgIC8vICAgbGV0IGNlbGxJbWFnZSA9IGNlbGxTdHlsZVsnaW1hZ2UnXS5yZXBsYWNlKCd1bnNlbGVjdCcsICdzZWxlY3RlZCcpOw0KICAgICAgICAvLyAgIHRoaXMuZ3JhcGguc2V0Q2VsbFN0eWxlcyhteENvbnN0YW50cy5TVFlMRV9JTUFHRSwgY2VsbEltYWdlLCBbY2VsbF0pOw0KICAgICAgICAvLyAgIHRoaXMuZ3JhcGgucmVmcmVzaChjZWxsKTsNCiAgICAgICAgLy8gfSk7DQogICAgICAgIG1lbnUuYWRkSXRlbSgnc2VsZWN0IGFsbCcsIG51bGwsICgpID0+IHsNCiAgICAgICAgICB0aGlzLmdyYXBoLnNlbGVjdEFsbCgpOw0KICAgICAgICB9KTsNCiAgICAgICAgbWVudS5hZGRJdGVtKCdTZWxlY3QgYWxsIG5vZGVzJywgbnVsbCwgKCkgPT4gew0KICAgICAgICAgIHRoaXMuZ3JhcGguc2VsZWN0Q2VsbHModHJ1ZSwgZmFsc2UpOw0KICAgICAgICB9KTsNCiAgICAgICAgbWVudS5hZGRJdGVtKCdTZWxlY3QgYWxsIGNvbm5lY3Rpb25zJywgbnVsbCwgKCkgPT4gew0KICAgICAgICAgIHRoaXMuZ3JhcGguc2VsZWN0Q2VsbHMoZmFsc2UsIHRydWUpOw0KICAgICAgICB9KTsNCiAgICAgICAgLy8g5YiG5Ymy56ym5Y+3DQogICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7DQogICAgICAgIG1lbnUuYWRkSXRlbSgnTW9kaWZ5IHN0eWxlJywgbnVsbCwgKCkgPT4gew0KICAgICAgICAgIHZhciBjZWxsID0gdGhpcy5ncmFwaC5nZXRTZWxlY3Rpb25DZWxsKCk7DQogICAgICAgICAgaWYgKGNlbGwpIHsNCiAgICAgICAgICAgIGNlbGwudmVydGV4ID8gdGhpcy5pc05vZGUgPSB0cnVlIDogdGhpcy5pc05vZGUgPSBmYWxzZTsNCiAgICAgICAgICAgIHZhciBnZXRjZWxsU3R5bGUgPSBjZWxsLmdldFN0eWxlKCkgPyBjZWxsLmdldFN0eWxlKCkgOiAnJzsNCiAgICAgICAgICAgIGlmIChnZXRjZWxsU3R5bGUpIHsNCiAgICAgICAgICAgICAgdmFyIGFyciA9IGdldGNlbGxTdHlsZS5zcGxpdCgnOycpOw0KICAgICAgICAgICAgICAvL+W8ueWHuuacgOWQjuS4gOS4quepuuagt+W8jw0KICAgICAgICAgICAgICAvLyBhcnIucG9wKCkNCiAgICAgICAgICAgICAgdmFyIHN0eWxlT2JqZWN0ID0ge307DQogICAgICAgICAgICAgIGFyci5mb3JFYWNoKChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICBzdHlsZU9iamVjdFtpdGVtLnNwbGl0KCc9JylbMF1dID0gaXRlbS5zcGxpdCgnPScpWzFdOw0KICAgICAgICAgICAgICB9KSk7DQogICAgICAgICAgICAgIHRoaXMuY2VsbFN0eWxlID0gc3R5bGVPYmplY3Q7DQogICAgICAgICAgICAgIC8vIGlmICh0aGlzLmlzTm9kZSkgew0KDQogICAgICAgICAgICAgIC8vIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcignUGxlYXNlIHNlbGVjdCBhIG5vZGUgb3IgY29ubmVjdGlvbicpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9Ow0KICAgIH0sDQogICAgLy8gIOmFjee9ruWFqOWxgOagt+W8jw0KICAgIGNvbmZpZ3VyZVN0eWxlc2hlZXQgKGdyYXBoKSB7DQogICAgICAvLyDorr7nva7oioLngrnnmoTmloflrZflj6/ooqvnp7vliqgNCiAgICAgIGdyYXBoLnZlcnRleExhYmVsc01vdmFibGUgPSBmYWxzZTsNCiAgICAgIC8vIOiuvue9rum8oOagh+aCrOa1ruiHs+iKgueCueaIluiAhei/nue6v+aXtumrmOS6ruaYvuekuueahOminOiJsg0KICAgICAgbmV3IG14Q2VsbFRyYWNrZXIoZ3JhcGgsICcjNDA5ZWZmJyk7DQogICAgICB2YXIgc3R5bGUgPSBuZXcgT2JqZWN0KCk7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9TSEFQRV0gPSBteENvbnN0YW50cy5TSEFQRV9MQUJFTDsNCiAgICAgIHN0eWxlW214Q29uc3RhbnRzLlNUWUxFX1BFUklNRVRFUl0gPSBteFBlcmltZXRlci5SZWN0YW5nbGVQZXJpbWV0ZXI7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9WRVJUSUNBTF9BTElHTl0gPSBteENvbnN0YW50cy5BTElHTl9NSURETEU7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9BTElHTl0gPSBteENvbnN0YW50cy5BTElHTl9DRU5URVI7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9JTUFHRV9BTElHTl0gPSBteENvbnN0YW50cy5BTElHTl9DRU5URVI7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9JTUFHRV9WRVJUSUNBTF9BTElHTl0gPSBteENvbnN0YW50cy5BTElHTl9DRU5URVI7DQogICAgICAvLyBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9TUEFDSU5HX1RPUF0gPSA2Ow0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfU1BBQ0lOR19MRUZUXSA9IDU7DQogICAgICAvLyBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9HUkFESUVOVENPTE9SXSA9ICdza3libHVlJzsgLy8g5riQ5Y+Y6aKc6ImyDQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9TVFJPS0VDT0xPUl0gPSAnIzVkNjVkZic7ICAgLy8g57q/5p2h6aKc6ImyDQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9GSUxMQ09MT1JdID0gJyNGRkZGRkYnOw0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfRk9OVENPTE9SXSA9ICcjMWQyNThmJzsgICAgIC8vIOWtl+S9k+minOiJsg0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfRk9OVEZBTUlMWV0gPSAnVmVyZGFuYSc7ICAgIC8vIOWtl+S9k+mjjuagvA0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfRk9OVFNJWkVdID0gJzEyJzsgICAgICAgICAgIC8vIOWtl+S9k+Wkp+Wwjw0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfRk9OVFNUWUxFXSA9ICcwJzsgICAgICAgICAgIC8vIOaWnOS9k+Wtlw0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuV09SRF9XUkFQXSA9ICdub3JtYWwnOyAgICAgICAgICAgICAvLyDmloflrZfmjaLooYwgICAgd29yZC1icmVhazogYnJlYWstYWxsOw0KICAgICAgc3R5bGVbbXhDb25zdGFudHNbJ3dvcmQtYnJlYWsnXV0gPSAnYnJlYWstYWxsJzsgICAgICAgICAgICAgLy8g5paH5a2X5o2i6KGMDQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9XSElURV9TUEFDRV0gPSAnd3JhcCc7ICAgICAgICAgICAgIC8vIOaWh+Wtl+aNouihjA0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfUk9VTkRFRF0gPSBmYWxzZTsgICAgICAgICAgICAgLy8g5ZyG6KeSDQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9JTUFHRV9XSURUSF0gPSAnMjgnOyAgICAgICAgLy8g5Zu+54mH5a695bqmDQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9JTUFHRV9IRUlHSFRdID0gJzI4JzsgICAgICAgLy8g5Zu+54mH6auY5bqmDQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9PUEFDSVRZXSA9ICcxMDAnOyAgICAgICAgICAgIC8vIOiKgueCuemAj+aYjuW6pijkuI3ljIXlkKvlrZfkvZMpDQogICAgICBncmFwaC5nZXRTdHlsZXNoZWV0KCkucHV0RGVmYXVsdFZlcnRleFN0eWxlKHN0eWxlKTsNCg0KICAgICAgc3R5bGUgPSBuZXcgT2JqZWN0KCk7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9TSEFQRV0gPSBteENvbnN0YW50cy5TSEFQRV9TV0lNTEFORTsNCiAgICAgIHN0eWxlW214Q29uc3RhbnRzLlNUWUxFX1BFUklNRVRFUl0gPSBteFBlcmltZXRlci5SZWN0YW5nbGVQZXJpbWV0ZXI7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9BTElHTl0gPSBteENvbnN0YW50cy5BTElHTl9DRU5URVI7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9WRVJUSUNBTF9BTElHTl0gPSBteENvbnN0YW50cy5BTElHTl9UT1A7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9GSUxMQ09MT1JdID0gJyM0MDllZmYnOw0KICAgICAgLy8gc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfR1JBRElFTlRDT0xPUl0gPSAnIzQwOWVmZic7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9TVFJPS0VDT0xPUl0gPSAnIzQwOWVmZic7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9GT05UQ09MT1JdID0gJyMwMDAwMDAnOw0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfUk9VTkRFRF0gPSBmYWxzZTsNCiAgICAgIHN0eWxlW214Q29uc3RhbnRzLlNUWUxFX09QQUNJVFldID0gJzgwJzsNCiAgICAgIHN0eWxlW214Q29uc3RhbnRzLlNUWUxFX1NUQVJUU0laRV0gPSAnMzAnOw0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfRk9OVFNJWkVdID0gJzE2JzsNCiAgICAgIHN0eWxlW214Q29uc3RhbnRzLlNUWUxFX0ZPTlRTVFlMRV0gPSAxOw0KICAgICAgZ3JhcGguZ2V0U3R5bGVzaGVldCgpLnB1dENlbGxTdHlsZSgnZ3JvdXAnLCBzdHlsZSk7DQoNCiAgICAgIHN0eWxlID0gbmV3IE9iamVjdCgpOw0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfU0hBUEVdID0gbXhDb25zdGFudHMuU0hBUEVfSU1BR0U7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9GT05UQ09MT1JdID0gJyM3NzQ0MDAnOw0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfUEVSSU1FVEVSXSA9IG14UGVyaW1ldGVyLlJlY3RhbmdsZVBlcmltZXRlcjsNCiAgICAgIHN0eWxlW214Q29uc3RhbnRzLlNUWUxFX1BFUklNRVRFUl9TUEFDSU5HXSA9ICc2JzsNCiAgICAgIHN0eWxlW214Q29uc3RhbnRzLlNUWUxFX0FMSUdOXSA9IG14Q29uc3RhbnRzLkFMSUdOX0xFRlQ7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9WRVJUSUNBTF9BTElHTl0gPSBteENvbnN0YW50cy5BTElHTl9NSURETEU7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9GT05UU0laRV0gPSAnMTAnOw0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfRk9OVFNUWUxFXSA9IDI7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9JTUFHRV9XSURUSF0gPSAnMTYnOw0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfSU1BR0VfSEVJR0hUXSA9ICcxNic7DQogICAgICBzdHlsZVtteENvbnN0YW50cy5TVFlMRV9CQUNLR1JPVU5EQ09MT1JdID0gJ3RyYW5zcGFyZW50JzsNCiAgICAgIGdyYXBoLmdldFN0eWxlc2hlZXQoKS5wdXRDZWxsU3R5bGUoJ3BvcnQnLCBzdHlsZSk7DQoNCg0KICAgICAgc3R5bGUgPSBncmFwaC5nZXRTdHlsZXNoZWV0KCkuZ2V0RGVmYXVsdEVkZ2VTdHlsZSgpOw0KICAgICAgc3R5bGVbbXhDb25zdGFudHMuU1RZTEVfTEFCRUxfQkFDS0dST1VORENPTE9SXSA9ICcjRkZGRkZGJzsNCiAgICAgIHN0eWxlW214Q29uc3RhbnRzLlNUWUxFX1NUUk9LRVdJRFRIXSA9ICcyJzsNCiAgICAgIHN0eWxlW214Q29uc3RhbnRzLlNUWUxFX1JPVU5ERURdID0gdHJ1ZTsNCiAgICAgIC8vIOiOt+WPluWFqOWxgEVkZ2XjgIFsYWJlbOagt+W8jw0KICAgICAgdmFyIGVkZ2VTdHlsZSA9IHRoaXMuZ3JhcGguZ2V0U3R5bGVzaGVldCgpLmdldERlZmF1bHRFZGdlU3R5bGUoKTsNCiAgICAgIGxldCBsYWJlbFN0eWxlID0gdGhpcy5ncmFwaC5nZXRTdHlsZXNoZWV0KCkuZ2V0RGVmYXVsdFZlcnRleFN0eWxlKCk7DQogICAgICAvLyBsYWJlbFN0eWxlW214Q29uc3RhbnRzLlNUWUxFX1dISVRFX1NQQUNFXSA9ICd3cmFwJzsgLy/oh6rliqjmjaLooYwNCiAgICAgIGNvbnNvbGUubG9nKGxhYmVsU3R5bGUsICdsYWJlbFN0eWxlJykNCiAgICAgIC8vIOiuvue9rui/nue6v+mjjuagvCjorr7nva7kuLrmraPkuqTmipjnur8pDQogICAgICBlZGdlU3R5bGVbJ2VkZ2VTdHlsZSddID0gJ29ydGhvZ29uYWxFZGdlU3R5bGUnOw0KDQogICAgICAvLyDpgInkuK0gY2VsbC9lZGdlIOWQjueahOS8uOe8qeWkp+Wwj+eahOeCuS/mi5bliqjov57nur/kvY3nva7nmoTngrnnmoTpopzoibINCiAgICAgIC8vIHN0eWxlW214Q29uc3RhbnRzLlNUWUxFX1dISVRFX1NQQUNFXSA9ICd3cmFwJw0KDQogICAgICBteENvbnN0YW50cy5IQU5ETEVfRklMTENPTE9SID0gJyM0MDllZmYnOw0KICAgICAgbXhDb25zdGFudHMuSEFORExFX1NUUk9LRUNPTE9SID0gJ3RyYW5zcGFyZW50JzsNCiAgICAgIG14Q29uc3RhbnRzLlNUWUxFX0FOQ0hPUl9QT0lOVF9ESVJFQ1RJT04gPSAnYW5jaG9yUG9pbnREaXJlY3Rpb24nOw0KICAgICAgbXhDb25zdGFudHMuU1RZTEVfU1RZTEVfUk9UQVRJT04gPSAncm90YXRpb24nOw0KICAgICAgLy8g5piv5ZCm57yp5pS+572R5qC8DQogICAgICBteEdyYXBoSGFuZGxlci5wcm90b3R5cGUuc2NhbGVHcmlkID0gdHJ1ZTsNCiAgICAgIG14R3JhcGgucHJvdG90eXBlLnBhZ2VCcmVha0Rhc2hlZCA9IGZhbHNlOw0KDQogICAgICAvLyDmjIflrprmmK/lkKblupTkvb/nlKjlhbbku5bljZXlhYPmoLzlr7npvZDlvZPliY3miYDpgInlhoXlrrnnmoTlj7PkvqfvvIzkuK3pl7TmiJblt6bkvqfjgILpu5jorqTkuLpmYWxzZeOAgg0KICAgICAgbXhHcmFwaEhhbmRsZXIucHJvdG90eXBlLmd1aWRlc0VuYWJsZWQgPSB0cnVlOw0KICAgICAgbXhHcmFwaEhhbmRsZXIucHJvdG90eXBlLmh0bWxQcmV2aWV3ID0gZmFsc2U7DQogICAgICBteEdyYXBoSGFuZGxlci5wcm90b3R5cGUuYWxsb3dMaXZlUHJldmlldyA9IHRydWU7DQogICAgICAvLyDmjIflrprpooTop4jlvaLnirbnmoTpopzoibLjgILpu5jorqTkuLrpu5HoibLjgIINCiAgICAgIG14R3JhcGhIYW5kbGVyLnByb3RvdHlwZS5wcmV2aWV3Q29sb3IgPSAicmVkIg0KICAgICAgLy8g5bqU6K+l5L2/55So5a6e5pe26aKE6KeI55qE5pyA5aSn5Y2V5YWD5pWw44CC6buY6K6k5YC85Li6MO+8jOihqOekuuayoeacieWunuaXtumihOiniOOAgg0KICAgICAgbXhHcmFwaEhhbmRsZXIucHJvdG90eXBlLm1heExpdmVQcmV2aWV3ID0gMTAwOw0KDQogICAgICAvLyBBbHQg5oyJ5LiL56aB55So5a+86Iiq57q/DQogICAgICBteEdyYXBoSGFuZGxlci5wcm90b3R5cGUudXNlR3VpZGVzRm9yRXZlbnQgPSBmdW5jdGlvbiAobWUpIHsNCiAgICAgICAgcmV0dXJuICFteEV2ZW50LmlzQWx0RG93bihtZS5nZXRFdmVudCgpKTsNCiAgICAgIH07DQogICAgICAvLyDlr7zoiKrnur/popzoibINCiAgICAgIG14Q29uc3RhbnRzLkdVSURFX0NPTE9SID0gJyMxYTczZTgnOw0KICAgICAgLy8g5a+86Iiq57q/5a695bqmDQogICAgICBteENvbnN0YW50cy5HVUlERV9TVFJPS0VXSURUSCA9IDI7DQogICAgICAvLyDlr7zoiKrnur/oh6rliqjov57mjqXliLDnm67moIcNCiAgICAgIG14RWRnZUhhbmRsZXIucHJvdG90eXBlLnNuYXBUb1Rlcm1pbmFscyA9IHRydWU7DQogICAgICAvLyDpgInkuK3nur/mnaHml7bnmoTomZrnur/popzoibINCiAgICAgIG14Q29uc3RhbnRzLkVER0VfU0VMRUNUSU9OX0NPTE9SID0gJyM5OWNjZmYnOw0KICAgICAgLy8gbXhDb25zdGFudHMuREVGQVVMVF9JTlZBTElEX0NPTE9SID0gJ3llbGxvdyc7DQogICAgICAvLyBteENvbnN0YW50cy5JTlZBTElEX0NPTk5FQ1RfVEFSR0VUX0NPTE9SID0gJ3llbGxvdyc7DQogICAgICAvLyDov57nur8o5pyq5ruh6Laz6L+e57q/6KaB5rGCKeaXtumihOiniOeahOminOiJsg0KICAgICAgbXhDb25zdGFudHMuSU5WQUxJRF9DT0xPUiA9ICcjOTljY2ZmJzsNCiAgICAgIC8vIOi/nue6vyjmu6HotrPov57nur/opoHmsYIp5pe26aKE6KeI55qE6aKc6ImyDQogICAgICBteENvbnN0YW50cy5WQUxJRF9DT0xPUiA9ICdibHVlJzsNCiAgICAgIC8vIG14Q29uc3RhbnRzLkdVSURFX0NPTE9SID0gJ3llbGxvdyc7DQogICAgICAvLyBteENvbnN0YW50cy5MT0NLRURfSEFORExFX0ZJTExDT0xPUiA9ICcjMjRiY2FiJzsNCiAgICAgIC8vIOmAieS4reiKgueCueaXtumAieS4reahhueahOminOiJsg0KICAgICAgbXhDb25zdGFudHMuVkVSVEVYX1NFTEVDVElPTl9DT0xPUiA9ICcjOTljY2ZmJzsNCg0KICAgICAgLy/mipjlj6AtL+WxleW8gCvlm77moIflpKflsI8NCiAgICAgIC8vIG14R3JhcGgucHJvdG90eXBlLmNvbGxhcHNlZEltYWdlID0gbmV3IG14SW1hZ2UoJ2ltYWdlcy9jb2xsYXBzZWQuZ2lmJywgMTUsIDE1KTsNCiAgICAgIC8vIG14R3JhcGgucHJvdG90eXBlLmV4cGFuZGVkSW1hZ2UgPSBuZXcgbXhJbWFnZSgnaW1hZ2VzL2V4cGFuZGVkLmdpZicsIDE1LCAxNSk7DQoNCiAgICAgIC8vIOmFjee9ruiKgueCueS4reW/g+eahOi/nuaOpeWbvuaghyjms6jph4vmjonljbPlj6/mjIflrprpjKjpu57pgKPmjqXliLDlj6bkuIDlgIvnr4Dpu57nmoTpjKjpu57kuIopDQogICAgICBteENvbm5lY3Rpb25IYW5kbGVyLnByb3RvdHlwZS5jb25uZWN0SW1hZ2UgPSBuZXcgbXhJbWFnZSgnLi9pY29uL2Nvbm5lY3Rpb25wb2ludC5wbmcnLCAxNCwgMTQpOw0KICAgICAgLy8g5pi+56S65Lit5b+D56uv5Y+j5Zu+5qCHDQogICAgICBncmFwaC5jb25uZWN0aW9uSGFuZGxlci50YXJnZXRDb25uZWN0SW1hZ2UgPSBmYWxzZTsNCiAgICAgIC8vIOaYr+WQpuW8gOWQr+a1ruWKqOiHquWKqOi/nuaOpQ0KICAgICAgdGhpcy5ncmFwaC5jb25uZWN0aW9uSGFuZGxlci5pc0Nvbm5lY3RhYmxlQ2VsbCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9Ow0KICAgICAgLy8g6K6+5a6a6ZSa54K555qE5L2N572u44CB5Y+v57yW6L6R54q25oCB5ZKM5Zu+5qCHDQogICAgICBteENvbnN0cmFpbnRIYW5kbGVyLnByb3RvdHlwZS5wb2ludEltYWdlID0gbmV3IG14SW1hZ2UoJ2ljb24vZG90LnN2ZycsIDEwLCAxMCkNCiAgICAgIC8vIOiuvue9rumUmueCueS4iueahOmrmOS6ruminOiJsg0KICAgICAgbXhDb25zdHJhaW50SGFuZGxlci5wcm90b3R5cGUuY3JlYXRlSGlnaGxpZ2h0U2hhcGUgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiBuZXcgbXhFbGxpcHNlKG51bGwsICcjNDA5ZWZmOTknLCAnIzQwOWVmZjk5JywgMTUpDQogICAgICB9DQoNCiAgICAgIG14U2hhcGUucHJvdG90eXBlLmNvbnN0cmFpbnRzID0gWw0KICAgICAgICBuZXcgbXhDb25uZWN0aW9uQ29uc3RyYWludChuZXcgbXhQb2ludCgwLCAwKSwgdHJ1ZSksDQogICAgICAgIG5ldyBteENvbm5lY3Rpb25Db25zdHJhaW50KG5ldyBteFBvaW50KDAuMjUsIDApLCB0cnVlKSwNCiAgICAgICAgbmV3IG14Q29ubmVjdGlvbkNvbnN0cmFpbnQobmV3IG14UG9pbnQoMC41LCAwKSwgdHJ1ZSksDQogICAgICAgIG5ldyBteENvbm5lY3Rpb25Db25zdHJhaW50KG5ldyBteFBvaW50KDAuNzUsIDApLCB0cnVlKSwNCiAgICAgICAgbmV3IG14Q29ubmVjdGlvbkNvbnN0cmFpbnQobmV3IG14UG9pbnQoMCwgMC4yNSksIHRydWUpLA0KICAgICAgICBuZXcgbXhDb25uZWN0aW9uQ29uc3RyYWludChuZXcgbXhQb2ludCgwLCAwLjUpLCB0cnVlKSwNCiAgICAgICAgbmV3IG14Q29ubmVjdGlvbkNvbnN0cmFpbnQobmV3IG14UG9pbnQoMCwgMC43NSksIHRydWUpLA0KICAgICAgICBuZXcgbXhDb25uZWN0aW9uQ29uc3RyYWludChuZXcgbXhQb2ludCgxLCAwKSwgdHJ1ZSksDQogICAgICAgIG5ldyBteENvbm5lY3Rpb25Db25zdHJhaW50KG5ldyBteFBvaW50KDEsIDAuMjUpLCB0cnVlKSwNCiAgICAgICAgbmV3IG14Q29ubmVjdGlvbkNvbnN0cmFpbnQobmV3IG14UG9pbnQoMSwgMC41KSwgdHJ1ZSksDQogICAgICAgIG5ldyBteENvbm5lY3Rpb25Db25zdHJhaW50KG5ldyBteFBvaW50KDEsIDAuNzUpLCB0cnVlKSwNCiAgICAgICAgbmV3IG14Q29ubmVjdGlvbkNvbnN0cmFpbnQobmV3IG14UG9pbnQoMCwgMSksIHRydWUpLA0KICAgICAgICBuZXcgbXhDb25uZWN0aW9uQ29uc3RyYWludChuZXcgbXhQb2ludCgwLjI1LCAxKSwgdHJ1ZSksDQogICAgICAgIG5ldyBteENvbm5lY3Rpb25Db25zdHJhaW50KG5ldyBteFBvaW50KDAuNSwgMSksIHRydWUpLA0KICAgICAgICBuZXcgbXhDb25uZWN0aW9uQ29uc3RyYWludChuZXcgbXhQb2ludCgwLjc1LCAxKSwgdHJ1ZSksDQogICAgICAgIG5ldyBteENvbm5lY3Rpb25Db25zdHJhaW50KG5ldyBteFBvaW50KDEsIDEpLCB0cnVlKV07DQogICAgICBteFBvbHlsaW5lLnByb3RvdHlwZS5jb25zdHJhaW50cyA9IG51bGw7DQogICAgfSwNCg0KICAgIC8v6K6+572u6L+e57q/5qC35byPDQogICAgY2hhbmdlRGFzaGVkICh2YWx1ZSkgew0KICAgICAgdmFyIGNlbGwgPSB0aGlzLmdyYXBoLmdldFNlbGVjdGlvbkNlbGxzKCk7DQogICAgICB0aGlzLmdyYXBoLnNldENlbGxTdHlsZXMobXhDb25zdGFudHMuU1RZTEVfREFTSEVELCB2YWx1ZSwgWy4uLmNlbGxdKTsNCiAgICAgIC8vIHRoaXMuZ3JhcGgucmVmcmVzaChjZWxsKQ0KICAgIH0sDQoNCiAgICAvL+iuvue9rue6v+adoeminOiJsuagt+W8jw0KICAgIGNoYW5nZVN0cm9rZUNvbG9yICh2YWx1ZSkgew0KICAgICAgdmFyIGNlbGwgPSB0aGlzLmdyYXBoLmdldFNlbGVjdGlvbkNlbGxzKCk7DQogICAgICB0aGlzLmdyYXBoLnNldENlbGxTdHlsZXMobXhDb25zdGFudHMuU1RZTEVfU1RST0tFQ09MT1IsIHZhbHVlLCBbLi4uY2VsbF0pOw0KICAgICAgLy8gdGhpcy5ncmFwaC5yZWZyZXNoKGNlbGwpDQogICAgfSwNCg0KICAgIC8v6K6+572u57q/5p2h5a695bqmDQogICAgY2hhbmdlU3Ryb2tlV2lkdGggKHZhbHVlKSB7DQogICAgICB2YXIgY2VsbCA9IHRoaXMuZ3JhcGguZ2V0U2VsZWN0aW9uQ2VsbHMoKTsNCiAgICAgIHRoaXMuZ3JhcGguc2V0Q2VsbFN0eWxlcyhteENvbnN0YW50cy5TVFlMRV9TVFJPS0VXSURUSCwgdmFsdWUsIFsuLi5jZWxsXSk7DQogICAgICAvLyB0aGlzLmdyYXBoLnJlZnJlc2goY2VsbCkNCiAgICB9LA0KDQogICAgLy/orr7nva7lrZfkvZPlpKflsI8NCiAgICBjaGFuZ2VGb250U2l6ZSAodmFsdWUpIHsNCiAgICAgIHZhciBjZWxsID0gdGhpcy5ncmFwaC5nZXRTZWxlY3Rpb25DZWxscygpOw0KICAgICAgdGhpcy5ncmFwaC5zZXRDZWxsU3R5bGVzKG14Q29uc3RhbnRzLlNUWUxFX0ZPTlRTSVpFLCB2YWx1ZSwgWy4uLmNlbGxdKTsNCiAgICAgIC8vIHRoaXMuZ3JhcGgucmVmcmVzaChjZWxsKQ0KICAgIH0sDQoNCiAgICAvL+iuvue9ruWtl+S9k+minOiJsg0KICAgIGNoYW5nZUZvbnRDb2xvciAodmFsdWUpIHsNCiAgICAgIHZhciBjZWxsID0gdGhpcy5ncmFwaC5nZXRTZWxlY3Rpb25DZWxscygpOw0KICAgICAgdGhpcy5ncmFwaC5zZXRDZWxsU3R5bGVzKG14Q29uc3RhbnRzLlNUWUxFX0ZPTlRDT0xPUiwgdmFsdWUsIFsuLi5jZWxsXSk7DQogICAgICAvLyB0aGlzLmdyYXBoLnJlZnJlc2goY2VsbCkNCiAgICB9LA0KDQogICAgLy/orr7nva7nur/mnaHor7TmmI7nmoTog4zmma/popzoibINCiAgICBjaGFuZ2VMYWJlbEJhY2tncm91bmRDb2xvciAodmFsdWUpIHsNCiAgICAgIHZhciBjZWxsID0gdGhpcy5ncmFwaC5nZXRTZWxlY3Rpb25DZWxscygpOw0KICAgICAgdGhpcy5ncmFwaC5zZXRDZWxsU3R5bGVzKG14Q29uc3RhbnRzLlNUWUxFX0xBQkVMX0JBQ0tHUk9VTkRDT0xPUiwgdmFsdWUsIFsuLi5jZWxsXSk7DQogICAgICAvLyB0aGlzLmdyYXBoLnJlZnJlc2goY2VsbCkNCiAgICB9LA0KDQogICAgY2hhbmdlRmlsbENvbG9yICh2YWx1ZSkgew0KICAgICAgdmFyIGNlbGwgPSB0aGlzLmdyYXBoLmdldFNlbGVjdGlvbkNlbGxzKCk7DQogICAgICB0aGlzLmdyYXBoLnNldENlbGxTdHlsZXMobXhDb25zdGFudHMuU1RZTEVfRklMTENPTE9SLCB2YWx1ZSwgWy4uLmNlbGxdKTsNCiAgICB9LA0KDQogICAgY2hhbmdlU2hhZG93ICh2YWx1ZSkgew0KICAgICAgdmFyIGNlbGwgPSB0aGlzLmdyYXBoLmdldFNlbGVjdGlvbkNlbGxzKCk7DQogICAgICB0aGlzLmdyYXBoLnNldENlbGxTdHlsZXMobXhDb25zdGFudHMuU1RZTEVfU0hBRE9XLCArKHZhbHVlKSwgWy4uLmNlbGxdKTsNCiAgICB9LA0KDQogICAgY2hhbmdlRm9udFN0eWxlICh2YWx1ZSkgew0KICAgICAgdmFyIGNlbGwgPSB0aGlzLmdyYXBoLmdldFNlbGVjdGlvbkNlbGxzKCk7DQogICAgICB0aGlzLmdyYXBoLnNldENlbGxTdHlsZXMobXhDb25zdGFudHMuU1RZTEVfRk9OVFNUWUxFLCB2YWx1ZSwgWy4uLmNlbGxdKTsNCiAgICB9LA0KDQogICAgY2hhbmdlTm9kZWltYWdlICh2YWx1ZSkgew0KICAgICAgdmFyIGNlbGwgPSB0aGlzLmdyYXBoLmdldFNlbGVjdGlvbkNlbGxzKCk7DQogICAgICB0aGlzLmdyYXBoLnNldENlbGxTdHlsZXMobXhDb25zdGFudHMuU1RZTEVfSU1BR0UsIHZhbHVlLCBbLi4uY2VsbF0pOw0KICAgIH0sDQoNCiAgICAvLyDliKDpmaToioLngrkNCiAgICBkZWxldGVOb2RlICgpIHsNCiAgICAgIHZhciBjZWxscyA9IHRoaXMuZ3JhcGguZ2V0U2VsZWN0aW9uQ2VsbHMoKTsNCiAgICAgIHRoaXMuZ3JhcGgucmVtb3ZlQ2VsbHMoWy4uLmNlbGxzXSk7DQogICAgfSwNCg0KICAgIC8vIOS/ruaUuei/nue6v+agt+W8jw0KICAgIGVkZ2VDaGFuZ2UgKHZhbHVlKSB7DQogICAgICB0cnkgew0KICAgICAgICB2YXIgY2VsbCA9IHRoaXMuZ3JhcGguZ2V0U2VsZWN0aW9uQ2VsbHMoKTsNCiAgICAgICAgdGhpcy5ncmFwaC5zZXRDZWxsU3R5bGVzKCdlZGdlU3R5bGUnLCB2YWx1ZSwgWy4uLmNlbGxdKTsNCiAgICAgICAgbGV0IHN0eWxlID0gY2VsbFswXS5zdHlsZTsNCiAgICAgICAgbGV0IHZhbFN0ciA9IGNlbGxbMF0udmFsdWU7DQogICAgICAgIHRoaXMuZ3JhcGgucmVtb3ZlQ2VsbHMoY2VsbCk7DQogICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmdyYXBoLmdldERlZmF1bHRQYXJlbnQoKTsNCiAgICAgICAgbGV0IHYxID0gJyc7DQogICAgICAgIGxldCB2MiA9ICcnOw0KICAgICAgICAvLyDojrflj5ZJROWNleWFgw0KICAgICAgICBwYXJlbnRbJ2NoaWxkcmVuJ10uZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICBpdGVtWydpZCddID09PSBjZWxsWzBdLnNvdXJjZS5pZCA/IHYxID0gaXRlbSA6IGZhbHNlOw0KICAgICAgICAgIGl0ZW1bJ2lkJ10gPT09IGNlbGxbMF0udGFyZ2V0LmlkID8gdjIgPSBpdGVtIDogZmFsc2U7DQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLmdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTsNCiAgICAgICAgdGhpcy5ncmFwaC5pbnNlcnRFZGdlKHBhcmVudCwgbnVsbCwgdmFsU3RyLCB2MSwgdjIsIHN0eWxlKTsNCiAgICAgICAgdGhpcy5ncmFwaC5nZXRNb2RlbCgpLmVuZFVwZGF0ZSgpOw0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ1N1Y2NlZWRlZCBpbiBzd2l0Y2hpbmcgdGhlIGNvbm5lY3Rpb24gc3R5bGUnKTsNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ0ZhaWxlZCB0byBzd2l0Y2ggdGhlIGNvbm5lY3Rpb24gc3R5bGUnKTsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyDkv67mlLnoioLngrnmlofmnKzlhoXlrrkNCiAgICB0ZXh0VmFsdWVDaGFuZ2UgKHZhbHVlKSB7DQogICAgICB2YXIgY2VsbCA9IHRoaXMuZ3JhcGguZ2V0U2VsZWN0aW9uQ2VsbHMoKTsNCiAgICAgIGNvbnNvbGUubG9nKHZhbHVlLCAnTm9kZSB0ZXh0IG5ldyBjb250ZW50JywgdGhpcy5ncmFwaCk7DQogICAgICB0aGlzLmdyYXBoLmNlbGxMYWJlbENoYW5nZWQoY2VsbFswXSwgdmFsdWUpDQogICAgfSwNCiAgICBjaGFuZ2VDb25maWdPcmRlciAodmFsKSB7DQogICAgICAvLyDojrflj5blvZPliY3nmoRub3JtYWxUeXBl5YWD57SgLOW5tuabtOaWsOS7lueahHRpdGxlDQogICAgICB0aGlzLmN1cnJlbnROb3JtYWxUeXBlLnRpdGxlID0gdmFsLm5ld0NvbmZpZ09yZGVyOw0KICAgICAgLy8g5L+u5pS55oyH5a6aY2VsbOeahOiDjOaZr+WbvueJhw0KICAgICAgdGhpcy5ncmFwaC5zZXRDZWxsU3R5bGVzKG14Q29uc3RhbnRzLlNUWUxFX0lNQUdFLCBgLi9pbWFnZXMvb3JkZXIvdW5zZWxlY3QtJHt2YWwubmV3Q29uZmlnT3JkZXJ9LnBuZ2AsIFt0aGlzLmN1cnJlbnROb3JtYWxUeXBlXSk7DQogICAgICB0aGlzLmdyYXBoLnJlZnJlc2godGhpcy5jdXJyZW50Tm9ybWFsVHlwZSk7DQogICAgfSwNCg0KICAgIC8v5aSN5Yi2DQogICAgY29weSAoKSB7DQogICAgICBsZXQgc2VsZWN0aW9uQ2VsbHMgPSB0aGlzLmdyYXBoLmdldFNlbGVjdGlvbkNlbGxzKCk7DQogICAgICBteENsaXBib2FyZC5jb3B5KHRoaXMuZ3JhcGgsIHNlbGVjdGlvbkNlbGxzKTsNCiAgICB9LA0KICAgIC8v57KY6LS0DQogICAgcGFzdGUgKCkgew0KICAgICAgbXhDbGlwYm9hcmQucGFzdGUodGhpcy5ncmFwaCk7DQogICAgfSwNCiAgICAvL+WJquWIhw0KICAgIGN1dCAoKSB7DQogICAgICB2YXIgY2VsbHMgPSBbXTsNCiAgICAgIGNlbGxzID0gdGhpcy5ncmFwaC5nZXRTZWxlY3Rpb25DZWxscygpOw0KICAgICAgbXhDbGlwYm9hcmQuY3V0KHRoaXMuZ3JhcGgsIGNlbGxzKTsNCiAgICB9LA0KICAgIC8vIOWJjei/mw0KICAgIGdvRm9yd2FyZCAoKSB7DQogICAgICB0aGlzLnVuZG9NbmcucmVkbygpOw0KICAgIH0sDQoNCiAgICAvLyDmkqTpgIANCiAgICBnb0JhY2sgKCkgew0KICAgICAgdGhpcy51bmRvTW5nLnVuZG8oKTsNCiAgICB9LA0KDQogICAgLy8g5pS+5aSnDQogICAgem9vbUluICgpIHsNCiAgICAgIHRoaXMuZ3JhcGguem9vbUluKCk7DQogICAgfSwNCg0KICAgIC8vIOe8qeWwjw0KICAgIHpvb21PdXQgKCkgew0KICAgICAgdGhpcy5ncmFwaC56b29tT3V0KCk7DQogICAgfSwNCg0KICAgIC8vIOetieavlOS+i+e8qeaUvg0KICAgIGF1dG9TaXplICgpIHsNCiAgICAgIC8vIOaWueazleS4gA0KICAgICAgLy8gdGhpcy5lZGl0b3IuZXhlY3V0ZSgnYWN0dWFsU2l6ZScpOw0KICAgICAgLy/mlrnms5XkuozvvJoNCiAgICAgIHRoaXMuZ3JhcGguem9vbUFjdHVhbCgpOw0KICAgICAgdGhpcy5ncmFwaC5maXQoKTsvL+iHqumAguW6lA0KICAgICAgdGhpcy5ncmFwaC5jZW50ZXIoKTsvL+WwhueUu+W4g+aUvuWIsOWuueWZqOS4remXtA0KICAgIH0sDQoNCiAgICAvLyDnlJ/miJDlm77niYcNCiAgICBzaG93SW1hZ2UgKCkgew0KICAgICAgdGhpcy5lZGl0b3IuZXhlY3V0ZSgnc2hvdycpOy8v55u05o6l6aG16Z2i6Lez6L2sLOW5tuS7pXN2Z+a1geeoi+Wbvg0KICAgICAgLy8g5LiL6L29c3Zn5rWB56iL5Zu+DQogICAgICBjb25zb2xlLmxvZygndGhpcy5ndGFwaCcsIHRoaXMuZ3JhcGgpDQogICAgICBjb25zdCBzdmcgPSB0aGlzLmV4cG9ydE1vZGVsU3ZnKCk7DQogICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3N2Z10sIHsgdHlwZTogJ2ltYWdlL3N2Zyt4bWwnIH0pOw0KICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsNCiAgICAgIGxldCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOw0KICAgICAgbGluay5ocmVmID0gdXJsOw0KICAgICAgbGluay5kb3dubG9hZCA9ICdtb2RlbC5zdmcnOw0KICAgICAgbGluay5jbGljaygpOw0KICAgIH0sDQoNCiAgICBleHBvcnRNb2RlbFN2ZyAoKSB7DQogICAgICBsZXQgc2NhbGUgPSB0aGlzLmdyYXBoLnZpZXcuc2NhbGU7DQogICAgICBsZXQgYm91bmRzID0gdGhpcy5ncmFwaC5nZXRHcmFwaEJvdW5kcygpOw0KICAgICAgbGV0IGJvcmRlciA9IDEwOw0KDQogICAgICAvLyBQcmVwYXJlcyBTVkcgZG9jdW1lbnQgdGhhdCBob2xkcyB0aGUgb3V0cHV0DQogICAgICBsZXQgc3ZnRG9jID0gbXhVdGlscy5jcmVhdGVYbWxEb2N1bWVudCgpOw0KICAgICAgbGV0IHJvb3QgPSAoc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyAhPSBudWxsKSA/DQogICAgICAgIHN2Z0RvYy5jcmVhdGVFbGVtZW50TlMobXhDb25zdGFudHMuTlNfU1ZHLCAnc3ZnJykgOiBzdmdEb2MuY3JlYXRlRWxlbWVudCgnc3ZnJyk7DQoNCiAgICAgIGlmIChyb290LnN0eWxlICE9IG51bGwpIHsNCiAgICAgICAgcm9vdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI0ZGRkZGRic7DQogICAgICB9IGVsc2Ugew0KICAgICAgICByb290LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnYmFja2dyb3VuZC1jb2xvcjojRkZGRkZGJyk7DQogICAgICB9DQoNCiAgICAgIGlmIChzdmdEb2MuY3JlYXRlRWxlbWVudE5TID09IG51bGwpIHsNCiAgICAgICAgcm9vdC5zZXRBdHRyaWJ1dGUoJ3htbG5zJywgbXhDb25zdGFudHMuTlNfU1ZHKTsNCiAgICAgIH0NCiAgICAgIGxldCB3aWR0aCA9IE1hdGguY2VpbChib3VuZHMud2lkdGggKiBzY2FsZSAvIHNjYWxlICsgMiAqIGJvcmRlcik7DQogICAgICBsZXQgaGVpZ2h0ID0gTWF0aC5jZWlsKGJvdW5kcy5oZWlnaHQgKiBzY2FsZSAvIHNjYWxlICsgMiAqIGJvcmRlcik7DQogICAgICByb290LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc3ZnLWNvbnRhaW5lcicpOw0KICAgICAgcm9vdC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgd2lkdGggKyAncHgnKTsNCiAgICAgIHJvb3Quc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBoZWlnaHQgKyAncHgnKTsNCiAgICAgIHJvb3Quc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgIjAgMCAiICsgd2lkdGggKyAiICIgKyBoZWlnaHQpOw0KICAgICAgcm9vdC5zZXRBdHRyaWJ1dGUoJ3htbG5zOnhsaW5rJywgbXhDb25zdGFudHMuTlNfWExJTkspOw0KICAgICAgcm9vdC5zZXRBdHRyaWJ1dGUoJ3ZlcnNpb24nLCAnMS4xJyk7DQoNCiAgICAgIC8vIEFkZHMgZ3JvdXAgZm9yIGFudGktYWxpYXNpbmcgdmlhIHRyYW5zZm9ybQ0KICAgICAgbGV0IGdyb3VwID0gKHN2Z0RvYy5jcmVhdGVFbGVtZW50TlMgIT0gbnVsbCkgPw0KICAgICAgICBzdmdEb2MuY3JlYXRlRWxlbWVudE5TKG14Q29uc3RhbnRzLk5TX1NWRywgJ2cnKSA6IHN2Z0RvYy5jcmVhdGVFbGVtZW50KCdnJyk7DQogICAgICBncm91cC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMC41LDAuNSknKTsNCiAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoZ3JvdXApOw0KICAgICAgc3ZnRG9jLmFwcGVuZENoaWxkKHJvb3QpOw0KDQogICAgICAvLyBSZW5kZXJzIGdyYXBoLiBPZmZzZXQgd2lsbCBiZSBtdWx0aXBsaWVkIHdpdGggc3RhdGUncyBzY2FsZSB3aGVuIHBhaW50aW5nIHN0YXRlLg0KICAgICAgbGV0IHN2Z0NhbnZhcyA9IG5ldyBteFN2Z0NhbnZhczJEKGdyb3VwKTsNCiAgICAgIHN2Z0NhbnZhcy50cmFuc2xhdGUoTWF0aC5mbG9vcihib3JkZXIgLyBzY2FsZSAtIGJvdW5kcy54KSwgTWF0aC5mbG9vcihib3JkZXIgLyBzY2FsZSAtIGJvdW5kcy55KSk7DQogICAgICBzdmdDYW52YXMuc2NhbGUoc2NhbGUpOw0KDQogICAgICBsZXQgaW1nRXhwb3J0ID0gbmV3IG14SW1hZ2VFeHBvcnQoKTsNCiAgICAgIGltZ0V4cG9ydC5kcmF3U3RhdGUodGhpcy5ncmFwaC5nZXRWaWV3KCkuZ2V0U3RhdGUodGhpcy5ncmFwaC5tb2RlbC5yb290KSwgc3ZnQ2FudmFzKTsNCg0KICAgICAgLy9sZXQgeG1sID0gZW5jb2RlVVJJQ29tcG9uZW50KG14VXRpbHMuZ2V0WG1sKHJvb3QpKTsgLy9ubyBuZWVkDQogICAgICBsZXQgeG1sID0gbXhVdGlscy5nZXRYbWwocm9vdCk7DQogICAgICByZXR1cm4geG1sOw0KDQogICAgfSwNCiAgICBlbkdyb3VwICgpIHsNCiAgICAgIHRoaXMuZWRpdG9yLmdyYXBoLnNldFNlbGVjdGlvbkNlbGwodGhpcy5lZGl0b3IuZ3JvdXBDZWxscygpKTsNCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygnQ29tYmluYXRpb24gc3VjY2VzcycpOw0KICAgICAgLy8gdGhpcy5lZGl0b3IuZ3JvdXBDZWxscyhudWxsLCAwLCB0aGlzLmdyYXBoLmdldFNlbGVjdGlvbkNlbGxzKCkpOw0KICAgIH0sDQoNCiAgICAvLyDlvIDlp4vlr7zlhaV4bWzmlofku7YNCiAgICBpblB1dFhtbCAoKSB7DQogICAgICB0aGlzLmlzT3V0cHV0WG1sID0gZmFsc2U7DQogICAgICB0aGlzLnVwbG9hZERhdGFWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIHRoaXMuZ3JhcGhYbWwgPSAnJzsNCiAgICB9LA0KDQogICAgLy8g5a+85YWleG1s5paH5Lu25ZCO5pu05paw6KeG5Zu+DQogICAgdXBsb2FkUGFpbnRGbG93IChuZXd2YWx1ZSkgew0KICAgICAgdGhpcy5ncmFwaC5zZWxlY3RBbGwoKTsNCiAgICAgIHRoaXMuZ3JhcGgucmVtb3ZlQ2VsbHModGhpcy5ncmFwaC5nZXRTZWxlY3Rpb25DZWxscygpKTsNCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICB0aGlzLmRlY29kZShuZXd2YWx1ZSwgdGhpcy5ncmFwaCk7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygnUmVuZGVyIHN1Y2Nlc3NmdWxseScpOw0KICAgICAgfSwgMTAwMCk7DQogICAgfSwNCg0KICAgIGNyZWF0ZVhtbERvbSAoc3RyKSB7DQogICAgICBpZiAoZG9jdW1lbnQuYWxsKSB7IC8v5Yik5pat5rWP6KeI5Zmo5piv5ZCm5pivSUUNCiAgICAgICAgdmFyIHhtbERvbSA9IG5ldyBBY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MRE9NJyk7DQogICAgICAgIHhtbERvbS5sb2FkWE1MKHN0cik7DQogICAgICAgIHJldHVybiB4bWxEb207DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gKG5ldyBET01QYXJzZXIoKSkucGFyc2VGcm9tU3RyaW5nKHN0ciwgJ3RleHQveG1sJyk7DQogICAgICB9DQogICAgfSwNCg0KICAgIC8vIOa4suafk3htbOa1geeoi+Wbvg0KICAgIGRlY29kZSAoZ3JhcGhYbWwsIGdyYXBoKSB7DQogICAgICB0aGlzLmdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTsNCiAgICAgIHRyeSB7DQogICAgICAgIC8vIOa4suafk+a1geeoi+WbviDmlrnms5XkuIA6DQogICAgICAgIC8vIGNvbnN0IHhtbERvY3VtZW50ID0gbXhVdGlscy5wYXJzZVhtbChncmFwaFhtbCkNCiAgICAgICAgLy8gY29uc3QgZGVjb2RlciA9IG5ldyBteENvZGVjKHhtbERvY3VtZW50KQ0KICAgICAgICAvLyBkZWNvZGVyLmRlY29kZSh4bWxEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGdyYXBoLmdldE1vZGVsKCkpDQogICAgICAgIC8vIOa4suafk+a1geeoi+WbviDmlrnms5Xkuow6DQogICAgICAgIHZhciB4bWxEb2MgPSB0aGlzLmNyZWF0ZVhtbERvbShncmFwaFhtbCk7DQogICAgICAgIHZhciBub2RlID0geG1sRG9jLmRvY3VtZW50RWxlbWVudDsNCiAgICAgICAgdmFyIGRlYyA9IG5ldyBteENvZGVjKG5vZGUub3duZXJEb2N1bWVudCk7DQogICAgICAgIGRlYy5kZWNvZGUobm9kZSwgZ3JhcGguZ2V0TW9kZWwoKSk7DQogICAgICB9IGZpbmFsbHkgew0KICAgICAgICB0aGlzLmdyYXBoLmdldE1vZGVsKCkuZW5kVXBkYXRlKCk7DQogICAgICAgIC8vIOa4suafk+WujOaIkOiwg+aVtOS9jee9rg0KICAgICAgICB0aGlzLmF1dG9TaXplKCkNCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy8g5a+85Ye6eG1s5paH5Lu2DQogICAgb3V0UHV0WG1sICgpIHsNCiAgICAgIHRoaXMuaXNPdXRwdXRYbWwgPSB0cnVlOw0KICAgICAgdGhpcy51cGxvYWREYXRhVmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLmdyYXBoWG1sID0gdGhpcy5lbmNvZGUodGhpcy5ncmFwaCk7DQogICAgfSwNCg0KICAgIC8vIOWvvOWHunhtbOaVsOaNrg0KICAgIGVuY29kZSAoZ3JhcGgpIHsNCiAgICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgbXhDb2RlYygpOw0KICAgICAgY29uc3QgcmVzdWx0ID0gZW5jb2Rlci5lbmNvZGUoZ3JhcGguZ2V0TW9kZWwoKSk7DQogICAgICByZXR1cm4gbXhVdGlscy5nZXRQcmV0dHlYbWwocmVzdWx0KTsNCiAgICB9LA0KICAgIC8v5re75Yqg566t5aS057uE5Ye95pWwDQogICAgYWRkU3RlbmNpbFBhbGV0dGUgKHRpdGxlLCBuYW1lLCBmaWxlKSB7DQogICAgICBsZXQgcmVxID0gbXhVdGlscy5sb2FkKGZpbGUpOw0KICAgICAgbGV0IHJvb3QgPSByZXEuZ2V0RG9jdW1lbnRFbGVtZW50KCk7DQogICAgICBsZXQgc2hhcGUgPSByb290LmZpcnN0Q2hpbGQ7DQogICAgICB0aGlzLiRzZXQodGhpcy5wYWxldHRlcywgbmFtZSwgeyB0aXRsZSwgbmFtZSwgc2hhcGVzOiBbXSB9KTsNCiAgICAgIHdoaWxlIChzaGFwZSAhPSBudWxsKSB7DQogICAgICAgIGlmIChzaGFwZS5ub2RlVHlwZSA9PT0gbXhDb25zdGFudHMuTk9ERVRZUEVfRUxFTUVOVCkgew0KICAgICAgICAgIGNvbnN0IHNoYXBlTmFtZSA9IHNoYXBlLmdldEF0dHJpYnV0ZSgnbmFtZScpOw0KICAgICAgICAgIGNvbnN0IGggPSBzaGFwZS5nZXRBdHRyaWJ1dGUoJ2gnKTsNCiAgICAgICAgICAvLyBzaGFwZS5xdWVyeVNlbGVjdG9yKCdwYXRoJykuc2V0QXR0cmlidXRlKCdmaWxsJywgJ3RyYW5zcGFyZW50JykNCiAgICAgICAgICBjb25zdCB3ID0gc2hhcGUuZ2V0QXR0cmlidXRlKCd3Jyk7DQogICAgICAgICAgbXhTdGVuY2lsUmVnaXN0cnkuYWRkU3RlbmNpbChzaGFwZU5hbWUsIG5ldyBteFN0ZW5jaWwoc2hhcGUpKTsNCiAgICAgICAgICB0aGlzLnBhbGV0dGVzW25hbWVdWydzaGFwZXMnXS5wdXNoKHsNCiAgICAgICAgICAgIG5hbWU6IHNoYXBlLmdldEF0dHJpYnV0ZSgnbmFtZScpLA0KICAgICAgICAgICAgd2lkdGg6IHcgLyAyLA0KICAgICAgICAgICAgaGVpZ2h0OiBoIC8gMiwNCiAgICAgICAgICAgIGZpbGw6ICd0cmFuc3BhcmVudCcsDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgc2hhcGUgPSBzaGFwZS5uZXh0U2libGluZzsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy8g5Yid5aeL5YyW566t5aS06IqC54K557uE55qE5bel5YW35qCPDQogICAgaW5pdFN0ZW5jaWxUb29sQmFyICgpIHsNCiAgICAgIHZhciBzdGVuY2lsRG9tQXJyYXkgPSB0aGlzLiRyZWZzLnN0ZW5jaWxEcmFnSXRlbTsNCiAgICAgIGlmICghKHN0ZW5jaWxEb21BcnJheSBpbnN0YW5jZW9mIEFycmF5KSB8fCBzdGVuY2lsRG9tQXJyYXkubGVuZ3RoIDw9IDAgfHwgKHRoaXMuZ3JhcGggPT0gbnVsbCB8fCB0aGlzLmdyYXBoID09IHVuZGVmaW5lZCkpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgc3RlbmNpbERvbUFycmF5LmZvckVhY2goZG9tID0+IHsNCiAgICAgICAgY29uc3Qgc2hhcGVJbmRleCA9IGRvbS5nZXRBdHRyaWJ1dGUoJ3NoYXBlSW5kZXgnKTsNCiAgICAgICAgY29uc3QgcGFsZXR0ZUluZGV4ID0gZG9tLmdldEF0dHJpYnV0ZSgncGFsZXR0ZUluZGV4Jyk7DQogICAgICAgIGNvbnN0IHNoYXBlSXRlbSA9IE9iamVjdC52YWx1ZXModGhpcy5wYWxldHRlcylbcGFsZXR0ZUluZGV4XVsnc2hhcGVzJ11bc2hhcGVJbmRleF07DQogICAgICAgIGNvbnN0IHNoYXBlV2lkdGggPSBzaGFwZUl0ZW1bJ3dpZHRoJ107DQogICAgICAgIGNvbnN0IHNoYXBlSGVpZ2h0ID0gc2hhcGVJdGVtWydoZWlnaHQnXTsNCiAgICAgICAgY29uc3Qgc3RlbmNpbERyYWdIYW5kbGVyID0gKGdyYXBoLCBldnQsIGNlbGwsIHgsIHkpID0+IHsNCiAgICAgICAgICB0aGlzLmluc3RhbmNlR3JhcGgodGhpcy5ncmFwaCwgc2hhcGVJdGVtLCB4LCB5LCBzaGFwZVdpZHRoLCBzaGFwZUhlaWdodCwgY2VsbCk7DQogICAgICAgIH07DQogICAgICAgIHZhciBjcmVhdGVEcmFnUHJldmlldyA9ICgpID0+IHsNCiAgICAgICAgICAvL+iuvue9rum8oOagh+aLluaLveeureWktOiKgueCueaXtueahOagt+W8jw0KICAgICAgICAgIGNvbnN0IGVsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgIGVsdC5zdHlsZS5ib3JkZXIgPSAnMnB4IGRvdHRlZCBibGFjayc7DQogICAgICAgICAgZWx0LnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJzsNCiAgICAgICAgICBlbHQuc3R5bGUud2lkdGggPSBgJHtzaGFwZVdpZHRofXB4YDsNCiAgICAgICAgICBlbHQuc3R5bGUuaGVpZ2h0ID0gYCR7c2hhcGVIZWlnaHR9cHhgOw0KICAgICAgICAgIGVsdC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKC01MCUsLTUwJSknOw0KICAgICAgICAgIHJldHVybiBlbHQ7DQogICAgICAgIH07DQogICAgICAgIGRvbS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVRodW1iKHNoYXBlSXRlbSwgc2hhcGVXaWR0aCwgc2hhcGVIZWlnaHQpKTsNCiAgICAgICAgbXhVdGlscy5tYWtlRHJhZ2dhYmxlKGRvbSwgdGhpcy5ncmFwaCwgc3RlbmNpbERyYWdIYW5kbGVyLCBjcmVhdGVEcmFnUHJldmlldygpLCAwLCAwLCBmYWxzZSwgdHJ1ZSk7DQogICAgICB9KTsNCiAgICB9LA0KDQogICAgLy8g5paw5aKe566t5aS06IqC54K5DQogICAgaW5zdGFuY2VHcmFwaCAoZ3JhcGgsIHNoYXBlSXRlbSwgeCwgeSwgd2lkdGgsIGhlaWdodCwgZHJvcENlbGwpIHsNCiAgICAgIGNvbnN0IGRyb3AgPSAhUi5pc05pbChkcm9wQ2VsbCk7DQogICAgICAvLyBkcm9wICYmIHRoaXMuJG1lc3NhZ2UuaW5mbyhg566t5aS06IqC54K55YWlJHtkcm9wQ2VsbC50aXRsZX1gKTsNCiAgICAgIGNvbnN0IHJlYWxYID0gZHJvcCA/IHggLSBkcm9wQ2VsbC5nZW9tZXRyeS54IDogeDsNCiAgICAgIGNvbnN0IHJlYWxZID0gZHJvcCA/IHkgLSBkcm9wQ2VsbC5nZW9tZXRyeS55IDogeTsNCiAgICAgIGNvbnN0IHBhcmVudCA9IGRyb3AgPyBkcm9wQ2VsbCA6IGdyYXBoLmdldERlZmF1bHRQYXJlbnQoKTsNCiAgICAgIGdyYXBoLmdldE1vZGVsKCkuYmVnaW5VcGRhdGUoKTsNCiAgICAgIHRyeSB7DQogICAgICAgIGxldCBjZWxsID0gZ3JhcGguaW5zZXJ0VmVydGV4KHBhcmVudCwgbnVsbCwgbnVsbCwgcmVhbFggLSAod2lkdGggLyAyKSwgcmVhbFkgLSAoaGVpZ2h0IC8gMiksIHdpZHRoLCBoZWlnaHQsIGBzaGFwZT0ke3NoYXBlSXRlbVsnbmFtZSddfTt3aGl0ZVNwYWNlPXdyYXA7d29yZC1icmVhaz1icmVhay1hbGw7YCk7DQogICAgICAgIGNlbGxbJ2lzR3JvdXAnXSA9IGZhbHNlDQogICAgICAgIGNlbGwuY3VzdG9tZXIgPSB0cnVlOw0KICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgZ3JhcGguZ2V0TW9kZWwoKS5lbmRVcGRhdGUoKTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy8g5ouW5ou957uT5p2f5pe25paw5aKe55qE566t5aS06IqC54K5DQogICAgY3JlYXRlVGh1bWIgKGl0ZW0sIHdpZHRoLCBoZWlnaHQpIHsNCiAgICAgIGNvbnN0IHRtcEdyYXBoID0gbmV3IG14R3JhcGgoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpOw0KICAgICAgY29uc3QgdGh1bWJCb3JkZXIgPSAyOw0KICAgICAgdG1wR3JhcGgubGFiZWxzVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgdG1wR3JhcGgudmlldy5zY2FsZUFuZFRyYW5zbGF0ZSgxLCAwLCAwKTsNCiAgICAgIHRoaXMuaW5zdGFuY2VHcmFwaCh0bXBHcmFwaCwgaXRlbSwgMCwgMCwgd2lkdGgsIGhlaWdodCk7DQogICAgICBjb25zdCBib3VuZHMgPSB0bXBHcmFwaC5nZXRHcmFwaEJvdW5kcygpOw0KICAgICAgY29uc3QgcyA9IE1hdGguZmxvb3IoTWF0aC5taW4oKHdpZHRoIC0gMiAqIHRodW1iQm9yZGVyKSAvIGJvdW5kcy53aWR0aCwgKGhlaWdodCAtIDIgKiB0aHVtYkJvcmRlcikgLyBib3VuZHMuaGVpZ2h0KSAqIDEwMCkgLyAxMDA7DQoNCiAgICAgIHRtcEdyYXBoLnZpZXcuc2NhbGVBbmRUcmFuc2xhdGUocywgTWF0aC5mbG9vcigod2lkdGggLSBib3VuZHMud2lkdGggKiBzKSAvIDIgLyBzIC0gYm91bmRzLngpLCBNYXRoLmZsb29yKChoZWlnaHQgLSBib3VuZHMuaGVpZ2h0ICogcykgLyAyIC8gcyAtIGJvdW5kcy55KSk7DQoNCiAgICAgIGNvbnN0IG5vZGUgPSB0bXBHcmFwaC52aWV3LmdldENhbnZhcygpLm93bmVyU1ZHRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7DQoNCiAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnOw0KICAgICAgbm9kZS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOw0KICAgICAgbm9kZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7DQogICAgICBub2RlLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgOw0KICAgICAgbm9kZS5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgOw0KICAgICAgbm9kZS5zdHlsZS5sZWZ0ID0gYCR7dGh1bWJCb3JkZXJ9cHhgOw0KICAgICAgbm9kZS5zdHlsZS50b3AgPSBgJHt0aHVtYkJvcmRlcn1weGA7DQogICAgICBub2RlLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJzsNCiAgICAgIHJldHVybiBub2RlOw0KICAgIH0sDQoNCiAgICAvLyDmt7vliqDluo/lj7flm77moIcNCiAgICBhZGRQb2ludCAoY2VsbCwgbnVtYmVyKSB7DQogICAgICBjb25zdCBub3JtYWxUeXBlVmVydGV4ID0gdGhpcy5ncmFwaC5pbnNlcnRWZXJ0ZXgoY2VsbCwgbnVsbCwgbnVsbCwNCiAgICAgICAgbnVsbCwgbnVsbCwgMzAsIDMwLA0KICAgICAgICBgcG9ydDtub3JtYWxUeXBlO29yZGVyUG9pbnQ9dHJ1ZTtmaWxsQ29sb3I9bm9uZTtpbWFnZT0uL2ltYWdlcy9vcmRlci91bnNlbGVjdC0ke251bWJlcn0ucG5nO3NwYWNpbmdMZWZ0PS00NXB4O3NwYWNpbmdCb3R0b209LTQ1cHhgKTsNCiAgICAgIC8vIOWbuuWumuW6j+WPt+Wbvuagh+eahOS9jee9ri7kuI3pmo/oioLngrnlj5jlpKfogIzmlLnlj5jkvY3nva4NCiAgICAgIC8vIG5vcm1hbFR5cGVWZXJ0ZXguZ2VvbWV0cnkub2Zmc2V0ID0gbmV3IG14UG9pbnQoNDUsIDQ1KTsNCiAgICAgIC8vIOW6j+WPt+Wbvuagh+aXoOazlei/nuaOpQ0KICAgICAgLy8gbm9ybWFsVHlwZVZlcnRleC5zZXRDb25uZWN0YWJsZShmYWxzZSk7DQogICAgICBub3JtYWxUeXBlVmVydGV4LmlkID0gKGNlbGwuaWQpLnNwbGl0KCctJylbMF0gKyBgLXVuc2VsZWN0LSR7bnVtYmVyfWA7DQogICAgICBub3JtYWxUeXBlVmVydGV4LnZhbHVlID0gbnVtYmVyOw0KICAgICAgbm9ybWFsVHlwZVZlcnRleC5nZW9tZXRyeS5yZWxhdGl2ZSA9IHRydWU7DQogICAgICAvLyDlsIbmlrDlop7nmoTlm77moIfpvKDmoIfmgqzmta7mjaLmiJDmiYvlir/nmoTlm77moYgNCiAgICAgIC8vIGNvbnN0IG9sZEdldEN1cnNvckZvckNlbGwgPSBteEdyYXBoLnByb3RvdHlwZS5nZXRDdXJzb3JGb3JDZWxsOw0KICAgICAgLy8gdGhpcy5ncmFwaC5nZXRDdXJzb3JGb3JDZWxsID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHsNCiAgICAgIC8vICAgY29uc3QgW2NlbGxdID0gYXJnczsNCiAgICAgIC8vICAgaWYgKGNlbGwuZWRnZSB8fCBjZWxsLnN0eWxlID09IHVuZGVmaW5lZCkgew0KICAgICAgLy8gICAgIHJldHVybjsNCiAgICAgIC8vICAgfQ0KICAgICAgLy8gICByZXR1cm4gY2VsbC5zdHlsZS5pbmNsdWRlcygnbm9ybWFsVHlwZScpID8NCiAgICAgIC8vICAgICAncG9pbnRlcicgOg0KICAgICAgLy8gICAgIG9sZEdldEN1cnNvckZvckNlbGwuYXBwbHkodGhpcywgYXJncyk7DQogICAgICAvLyB9Ow0KICAgIH0sDQoNCiAgICAvLyDliqDovb3moYjkvovmtYHnqIvlm74NCiAgICBsb2FkRmxvd0Nhc2UgKGluZGV4KSB7DQogICAgICB0aGlzLiRjb25maXJtKCdNYWtlIHN1cmUgeW91ciBjdXJyZW50IGZsb3djaGFydCBkYXRhIGlzIHNhdmVkIGxvY2FsbHkgPycsICdUaXBzJywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ0kgaGF2ZSBzYXZlZCcsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICd1bmxvYWQnLA0KICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgbGV0IGxvYWREYXRhID0gJyc7DQogICAgICAgIHN3aXRjaCAoaW5kZXgpIHsNCiAgICAgICAgICBjYXNlIDE6DQogICAgICAgICAgICBsb2FkRGF0YSA9IHhtbERhdGExOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAyOg0KICAgICAgICAgICAgbG9hZERhdGEgPSB4bWxEYXRhMjsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgMzoNCiAgICAgICAgICAgIGxvYWREYXRhID0geG1sRGF0YTM7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICBjb25zb2xlLmxvZygnbG9hZERhdGEnLCBsb2FkRGF0YSk7DQogICAgICAgIGxldCBuZXdYbWwgPSBteFV0aWxzLmxvYWQobG9hZERhdGEpLnJlcXVlc3QucmVzcG9uc2U7DQogICAgICAgIHRoaXMuZ3JhcGguc2VsZWN0QWxsKCk7DQogICAgICAgIHRoaXMuZ3JhcGgucmVtb3ZlQ2VsbHModGhpcy5ncmFwaC5nZXRTZWxlY3Rpb25DZWxscygpKTsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5kZWNvZGUobmV3WG1sLCB0aGlzLmdyYXBoKTsNCg0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yqg6L295rWB56iL5Zu+5qGI5L6L5oiQ5YqfJyk7DQogICAgICAgIH0sIDEwMDApOw0KICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWKoOi9vea1geeoi+WbvuahiOS+iycsDQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBoYW5kbGVTY3JvbGwgKGUpIHsNCiAgICAgIGlmIChlLndoZWVsRGVsdGEgPT09IDEyMCkgew0KICAgICAgICB0aGlzLmdyYXBoLnpvb21JbigpDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmdyYXBoLnpvb21PdXQoKQ0KICAgICAgfQ0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQgKCkgew0KICAgIC8vIOajgOa1i+a1j+iniOWZqOWFvOWuueaApw0KICAgIGlmICghbXhDbGllbnQuaXNCcm93c2VyU3VwcG9ydGVkKCkpIHsNCiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+W9k+WJjea1j+iniOWZqOS4jeaUr+aMgeaLk+aJkeWbvuWKn+iDve+8jOivt+abtOaNoua1j+iniOWZqOiuv+mXru+8jOW7uuiuruS9v+eUqENocm9tZea1j+iniOWZqOiuv+mXriEnKTsNCiAgICB9IGVsc2Ugew0KICAgICAgLy8gT3ZlcnJpZGRlbiB0byBkZWZpbmUgcGVyLXNoYXBlIGNvbm5lY3Rpb24gcG9pbnRzDQogICAgICBteEdyYXBoLnByb3RvdHlwZS5nZXRBbGxDb25uZWN0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbiAodGVybWluYWwpIHsNCiAgICAgICAgaWYgKHRlcm1pbmFsICE9IG51bGwgJiYgdGVybWluYWwuc2hhcGUgIT0gbnVsbCkgew0KICAgICAgICAgIGlmICh0ZXJtaW5hbC5zaGFwZS5zdGVuY2lsICE9IG51bGwpIHsNCiAgICAgICAgICAgIGlmICh0ZXJtaW5hbC5zaGFwZS5zdGVuY2lsLmNvbnN0cmFpbnRzICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIHRlcm1pbmFsLnNoYXBlLnN0ZW5jaWwuY29uc3RyYWludHM7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIGlmICh0ZXJtaW5hbC5zaGFwZS5jb25zdHJhaW50cyAhPSBudWxsKSB7DQogICAgICAgICAgICByZXR1cm4gdGVybWluYWwuc2hhcGUuY29uc3RyYWludHM7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBudWxsOw0KICAgICAgfTsNCiAgICAgIHRoaXMuY3JlYXRlR3JhcGgoKTsNCiAgICAgIHRoaXMuZXZlbnRDZW50ZXIoKTsNCiAgICAgIHRoaXMuY29uZmlnTW91c2VFdmVudCgpOw0KICAgICAgdGhpcy5jb25maWdNZW51KCk7DQogICAgICAvLyB0aGlzLmFkZFN0ZW5jaWxQYWxldHRlKCdBcnJvdyBzZXQnLCAnYXJyb3dzJywgcGF0aC5qb2luKCcuL3N0ZW5jaWwvYXJyb3dzLnhtbCcpKTsNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy5pbml0Q3VzdG9tVG9vbGJhcigpOw0KICAgICAgICB0aGlzLmluaXRHZW5lcmFsVG9vbCgpOw0KICAgICAgICB0aGlzLmluaXRTdGVuY2lsVG9vbEJhcigpOw0KICAgICAgICB0aGlzLm1ha2VUb29sYmFyRHJhZ2dhYmxlKCk7DQogICAgICAgIHRoaXMuY29uZmlnS2V5RXZlbnQoKTsNCiAgICAgIH0pOw0KICAgIH0NCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JhcGhDb250YWluZXInKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgdGhpcy5oYW5kbGVTY3JvbGwsIHRydWUpIC8vIOebkeWQrO+8iOe7keWumu+8iea7mui9rua7muWKqOS6i+S7tg0KICB9LA0KICBkZXN0cm95ZWQgKCkgew0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaENvbnRhaW5lcicpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCB0aGlzLmhhbmRsZVNjcm9sbCkgLy8gIOemu+W8gOmhtemdoua4hemZpO+8iOenu+mZpO+8iea7mui9rua7muWKqOS6i+S7tg0KICAgIHRoaXMuZ3JhcGguZGVzdHJveSgpOw0KICB9LA0KfQ0K"},{"version":3,"sources":["customToolbar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"customToolbar.vue","sourceRoot":"src/views/customToolbar","sourcesContent":["<template>\r\n  <div class=\"customToolbarContainer\">\r\n    <!-- /  -->\r\n    <div class=\"toolbarContainer\">\r\n      <div class=\"aside-button-group\">\r\n        <el-button-group style=\"margin: 10px 0\">\r\n          <el-tooltip\r\n            class=\"item\"\r\n            effect=\"dark\"\r\n            content=\"\"\r\n            placement=\"bottom\"\r\n          >\r\n            <el-button icon=\"el-icon-zoom-in\" @click=\"zoomIn\"></el-button>\r\n          </el-tooltip>\r\n          <el-tooltip\r\n            class=\"item\"\r\n            effect=\"dark\"\r\n            content=\"\"\r\n            placement=\"bottom\"\r\n          >\r\n            <el-button icon=\"el-icon-zoom-out\" @click=\"zoomOut\"></el-button>\r\n          </el-tooltip>\r\n          <el-tooltip\r\n            class=\"item\"\r\n            effect=\"dark\"\r\n            content=\"\"\r\n            placement=\"bottom\"\r\n          >\r\n            <el-button\r\n              @click=\"autoSize\"\r\n              icon=\"iconfont icon-expandalt-fill\"\r\n            ></el-button>\r\n          </el-tooltip>\r\n        </el-button-group>\r\n      </div>\r\n      <!--  -->\r\n      <el-collapse v-model=\"activeNames\">\r\n        <el-collapse-item name=\"1\" class=\"general-toolbar\">\r\n          <!--  -->\r\n          <template slot=\"title\" class=\"collaspetitle\">Base node</template>\r\n          <span\r\n            v-for=\"item in generalToolbarItems\"\r\n            :style=\"item['style']\"\r\n            :class=\"item['class']\"\r\n            :key=\"item['index']\"\r\n            ref=\"generalToolItems\"\r\n          >\r\n            <span class=\"generalTooltitle\">{{ item[\"text\"] }}</span>\r\n          </span>\r\n        </el-collapse-item>\r\n<!--        <el-collapse-item name=\"2\" class=\"custom-toolbar\">-->\r\n<!--          &lt;!&ndash;  &ndash;&gt;-->\r\n<!--          <template slot=\"title\" class=\"collaspetitle\"></template>-->\r\n<!--          <span-->\r\n<!--            v-for=\"item in toolbarItems\"-->\r\n<!--            style-->\r\n<!--            :class=\"{ 'rectangle-node': item['nodeType'] === 'rectangle' }\"-->\r\n<!--            class=\"custom-node\"-->\r\n<!--            :key=\"item['title']\"-->\r\n<!--            ref=\"toolItem\"-->\r\n<!--          >-->\r\n<!--            <img style :src=\"item['icon']\" />-->\r\n<!--            <br />-->\r\n<!--            <span class=\"node-title\">{{ item[\"title\"] }}</span>-->\r\n<!--          </span>-->\r\n<!--        </el-collapse-item>-->\r\n        <!--  -->\r\n        <el-collapse-item\r\n          v-for=\"(palette, paletteIndex) in Object.values(palettes)\"\r\n          :title=\"palette['title']\"\r\n          :key=\"paletteIndex\"\r\n          name=\"3\"\r\n          class=\"shapgroud\"\r\n        >\r\n          <!--  -->\r\n          <a\r\n            v-for=\"(_, shapeIndex) in palette['shapes']\"\r\n            :shapeIndex=\"shapeIndex\"\r\n            :paletteIndex=\"paletteIndex\"\r\n            ref=\"stencilDragItem\"\r\n            class=\"stencil-node\"\r\n            :key=\"shapeIndex\"\r\n          ></a>\r\n        </el-collapse-item>\r\n        <!-- -->\r\n<!--        <el-collapse-item title=\"\" name=\"4\">-->\r\n<!--          <ul>-->\r\n<!--            <li-->\r\n<!--              v-for=\"(item, index) in grouptoolItems\"-->\r\n<!--              :key=\"index\"-->\r\n<!--              class=\"group-item\"-->\r\n<!--              ref=\"grouptoolItem\"-->\r\n<!--            >-->\r\n<!--              <b>{{ item.title }}</b>-->\r\n<!--            </li>-->\r\n<!--          </ul>-->\r\n<!--        </el-collapse-item>-->\r\n      </el-collapse>\r\n    </div>\r\n    <!--  -->\r\n    <div class=\"top-tools\">\r\n      <el-col :span=\"4\">\r\n        <div\r\n          class=\"grid-content bg-purple\"\r\n          style=\"\r\n            color: rgb(64, 158, 255);\r\n            font-weight: 800;\r\n            font-size: 22px;\r\n            margin-left: 44px;\r\n          \"\r\n        >\r\n          Easy Editor\r\n        </div>\r\n      </el-col>\r\n      <el-col :span=\"12\" class=\"tools-group\">\r\n<!--        <el-tooltip-->\r\n<!--          class=\"item\"-->\r\n<!--          effect=\"dark\"-->\r\n<!--          content=\"\"-->\r\n<!--          placement=\"bottom\"-->\r\n<!--        >-->\r\n<!--          <el-button-->\r\n<!--            type=\"text\"-->\r\n<!--            icon=\"iconfont icon-zuhe\"-->\r\n<!--            @click=\"enGroup\"-->\r\n<!--          ></el-button>-->\r\n<!--        </el-tooltip>-->\r\n<!--        <el-tooltip-->\r\n<!--          class=\"item\"-->\r\n<!--          effect=\"dark\"-->\r\n<!--          content=\"xml\"-->\r\n<!--          placement=\"bottom\"-->\r\n<!--        >-->\r\n<!--          <el-button-->\r\n<!--            type=\"text\"-->\r\n<!--            icon=\"iconfont icon-fileplus-fill\"-->\r\n<!--            @click=\"inPutXml\"-->\r\n<!--          ></el-button>-->\r\n<!--        </el-tooltip>-->\r\n<!--        <el-tooltip-->\r\n<!--          class=\"item\"-->\r\n<!--          effect=\"dark\"-->\r\n<!--          content=\"xml\"-->\r\n<!--          placement=\"bottom\"-->\r\n<!--        >-->\r\n<!--          <el-button-->\r\n<!--            type=\"text\"-->\r\n<!--            icon=\"iconfont icon-xmloutput\"-->\r\n<!--            @click=\"outPutXml\"-->\r\n<!--          ></el-button>-->\r\n<!--        </el-tooltip>-->\r\n        <el-tooltip\r\n          class=\"item\"\r\n          effect=\"dark\"\r\n          v-if=\"showBackground\"\r\n          content=\"Hidden grid background\"\r\n          placement=\"bottom\"\r\n        >\r\n          <el-button\r\n            type=\"text\"\r\n            icon=\"iconfont icon-dituleiwanggequ-copy\"\r\n            @click=\"showBackground = false\"\r\n          ></el-button>\r\n        </el-tooltip>\r\n        <el-tooltip\r\n          v-else\r\n          class=\"item\"\r\n          effect=\"dark\"\r\n          content=\"\"\r\n          placement=\"bottom\"\r\n        >\r\n          <el-button\r\n            type=\"text\"\r\n            icon=\"iconfont icon-fangxingweixuanzhong-copy\"\r\n            @click=\"showBackground = true\"\r\n          ></el-button>\r\n        </el-tooltip>\r\n<!--        <el-tooltip-->\r\n<!--          class=\"item\"-->\r\n<!--          effect=\"dark\"-->\r\n<!--          content=\"\"-->\r\n<!--          placement=\"bottom\"-->\r\n<!--        >-->\r\n<!--          <el-button-->\r\n<!--            type=\"text\"-->\r\n<!--            icon=\"iconfont icon-tupian\"-->\r\n<!--            @click=\"showImage\"-->\r\n<!--          ></el-button>-->\r\n<!--        </el-tooltip>-->\r\n<!--        <el-tooltip-->\r\n<!--          class=\"item\"-->\r\n<!--          effect=\"dark\"-->\r\n<!--          content=\"\"-->\r\n<!--          placement=\"bottom\"-->\r\n<!--        >-->\r\n<!--          <el-button-->\r\n<!--            @click=\"graphLayout(true, 'circleLayout')\"-->\r\n<!--            type=\"text\"-->\r\n<!--            icon=\"el-icon-stopwatch\"-->\r\n<!--          ></el-button>-->\r\n<!--        </el-tooltip>-->\r\n<!--        <el-tooltip-->\r\n<!--          class=\"item\"-->\r\n<!--          effect=\"dark\"-->\r\n<!--          content=\"\"-->\r\n<!--          placement=\"bottom\"-->\r\n<!--        >-->\r\n<!--          <el-button-->\r\n<!--            type=\"text\"-->\r\n<!--            @click=\"graphLayout(true, 'compactTreeLayout')\"-->\r\n<!--            icon=\"iconfont icon-Directory-tree\"-->\r\n<!--          ></el-button>-->\r\n<!--        </el-tooltip>-->\r\n<!--        <el-tooltip-->\r\n<!--          class=\"item\"-->\r\n<!--          effect=\"dark\"-->\r\n<!--          content=\"\"-->\r\n<!--          placement=\"bottom\"-->\r\n<!--        >-->\r\n<!--          <el-button-->\r\n<!--            type=\"text\"-->\r\n<!--            @click=\"graphLayout(true, 'randomLayout')\"-->\r\n<!--            icon=\"el-icon-c-scale-to-original\"-->\r\n<!--          ></el-button>-->\r\n<!--        </el-tooltip>-->\r\n<!--        <el-tooltip-->\r\n<!--          class=\"item\"-->\r\n<!--          effect=\"dark\"-->\r\n<!--          content=\"\"-->\r\n<!--          placement=\"bottom\"-->\r\n<!--        >-->\r\n<!--          <el-button-->\r\n<!--            type=\"text\"-->\r\n<!--            @click=\"graphLayout(true, 'hierarchicalLayout')\"-->\r\n<!--            icon=\"el-icon-files\"-->\r\n<!--          ></el-button>-->\r\n<!--        </el-tooltip>-->\r\n        <el-tooltip\r\n          class=\"item\"\r\n          effect=\"dark\"\r\n          content=\"cancel\"\r\n          placement=\"bottom\"\r\n        >\r\n          <el-button\r\n            type=\"text\"\r\n            icon=\"iconfont icon-reply\"\r\n            @click=\"goBack\"\r\n          ></el-button>\r\n        </el-tooltip>\r\n        <el-tooltip\r\n          class=\"item\"\r\n          effect=\"dark\"\r\n          content=\"advance\"\r\n          placement=\"bottom\"\r\n        >\r\n          <el-button\r\n            type=\"text\"\r\n            icon=\"iconfont icon-share\"\r\n            @click=\"goForward\"\r\n          ></el-button>\r\n        </el-tooltip>\r\n        <el-tooltip\r\n          class=\"item\"\r\n          effect=\"dark\"\r\n          content=\"delete\"\r\n          placement=\"bottom\"\r\n        >\r\n          <el-button\r\n            type=\"text\"\r\n            icon=\"el-icon-delete-solid\"\r\n            @click=\"deleteNode\"\r\n          ></el-button>\r\n        </el-tooltip>\r\n      </el-col>\r\n<!--      <el-col :span=\"8\">-->\r\n<!--        <div-->\r\n<!--          class=\"grid-content bg-purple\"-->\r\n<!--          style=\"display: flex; justify-content: flex-end; padding-right: 20px\"-->\r\n<!--        >-->\r\n<!--          <el-button round size=\"medium\" @click=\"loadFlowCase(1)\"-->\r\n<!--            ></el-button-->\r\n<!--          >-->\r\n<!--          <el-button round size=\"medium\" @click=\"loadFlowCase(2)\"-->\r\n<!--            ></el-button-->\r\n<!--          >-->\r\n<!--          <el-button round size=\"medium\" @click=\"loadFlowCase(3)\"-->\r\n<!--            >Vue</el-button-->\r\n<!--          >-->\r\n<!--        </div>-->\r\n<!--      </el-col>-->\r\n    </div>\r\n    <!--  -->\r\n    <div\r\n      class=\"graphContainer\"\r\n      id=\"graphContainer\"\r\n      ref=\"container\"\r\n      :class=\"{ 'graphContainer-background': showBackground }\"\r\n    ></div>\r\n    <!--  -->\r\n    <div class=\"right-bar\">\r\n      <!--  -->\r\n      <style-select\r\n        @changeDashed=\"changeDashed\"\r\n        @changeStrokeColor=\"changeStrokeColor\"\r\n        @changeStrokeWidth=\"changeStrokeWidth\"\r\n        @changeFontSize=\"changeFontSize\"\r\n        @changeFontColor=\"changeFontColor\"\r\n        @changeLabelBackgroundColor=\"changeLabelBackgroundColor\"\r\n        @changeConfigOrder=\"changeConfigOrder\"\r\n        @changeFillColor=\"changeFillColor\"\r\n        @changeShadow=\"changeShadow\"\r\n        @changeFontStyle=\"changeFontStyle\"\r\n        @changeNodeimage=\"changeNodeimage\"\r\n        @edgeChange=\"edgeChange\"\r\n        @textValueChange=\"textValueChange\"\r\n        :textValue=\"textValue\"\r\n        :isNode=\"isNode\"\r\n        :cellStyle=\"cellStyle\"\r\n        :currentNormalType=\"currentNormalType\"\r\n        :graphX=\"graphX\"\r\n        :graphY=\"graphY\"\r\n        ref=\"styleSelect\"\r\n      />\r\n<!--      <div class=\"json-viewer\">-->\r\n<!--        <h4 style=\"text-align: center\">Json</h4>-->\r\n<!--        <json-viewer-->\r\n<!--          :value=\"jsonData\"-->\r\n<!--          style=\"height: 80%\"-->\r\n<!--          copyable-->\r\n<!--          sort-->\r\n<!--        ></json-viewer>-->\r\n<!--      </div>-->\r\n    </div>\r\n\r\n    <!-- XML/ -->\r\n<!--    <upload-data-->\r\n<!--      v-if=\"uploadDataVisible\"-->\r\n<!--      @uploadPaintFlow=\"uploadPaintFlow\"-->\r\n<!--      :graphXml=\"graphXml\"-->\r\n<!--      :isOutputXml=\"isOutputXml\"-->\r\n<!--    ></upload-data>-->\r\n  </div>\r\n</template>\r\n<script>\r\n// \r\nimport { generalToolbarItems } from \"./general-shape\"\r\nimport { toolbarItems } from './toolbar'\r\n// \r\nimport { grouptoolItems } from './GroupToolbarItems'\r\nimport * as R from \"ramda\";\r\nimport mx from 'mxgraph';\r\nimport _ from 'lodash';\r\nconst mxgraph = mx({})\r\nimport styleSelect from \"./component/styleSelect\";\r\nconst {\r\n  mxStencilRegistry,\r\n  mxStencil,\r\n  mxEvent,\r\n  mxGraph,\r\n  mxEditor,\r\n  mxUtils,\r\n  mxRubberband,\r\n  mxKeyHandler,\r\n  mxGraphHandler,\r\n  mxConstants,\r\n  mxImage,\r\n  mxCellState,\r\n  mxConnectionHandler,\r\n  mxCodec,\r\n  mxRectangleShape,\r\n  mxPoint,\r\n  mxClipboard,\r\n  mxCellTracker,\r\n  mxUndoManager,\r\n  mxClient,\r\n  mxEdgeHandler,\r\n  mxPerimeter,\r\n  mxOutline,\r\n  mxEventObject,\r\n  mxGeometry,\r\n  mxCell,\r\n  mxShape,\r\n  mxConstraintHandler,\r\n  mxEllipse,\r\n  // mxTriangle,\r\n  mxFastOrganicLayout,\r\n  mxHierarchicalLayout,\r\n  mxCompactTreeLayout,\r\n  mxMorphing,\r\n  mxCircleLayout,\r\n  mxSvgCanvas2D,\r\n  mxImageExport,\r\n  mxConnectionConstraint,\r\n  mxPolyline,\r\n  mxVertexHandler,\r\n  mxRectangle,\r\n  mxImageShape,\r\n  ActiveXObject,\r\n} = mxgraph;\r\nconst path = require('path');\r\n// \r\nObject.assign(mxEvent, {\r\n  NORMAL_TYPE_CLICKED: 'NORMAL_TYPE_CLICKED',\r\n});\r\n// \r\nconst xmlData1 = path.join('data/data1.xml');\r\nconst xmlData2 = path.join('data/data2.xml');\r\nconst xmlData3 = path.join('data/data3.xml');\r\nexport default {\r\n  computed: {\r\n    // \r\n    grouptoolItems: () => grouptoolItems,\r\n    toolbarItems: () => toolbarItems,\r\n    generalToolbarItems: () => generalToolbarItems,\r\n  },\r\n  components: {\r\n    styleSelect,\r\n  },\r\n  data () {\r\n    return {\r\n      graph: null,\r\n      editor: null,\r\n      palettes: {},\r\n      graphXml: '',\r\n      activeNames: ['1', '2', '3'],\r\n      isNode: false,\r\n      cellStyle: '',\r\n      graphX: 100,\r\n      graphY: 10,\r\n      undoMng: '',\r\n      textValue: '',\r\n      uploadDataVisible: false,\r\n      isOutputXml: false,\r\n      edgeStyle: 'orthogonalEdgeStyle',\r\n      outline: '',\r\n      idSeed: 0,\r\n      normalIdSeed: 0,\r\n      // configOrder: 0,\r\n      jsonData: {\r\n        cells: {\r\n          nodes: [],\r\n          groups: []\r\n        },\r\n        edges: []\r\n      },\r\n      showBackground: false,\r\n      currentNormalType: {},\r\n      normalTypePosition: {\r\n        top: '0',\r\n        left: '0',\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    // \r\n    createGraph () {\r\n      // graph\r\n      // graph\r\n      // this.graph = new mxGraph(this.$refs.container)\r\n      this.editor = new mxEditor();\r\n      this.graph = this.editor.graph;\r\n      this.editor.setGraphContainer(this.$refs.container);\r\n      // \r\n      this.configureStylesheet(this.graph);\r\n      // \r\n      mxRectangleShape.prototype.crisp = true;\r\n      // 100\r\n      mxConstants.MIN_HOTSPOT_SIZE = 16;\r\n      mxConstants.DEFAULT_HOTSPOT = 1;\r\n\r\n      //cellhtml\r\n      this.graph.setHtmlLabels(true);\r\n      this.graph.setDropEnabled(true);\r\n      this.graph.setSplitEnabled(false);\r\n      // true\r\n      this.graph.isValidDropTarget = (target, cells, evt) => {\r\n        if (this.graph.isSplitEnabled() && this.graph.isSplitTarget(target, cells, evt)) {\r\n          console.log('');\r\n          return true;\r\n        }\r\n      };\r\n\r\n      //  1:\r\n      // this.graph.isCellFoldable = (cell) => {\r\n      //   return false\r\n      // }\r\n      //  2:\r\n      this.graph.foldingEnabled = false;\r\n      // \r\n      this.graph.recursiveResize = true;\r\n\r\n      // \r\n      this.graph.connectionHandler.createEdgeState = () => {\r\n        // ,label\r\n        var edge = this.graph.createEdge(null, null, null, null, null);\r\n        // edge.style += `;edgeStyle=orthogonalEdgeStyle `\r\n        return new mxCellState(this.graph.view, edge, this.graph.getCellStyle(edge));\r\n      };\r\n\r\n      // \r\n      mxVertexHandler.prototype.livePreview = true;\r\n      mxVertexHandler.prototype.rotationEnabled = true;\r\n      // \r\n      mxVertexHandler.prototype.createSizerShape = function (bounds, index, fillColor) {\r\n        if (this.handleImage != null) {\r\n          bounds = new mxRectangle(bounds.x, bounds.y, this.handleImage.width, this.handleImage.height);\r\n          let shape = new mxImageShape(bounds, this.handleImage.src);\r\n          // Allows HTML rendering of the images\r\n          shape.preserveImageAspect = true;\r\n          return shape;\r\n        } else if (index == mxEvent.ROTATION_HANDLE) {\r\n          // return new mxDoubleEllipse(bounds, fillColor || mxConstants.HANDLE_FILLCOLOR, mxConstants.HANDLE_STROKECOLOR);\r\n          // \r\n          bounds = new mxRectangle(bounds.x, bounds.y, 15, 15);\r\n          let rotationShape = new mxImageShape(bounds, 'icon/rotate.svg');\r\n          rotationShape.preserveImageAspect = true;\r\n          return rotationShape;\r\n        } else {\r\n          return new mxRectangleShape(bounds, fillColor || mxConstants.HANDLE_FILLCOLOR, mxConstants.HANDLE_STROKECOLOR);\r\n        }\r\n      };\r\n      // 180bug\r\n      mxVertexHandler.prototype.getRotationHandlePosition = function () {\r\n        let padding = this.getHandlePadding();\r\n        return new mxPoint(this.bounds.x + this.bounds.width - this.rotationHandleVSpacing + padding.x / 2, this.bounds.y + this.rotationHandleVSpacing - padding.y / 2);\r\n      };\r\n      // \r\n      // groupBorderSize \r\n      let group = new mxCell('Group', new mxGeometry(), 'group;fontColor=white;');\r\n      group.setVertex(true);\r\n      // \r\n      group.setConnectable(true);\r\n      // group.setCellsResizable(false);\r\n      this.editor.defaultGroup = group;\r\n      this.editor.groupBorderSize = 80;\r\n\r\n      // \r\n      this.graph.isValidRoot = function (cell) {\r\n        return this.isValidDropTarget(cell);\r\n      };\r\n\r\n      // // \r\n      // this.graph.isCellSelectable = function (cell) {\r\n      //   return !this.isCellLocked(cell);\r\n      // };\r\n\r\n      // \r\n      this.graph.getLabel = function (cell) {\r\n        var tmp = mxGraph.prototype.getLabel.apply(this, arguments); // \"supercall\"\r\n        if (this.isCellLocked(cell)) {\r\n          //  \r\n          return '';\r\n        } else if (this.isCellCollapsed(cell)) {\r\n          var index = tmp.indexOf('</h1>');\r\n          if (index > 0) {\r\n            tmp = tmp.substring(0, index + 5);\r\n          }\r\n        }\r\n        return tmp;\r\n      };\r\n\r\n      // \r\n      this.graph.isValidDropTarget = function (cell) {\r\n        // console.log(cell, cells, evt);\r\n        return this.isSwimlane(cell);\r\n      };\r\n\r\n      // \r\n      this.graph.isValidRoot = function (cell) {\r\n        return this.isValidDropTarget(cell);\r\n      };\r\n\r\n      // \r\n      this.graph.isCellSelectable(true)\r\n\r\n      // \r\n      this.graph.setMultigraph(true);\r\n      // ()\r\n      this.graph.setAllowDanglingEdges(false);\r\n      // \r\n      this.graph.setAllowLoops(false);\r\n      //\r\n      this.graph.setDisconnectOnMove(false);\r\n      // \r\n      this.graph.setEnabled(true);\r\n      // \r\n      this.graph.getView().updateStyle = true;\r\n      // \r\n      this.rubberBand = new mxRubberband(this.graph);\r\n      this.graph.setResizeContainer(true);\r\n\r\n      // \r\n      // this.graph.setPanning(true);\r\n      this.graph.setPanning = true;\r\n      // \r\n      this.graph.setTooltips(false);\r\n      // \r\n      this.graph.setConnectable(true);\r\n      //\r\n      this.graph.gridSize = 3;\r\n      this.graph.setBorder(160);\r\n\r\n      // \r\n      this.graph.setCellsEditable(true);\r\n      // ()\r\n      // this.graph.dblClick = (evt, cell) => {\r\n      //   var model = this.graph.getModel();\r\n      //   if (model.isVertex(cell)) {\r\n      //     return false;\r\n      //   }\r\n      // };\r\n      // Disables synchronous loading of resources\r\n      // HTML(false)\r\n      // \r\n      // this.graph.isHtmlLabel = function (cell) {\r\n      //   return this.isSwimlane(cell);\r\n      // };\r\n      //\r\n      // 100\r\n      this.undoMng = new mxUndoManager();\r\n      let listener = (sender, evt) => {\r\n        this.undoMng.undoableEditHappened(evt.getProperty('edit'));\r\n\r\n      };\r\n      this.graph.getModel().addListener(mxEvent.UNDO, listener);\r\n      this.graph.getView().addListener(mxEvent.UNDO, listener);\r\n      // \r\n      this.outline = new mxOutline(this.graph, this.$refs.styleSelect.$refs.showMap);\r\n      if ((this.graph) == null || (this.graph) == undefined) {\r\n        return;\r\n      }\r\n      // value(valuetitle)\r\n      this.graph.convertValueToString = (cell) => {\r\n        return cell['value'] ? cell['value'] : cell['title'];\r\n      };\r\n    },\r\n\r\n    // \r\n    addCustomCell (dropCell, toolItem, x, y) {\r\n      // \r\n      const drop = !R.isNil(dropCell);\r\n      // drop && this.$message.info(`${toolItem['title']}${dropCell.title}`);\r\n      const { width, height } = toolItem;\r\n      const styleObj = toolItem.style;\r\n      const style = Object.keys(styleObj).map((attr) => `${attr}=${styleObj[attr]}`).join(';');\r\n      const realX = drop ? x - dropCell.geometry.x : x;\r\n      const realY = drop ? y - dropCell.geometry.y : y;\r\n      const parent = drop ? dropCell : this.graph.getDefaultParent();\r\n      this.graph.getModel().beginUpdate();\r\n      try {\r\n        let vertex = this.graph.insertVertex(parent, null, null, realX - (width / 2), realY - (height / 2), width, height, style + ';whiteSpace=wrap;word-break=break-all');\r\n        vertex.title = toolItem['title'];\r\n        vertex.id = toolItem['id'] + '-' + toolItem['idSeed'];\r\n        // \r\n        this.addPoint(vertex, toolItem['idSeed']);\r\n        toolItem['idSeed']++;\r\n        vertex['isGroup'] = toolItem['id'].includes('group') ? true : false\r\n      } finally {\r\n        this.graph.getModel().endUpdate();\r\n      }\r\n    },\r\n    // \r\n    graphLayout (animate, layoutType) {\r\n      this.graph.getModel().beginUpdate()\r\n      try {\r\n        if (layoutType === 'randomLayout') {\r\n          // \r\n          mxFastOrganicLayout.prototype.minDistanceLimit = 100\r\n          // eslint-disable-next-line new-cap\r\n          var layout = new mxFastOrganicLayout(this.graph)\r\n          layout.forceConstant = 500\r\n          layout.execute(this.graph.getDefaultParent())\r\n        } else if (layoutType === 'hierarchicalLayout') {\r\n          // \r\n          mxHierarchicalLayout.prototype.intraCellSpacing = 300\r\n          mxHierarchicalLayout.prototype.fineTuning = false\r\n          mxHierarchicalLayout.prototype.traverseAncestors = false\r\n          mxHierarchicalLayout.prototype.resizeParent = true\r\n          // \r\n          mxHierarchicalLayout.prototype.interHierarchySpacing = 200\r\n          // \r\n          mxHierarchicalLayout.prototype.interRankCellSpacing = 800\r\n\r\n          // eslint-disable-next-line new-cap\r\n          var hierarchicallayout = new mxHierarchicalLayout(this.graph, mxConstants.DIRECTION_NORTH)\r\n          hierarchicallayout.execute(this.graph.getDefaultParent())\r\n        } else if (layoutType === 'compactTreeLayout') {\r\n          // \r\n          // eslint-disable-next-line new-cap\r\n          var compactTreelayout = new mxCompactTreeLayout(this.graph)\r\n          compactTreelayout.execute(this.graph.getDefaultParent())\r\n        } else if (layoutType === 'circleLayout') {\r\n          // \r\n          // eslint-disable-next-line new-cap\r\n          var circleLayout = new mxCircleLayout(this.graph, 400)\r\n          circleLayout.execute(this.graph.getDefaultParent())\r\n        }\r\n      } finally {\r\n        // \r\n        if (animate) {\r\n          // eslint-disable-next-line new-cap\r\n          var morph = new mxMorphing(this.graph, 20, 7.7, 40)\r\n          morph.addListener(mxEvent.DONE, () => {\r\n            this.graph.getModel().endUpdate()\r\n          })\r\n          morph.startAnimation()\r\n        } else {\r\n          this.graph.getModel().endUpdate()\r\n        }\r\n      }\r\n    },\r\n    // \r\n    initGeneralTool () {\r\n      var generalToolbarDomArray = this.$refs.generalToolItems;\r\n      // \r\n      if (!(generalToolbarDomArray instanceof Array || generalToolbarDomArray.length <= 0)) {\r\n        return;\r\n      }\r\n      generalToolbarDomArray.forEach((dom, domIndex) => {\r\n        var toolItem = this.generalToolbarItems[domIndex];\r\n        var { width, height } = toolItem;\r\n        var itemClass = (toolItem.class);\r\n        //\r\n        var generalDropHandler = (graph, evt, dropCell, x, y) => {\r\n          const drop = !R.isNil(dropCell);\r\n          // drop && this.$message.info(`${toolItem['title']}${dropCell.title}`);\r\n          const realX = drop ? x - dropCell.geometry.x : x;\r\n          const realY = drop ? y - dropCell.geometry.y : y;\r\n          const { width, height } = toolItem;\r\n          const styleObj = toolItem.style;\r\n          const style = Object.keys(styleObj).map((attr) => `${attr}=${styleObj[attr]}`).join(';');\r\n          const parent = drop ? dropCell : this.graph.getDefaultParent();\r\n          this.graph.getModel().beginUpdate();\r\n          try {\r\n            let vertex = this.graph.insertVertex(parent, null, null, realX - (width / 2), realY - (height / 2), width, height, style + ';whiteSpace=wrap;word-break=break-all');\r\n            vertex.title = `<div style='word-break:break-all'>` + toolItem['title'] + '</div>';\r\n            vertex.dropAble = toolItem['dropAble'];\r\n            vertex.id = toolItem['id'] + '-' + toolItem['idSeed'];\r\n            toolItem['idSeed']++;\r\n            vertex['isGroup'] = toolItem['id'].includes('group') ? true : false\r\n\r\n          } finally {\r\n            this.graph.getModel().endUpdate();\r\n          }\r\n        };\r\n        // ()\r\n        var generalcreateDragPreview = () => {\r\n          var elt = document.createElement('div');\r\n          elt.style.width = `${width}px`;\r\n          elt.style.height = `${height}px`;\r\n          elt.style.transform = 'translate(-50%,-50%)';\r\n          elt.className = itemClass;\r\n          return elt;\r\n        };\r\n        // \r\n        let ds = mxUtils.makeDraggable(dom, this.graph, generalDropHandler, generalcreateDragPreview(), 0, 0, true, true);\r\n        ds.setGuidesEnabled(true);\r\n      });\r\n    },\r\n\r\n    // \r\n    initCustomToolbar () {\r\n      // dom\r\n      var toolbarDomArray = this.$refs.toolItem;\r\n      if (!(toolbarDomArray instanceof Array) || toolbarDomArray.length <= 0) {\r\n        return;\r\n      }\r\n\r\n      toolbarDomArray.forEach((dom, domIndex) => {\r\n        var toolItem = this.toolbarItems[domIndex];\r\n        var { width, height } = toolItem;\r\n        var image = toolItem.style.image;\r\n        //\r\n        var dropHandler = (graph, evt, cell, x, y) => {\r\n          this.addCustomCell(cell, toolItem, x, y);\r\n        };\r\n        // ()\r\n        var createDragPreview = () => {\r\n          var elt = document.createElement('div');\r\n          elt.style.border = '2px dotted black';\r\n          elt.style.width = `${width}px`;\r\n          elt.style.height = `${height}px`;\r\n          elt.style.backgroundImage = `url(${image})`;\r\n          elt.style.backgroundSize = `contain`;\r\n          elt.style.transform = 'translate(-50%,-50%)';\r\n          elt.style.backgroundRepeat = 'no-repeat';\r\n          return elt;\r\n        };\r\n        // \r\n        let ds = mxUtils.makeDraggable(dom, this.graph, dropHandler, createDragPreview(), 0, 0, false, true, true);\r\n        ds.setGuidesEnabled(true);\r\n      });\r\n    },\r\n    // \r\n    makeToolbarDraggable () {\r\n      const grouptoolItem = this.$refs.grouptoolItem;\r\n      if (!(grouptoolItem instanceof Array)) {\r\n        return;\r\n      }\r\n      grouptoolItem.forEach((item, index) => {\r\n        const toolItem = this.grouptoolItems[index];\r\n        const { height, width } = toolItem;\r\n        // \r\n        const createDragPreview = () => {\r\n          const elt = document.createElement('div');\r\n          elt.style.border = '2px dotted black';\r\n          elt.style.width = `${width}px`;\r\n          elt.style.height = `${height}px`;\r\n          elt.style.transform = 'translate(-50%,-50%)';\r\n          elt.className = toolItem.class;\r\n          return elt;\r\n        };\r\n        // drop\r\n        const dropHandler = (graph, evt, cell, x, y) => {\r\n          this.instanceCell(cell, toolItem, x, y);\r\n        };\r\n        // \r\n        const getDropTarget = (graph, x, y) => {\r\n          const cell = graph.getCellAt(x, y);\r\n          return R.propOr(null, 'dropAble', cell) ? cell : null;\r\n        };\r\n        mxUtils.makeDraggable(item, this.graph, dropHandler, createDragPreview(index), 0, 0, false, true, true, getDropTarget);\r\n      });\r\n    },\r\n    // \r\n    instanceCell (dropCell, toolItem, x, y) {\r\n      const drop = !R.isNil(dropCell);\r\n      // drop && this.$message.info(`${toolItem['title']}${dropCell.title}`);\r\n      const styleObj = toolItem['style'] || {};\r\n      const style = Object.keys(styleObj).map((key) => `${key}=${styleObj[key]}`).join(';');\r\n      const realX = drop ? x - dropCell.geometry.x : x;\r\n      const realY = drop ? y - dropCell.geometry.y : y;\r\n      const { height, width } = toolItem;\r\n      const parent = drop ? dropCell : this.graph.getDefaultParent();\r\n      const isHtml = Object.is('1', toolItem['style']['html']);\r\n      const tmpIndex = Date.now();\r\n      const value = isHtml ? toolItem['html'](tmpIndex) : null;\r\n      this.graph.getModel().beginUpdate();\r\n      try {\r\n        const vertex = this.graph.insertVertex(parent, null, value, realX - (width / 2), realY - (height / 2), width, height, style + ';whiteSpace=wrap;word-break=break-all');\r\n        vertex['title'] = toolItem['title'];\r\n        vertex['dropAble'] = toolItem['dropAble'];\r\n        vertex['id'] = toolItem['id'];\r\n        vertex['isGroup'] = toolItem['id'].includes('group') ? true : false\r\n        // \r\n        // cell['constraints'] = toolItem['constraints']\r\n        this.$nextTick(() => {\r\n          const createdCallback = toolItem['created'];\r\n          if (createdCallback instanceof Function) {\r\n            createdCallback(this.graph, vertex, tmpIndex);\r\n          }\r\n        });\r\n      } finally {\r\n        this.graph.getModel().endUpdate();\r\n      }\r\n    },\r\n\r\n    // \r\n    eventCenter () {\r\n\r\n      // graph\r\n      // \r\n      this.graph.addListener(mxEvent.NORMAL_TYPE_CLICKED, (sender, evt) => {\r\n        let cell = evt.properties.cell.state.cell;\r\n        this.currentNormalType = cell;\r\n      });\r\n      // this.graph.addListener(mxEvent.VERTEX_START_MOVE, (sender, evt) => {\r\n      //   console.log('VERTEX_START_MOVE', sender, evt);\r\n      // });\r\n      // \r\n      this.graph.addListener(mxEvent.PAN, (sender, evt) => {\r\n        console.log('', sender, evt);\r\n      });\r\n      // \r\n      this.graph.addListener(mxEvent.ADD_CELLS, (sender, evt) => {\r\n        this.$nextTick(() => {\r\n          let addCell = evt.properties.cells[0];\r\n          if (addCell.vertex) {\r\n            // \r\n            if (addCell.isGroup) {\r\n              this.$message.info('Added a group');\r\n              let groupObj = _.pick(addCell, ['id', 'title', 'parent', 'geometry']);\r\n              this.jsonData['cells']['groups'].push(groupObj);\r\n            } else {\r\n              let nodeObj = _.pick(addCell, ['id', 'title', 'parent', 'geometry']);\r\n              this.jsonData['cells']['nodes'].push(nodeObj);\r\n              this.$message.info('');\r\n            }\r\n            //  jsonData\r\n          } else if (addCell.edge) {\r\n            console.log(addCell)\r\n            let lineObj = _.pick(addCell, ['id', 'edge', 'source', 'parent', 'geometry', 'value']);\r\n            this.jsonData['edges'].push(lineObj);\r\n            this.$message.info('A line was added');\r\n          }\r\n        })\r\n      });\r\n\r\n      //\r\n      this.graph.addListener(mxEvent.CELLS_MOVED, (sender, evt) => {\r\n        // console.log(this.graph, 'graph');\r\n        let cellsName = [];\r\n        this.$nextTick(() => {\r\n          evt.properties.cells.forEach(item => {\r\n            item.parent.id.includes('group') && cellsName.push(item.title);\r\n          });\r\n          evt.properties.cells[0].parent.id !== '1' && this.$message.info(`${[...cellsName]}${evt.properties.cells[0].parent.title}`);\r\n        });\r\n      });\r\n      // \r\n      this.graph.addListener(mxEvent.CELLS_REMOVED, (sender, evt) => {\r\n        this.$nextTick(() => {\r\n          let removeCells = evt.properties.cells;\r\n          console.log(removeCells, 'removeCells')\r\n          removeCells.forEach(item => {\r\n            // cellIdjsonData,\r\n            if (item.vertex) {\r\n              // \r\n              if (item.isGroup) {\r\n                this.$message.info(`remove${item.id}group`);\r\n                this.jsonData['cells']['groups'].splice(this.jsonData['cells']['groups'].findIndex(jsonItem => { return jsonItem.id === item.id }), 1)\r\n              } else {\r\n                this.$message.info(`remove${item.id}node`);\r\n                this.jsonData['cells']['nodes'].splice(this.jsonData['cells']['nodes'].findIndex(jsonItem => { return jsonItem.id === item.id }), 1)\r\n              }\r\n            } else if (item.edge) {\r\n              this.$message.info('Removed line');\r\n              this.jsonData['edges'].splice(this.jsonData['edges'].findIndex(jsonItem => { return jsonItem.id === item.id }), 1)\r\n            }\r\n            // this.jsonData.forEach(item)\r\n          });\r\n        });\r\n      });\r\n\r\n    },\r\n    // \r\n    configMouseEvent () {\r\n      this.graph.addMouseListener(\r\n        {\r\n          currentState: null,\r\n          previousStyle: null,\r\n\r\n          mouseDown: (sender, evt) => {\r\n            if (!evt.state) {\r\n              console.log('');\r\n              return;\r\n            } else if (evt.state.cell.edge) {\r\n              console.log('');\r\n              return;\r\n            }\r\n\r\n            const cell = evt.state.cell;\r\n            let clickNormalType = false;\r\n            if (cell.style !== undefined) {\r\n              clickNormalType = cell.style.includes('normalType');\r\n            }\r\n            if (clickNormalType) {\r\n              //  mxGraph \r\n              this.graph.fireEvent(new mxEventObject(mxEvent.NORMAL_TYPE_CLICKED, 'cell', evt));\r\n            } else {\r\n              return;\r\n            }\r\n          },\r\n\r\n          mouseMove: (sender, me) => {\r\n            // console.log('mouseMove')\r\n            this.graphX = Math.ceil(me.graphX);\r\n            this.graphY = Math.ceil(me.graphY);\r\n          },\r\n\r\n          mouseUp: (sender, evt) => {\r\n            console.log('mouseUp');\r\n            if (evt.sourceState === undefined) {\r\n              return false;\r\n            } else {\r\n              var cell = evt.sourceState.cell;\r\n              // console.log(cell);\r\n              //  var cell = this.graph.getSelectionCell();\r\n              if (cell) {\r\n                this.textValue = cell['value'] ? cell['value'] : cell['title'];\r\n                console.log(this.textValue, 'cellValue')\r\n                console.log('cellValuie', cell)\r\n                cell.vertex ? this.isNode = true : this.isNode = false;\r\n                var getcellStyle = cell.getStyle() ? cell.getStyle() : null;\r\n                if (!this.isNode) {\r\n                  // \r\n                  getcellStyle ? this.edgeStyle = getcellStyle : 'orthogonalEdgeStyle';\r\n                } else {\r\n                  // \r\n                  // console.log('getcellStyle', getcellStyle);\r\n                  if (getcellStyle) {\r\n                    var arr = getcellStyle.split(';');\r\n                    // arr.pop()\r\n                    var styleObject = {};\r\n                    arr.forEach(item => {\r\n                      styleObject[item.split('=')[0]] = item.split('=')[1];\r\n                    });\r\n                    this.cellStyle = styleObject;\r\n                  }\r\n                }\r\n              } else {\r\n                this.$message.error('Please select a node or connection');\r\n              }\r\n            }\r\n          },\r\n        });\r\n    },\r\n    //\r\n    configKeyEvent () {\r\n      // \r\n      this.keyHandler = new mxKeyHandler(this.graph);\r\n      // \r\n      this.keyHandler.bindKey(46, () => {\r\n        this.deleteNode()\r\n      });\r\n      this.keyHandler.bindControlKey(65, () => {\r\n        this.graph.selectAll();\r\n      });\r\n      this.keyHandler.bindControlKey(67, () => {\r\n        this.copy();\r\n      });\r\n      this.keyHandler.bindControlKey(88, () => {\r\n        this.cut();\r\n      });\r\n      this.keyHandler.bindControlKey(86, () => {\r\n        this.paste();\r\n      });\r\n      this.keyHandler.bindControlKey(89, () => {\r\n        this.goForward();\r\n      });\r\n      this.keyHandler.bindControlKey(90, () => {\r\n        this.goBack();\r\n      });\r\n    },\r\n    //\r\n    configMenu () {\r\n      // \r\n      mxEvent.disableContextMenu(this.$refs.container);\r\n      this.graph.popupMenuHandler.factoryMethod = (menu) => {\r\n        menu.addItem('Output all nodes', null, () => {\r\n          Object.values(this.graph.getModel().cells).forEach((cell) => {\r\n            console.log(cell);\r\n          });\r\n        });\r\n\r\n        menu.addSeparator();\r\n        menu.addItem('copy', null, () => {\r\n          this.copy();\r\n        });\r\n\r\n        menu.addItem('affix', null, () => {\r\n          this.paste();\r\n        });\r\n\r\n        menu.addSeparator();\r\n        menu.addItem('assembly', null, () => {\r\n          this.enGroup();\r\n        });\r\n\r\n        menu.addItem('Salvage', null, () => {\r\n          this.graph.ungroupCells(this.graph.getSelectionCells());\r\n        });\r\n        menu.addSeparator();\r\n        menu.addItem('Flowing line', null, () => {\r\n          let cell = this.graph.getSelectionCell();\r\n          if (cell && cell.edge) {\r\n            let state = this.graph.view.getState(cell);\r\n            state.shape.node.getElementsByTagName('path')[0].removeAttribute('visibility');\r\n            state.shape.node.getElementsByTagName('path')[0].setAttribute('stroke-width', '6');\r\n            state.shape.node.getElementsByTagName('path')[0].setAttribute('stroke', 'lightGray');\r\n            state.shape.node.getElementsByTagName('path')[1].setAttribute('class', 'flow');\r\n          } else {\r\n            this.$message.error('Please select connection');\r\n          }\r\n        });\r\n        menu.addSeparator();\r\n        // menu.addItem('', null, () => {\r\n        //   let cell = this.graph.getSelectionCell().children[0];\r\n        //   let cellArrayStyle = cell.getStyle().split(';');\r\n        //   cellArrayStyle.shift();\r\n        //   let cellStyle = {};\r\n        //   cellArrayStyle.forEach(item => {\r\n        //     cellStyle[item.split('=')[0]] = item.split('=')[1];\r\n        //   });\r\n        //   let cellImage = cellStyle['image'].replace('unselect', 'selected');\r\n        //   this.graph.setCellStyles(mxConstants.STYLE_IMAGE, cellImage, [cell]);\r\n        //   this.graph.refresh(cell);\r\n        // });\r\n        menu.addItem('select all', null, () => {\r\n          this.graph.selectAll();\r\n        });\r\n        menu.addItem('Select all nodes', null, () => {\r\n          this.graph.selectCells(true, false);\r\n        });\r\n        menu.addItem('Select all connections', null, () => {\r\n          this.graph.selectCells(false, true);\r\n        });\r\n        // \r\n        menu.addSeparator();\r\n        menu.addItem('Modify style', null, () => {\r\n          var cell = this.graph.getSelectionCell();\r\n          if (cell) {\r\n            cell.vertex ? this.isNode = true : this.isNode = false;\r\n            var getcellStyle = cell.getStyle() ? cell.getStyle() : '';\r\n            if (getcellStyle) {\r\n              var arr = getcellStyle.split(';');\r\n              //\r\n              // arr.pop()\r\n              var styleObject = {};\r\n              arr.forEach((item => {\r\n                styleObject[item.split('=')[0]] = item.split('=')[1];\r\n              }));\r\n              this.cellStyle = styleObject;\r\n              // if (this.isNode) {\r\n\r\n              // }\r\n            }\r\n          } else {\r\n            this.$message.error('Please select a node or connection');\r\n          }\r\n        });\r\n      };\r\n    },\r\n    //  \r\n    configureStylesheet (graph) {\r\n      // \r\n      graph.vertexLabelsMovable = false;\r\n      // \r\n      new mxCellTracker(graph, '#409eff');\r\n      var style = new Object();\r\n      style[mxConstants.STYLE_SHAPE] = mxConstants.SHAPE_LABEL;\r\n      style[mxConstants.STYLE_PERIMETER] = mxPerimeter.RectanglePerimeter;\r\n      style[mxConstants.STYLE_VERTICAL_ALIGN] = mxConstants.ALIGN_MIDDLE;\r\n      style[mxConstants.STYLE_ALIGN] = mxConstants.ALIGN_CENTER;\r\n      style[mxConstants.STYLE_IMAGE_ALIGN] = mxConstants.ALIGN_CENTER;\r\n      style[mxConstants.STYLE_IMAGE_VERTICAL_ALIGN] = mxConstants.ALIGN_CENTER;\r\n      // style[mxConstants.STYLE_SPACING_TOP] = 6;\r\n      style[mxConstants.STYLE_SPACING_LEFT] = 5;\r\n      // style[mxConstants.STYLE_GRADIENTCOLOR] = 'skyblue'; // \r\n      style[mxConstants.STYLE_STROKECOLOR] = '#5d65df';   // \r\n      style[mxConstants.STYLE_FILLCOLOR] = '#FFFFFF';\r\n      style[mxConstants.STYLE_FONTCOLOR] = '#1d258f';     // \r\n      style[mxConstants.STYLE_FONTFAMILY] = 'Verdana';    // \r\n      style[mxConstants.STYLE_FONTSIZE] = '12';           // \r\n      style[mxConstants.STYLE_FONTSTYLE] = '0';           // \r\n      style[mxConstants.WORD_WRAP] = 'normal';             //     word-break: break-all;\r\n      style[mxConstants['word-break']] = 'break-all';             // \r\n      style[mxConstants.STYLE_WHITE_SPACE] = 'wrap';             // \r\n      style[mxConstants.STYLE_ROUNDED] = false;             // \r\n      style[mxConstants.STYLE_IMAGE_WIDTH] = '28';        // \r\n      style[mxConstants.STYLE_IMAGE_HEIGHT] = '28';       // \r\n      style[mxConstants.STYLE_OPACITY] = '100';            // ()\r\n      graph.getStylesheet().putDefaultVertexStyle(style);\r\n\r\n      style = new Object();\r\n      style[mxConstants.STYLE_SHAPE] = mxConstants.SHAPE_SWIMLANE;\r\n      style[mxConstants.STYLE_PERIMETER] = mxPerimeter.RectanglePerimeter;\r\n      style[mxConstants.STYLE_ALIGN] = mxConstants.ALIGN_CENTER;\r\n      style[mxConstants.STYLE_VERTICAL_ALIGN] = mxConstants.ALIGN_TOP;\r\n      style[mxConstants.STYLE_FILLCOLOR] = '#409eff';\r\n      // style[mxConstants.STYLE_GRADIENTCOLOR] = '#409eff';\r\n      style[mxConstants.STYLE_STROKECOLOR] = '#409eff';\r\n      style[mxConstants.STYLE_FONTCOLOR] = '#000000';\r\n      style[mxConstants.STYLE_ROUNDED] = false;\r\n      style[mxConstants.STYLE_OPACITY] = '80';\r\n      style[mxConstants.STYLE_STARTSIZE] = '30';\r\n      style[mxConstants.STYLE_FONTSIZE] = '16';\r\n      style[mxConstants.STYLE_FONTSTYLE] = 1;\r\n      graph.getStylesheet().putCellStyle('group', style);\r\n\r\n      style = new Object();\r\n      style[mxConstants.STYLE_SHAPE] = mxConstants.SHAPE_IMAGE;\r\n      style[mxConstants.STYLE_FONTCOLOR] = '#774400';\r\n      style[mxConstants.STYLE_PERIMETER] = mxPerimeter.RectanglePerimeter;\r\n      style[mxConstants.STYLE_PERIMETER_SPACING] = '6';\r\n      style[mxConstants.STYLE_ALIGN] = mxConstants.ALIGN_LEFT;\r\n      style[mxConstants.STYLE_VERTICAL_ALIGN] = mxConstants.ALIGN_MIDDLE;\r\n      style[mxConstants.STYLE_FONTSIZE] = '10';\r\n      style[mxConstants.STYLE_FONTSTYLE] = 2;\r\n      style[mxConstants.STYLE_IMAGE_WIDTH] = '16';\r\n      style[mxConstants.STYLE_IMAGE_HEIGHT] = '16';\r\n      style[mxConstants.STYLE_BACKGROUNDCOLOR] = 'transparent';\r\n      graph.getStylesheet().putCellStyle('port', style);\r\n\r\n\r\n      style = graph.getStylesheet().getDefaultEdgeStyle();\r\n      style[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR] = '#FFFFFF';\r\n      style[mxConstants.STYLE_STROKEWIDTH] = '2';\r\n      style[mxConstants.STYLE_ROUNDED] = true;\r\n      // Edgelabel\r\n      var edgeStyle = this.graph.getStylesheet().getDefaultEdgeStyle();\r\n      let labelStyle = this.graph.getStylesheet().getDefaultVertexStyle();\r\n      // labelStyle[mxConstants.STYLE_WHITE_SPACE] = 'wrap'; //\r\n      console.log(labelStyle, 'labelStyle')\r\n      // ()\r\n      edgeStyle['edgeStyle'] = 'orthogonalEdgeStyle';\r\n\r\n      //  cell/edge /\r\n      // style[mxConstants.STYLE_WHITE_SPACE] = 'wrap'\r\n\r\n      mxConstants.HANDLE_FILLCOLOR = '#409eff';\r\n      mxConstants.HANDLE_STROKECOLOR = 'transparent';\r\n      mxConstants.STYLE_ANCHOR_POINT_DIRECTION = 'anchorPointDirection';\r\n      mxConstants.STYLE_STYLE_ROTATION = 'rotation';\r\n      // \r\n      mxGraphHandler.prototype.scaleGrid = true;\r\n      mxGraph.prototype.pageBreakDashed = false;\r\n\r\n      // false\r\n      mxGraphHandler.prototype.guidesEnabled = true;\r\n      mxGraphHandler.prototype.htmlPreview = false;\r\n      mxGraphHandler.prototype.allowLivePreview = true;\r\n      // \r\n      mxGraphHandler.prototype.previewColor = \"red\"\r\n      // 0\r\n      mxGraphHandler.prototype.maxLivePreview = 100;\r\n\r\n      // Alt \r\n      mxGraphHandler.prototype.useGuidesForEvent = function (me) {\r\n        return !mxEvent.isAltDown(me.getEvent());\r\n      };\r\n      // \r\n      mxConstants.GUIDE_COLOR = '#1a73e8';\r\n      // \r\n      mxConstants.GUIDE_STROKEWIDTH = 2;\r\n      // \r\n      mxEdgeHandler.prototype.snapToTerminals = true;\r\n      // \r\n      mxConstants.EDGE_SELECTION_COLOR = '#99ccff';\r\n      // mxConstants.DEFAULT_INVALID_COLOR = 'yellow';\r\n      // mxConstants.INVALID_CONNECT_TARGET_COLOR = 'yellow';\r\n      // ()\r\n      mxConstants.INVALID_COLOR = '#99ccff';\r\n      // ()\r\n      mxConstants.VALID_COLOR = 'blue';\r\n      // mxConstants.GUIDE_COLOR = 'yellow';\r\n      // mxConstants.LOCKED_HANDLE_FILLCOLOR = '#24bcab';\r\n      // \r\n      mxConstants.VERTEX_SELECTION_COLOR = '#99ccff';\r\n\r\n      //-/+\r\n      // mxGraph.prototype.collapsedImage = new mxImage('images/collapsed.gif', 15, 15);\r\n      // mxGraph.prototype.expandedImage = new mxImage('images/expanded.gif', 15, 15);\r\n\r\n      // ()\r\n      mxConnectionHandler.prototype.connectImage = new mxImage('./icon/connectionpoint.png', 14, 14);\r\n      // \r\n      graph.connectionHandler.targetConnectImage = false;\r\n      // \r\n      this.graph.connectionHandler.isConnectableCell = function () {\r\n        return true;\r\n      };\r\n      // \r\n      mxConstraintHandler.prototype.pointImage = new mxImage('icon/dot.svg', 10, 10)\r\n      // \r\n      mxConstraintHandler.prototype.createHighlightShape = function () {\r\n        return new mxEllipse(null, '#409eff99', '#409eff99', 15)\r\n      }\r\n\r\n      mxShape.prototype.constraints = [\r\n        new mxConnectionConstraint(new mxPoint(0, 0), true),\r\n        new mxConnectionConstraint(new mxPoint(0.25, 0), true),\r\n        new mxConnectionConstraint(new mxPoint(0.5, 0), true),\r\n        new mxConnectionConstraint(new mxPoint(0.75, 0), true),\r\n        new mxConnectionConstraint(new mxPoint(0, 0.25), true),\r\n        new mxConnectionConstraint(new mxPoint(0, 0.5), true),\r\n        new mxConnectionConstraint(new mxPoint(0, 0.75), true),\r\n        new mxConnectionConstraint(new mxPoint(1, 0), true),\r\n        new mxConnectionConstraint(new mxPoint(1, 0.25), true),\r\n        new mxConnectionConstraint(new mxPoint(1, 0.5), true),\r\n        new mxConnectionConstraint(new mxPoint(1, 0.75), true),\r\n        new mxConnectionConstraint(new mxPoint(0, 1), true),\r\n        new mxConnectionConstraint(new mxPoint(0.25, 1), true),\r\n        new mxConnectionConstraint(new mxPoint(0.5, 1), true),\r\n        new mxConnectionConstraint(new mxPoint(0.75, 1), true),\r\n        new mxConnectionConstraint(new mxPoint(1, 1), true)];\r\n      mxPolyline.prototype.constraints = null;\r\n    },\r\n\r\n    //\r\n    changeDashed (value) {\r\n      var cell = this.graph.getSelectionCells();\r\n      this.graph.setCellStyles(mxConstants.STYLE_DASHED, value, [...cell]);\r\n      // this.graph.refresh(cell)\r\n    },\r\n\r\n    //\r\n    changeStrokeColor (value) {\r\n      var cell = this.graph.getSelectionCells();\r\n      this.graph.setCellStyles(mxConstants.STYLE_STROKECOLOR, value, [...cell]);\r\n      // this.graph.refresh(cell)\r\n    },\r\n\r\n    //\r\n    changeStrokeWidth (value) {\r\n      var cell = this.graph.getSelectionCells();\r\n      this.graph.setCellStyles(mxConstants.STYLE_STROKEWIDTH, value, [...cell]);\r\n      // this.graph.refresh(cell)\r\n    },\r\n\r\n    //\r\n    changeFontSize (value) {\r\n      var cell = this.graph.getSelectionCells();\r\n      this.graph.setCellStyles(mxConstants.STYLE_FONTSIZE, value, [...cell]);\r\n      // this.graph.refresh(cell)\r\n    },\r\n\r\n    //\r\n    changeFontColor (value) {\r\n      var cell = this.graph.getSelectionCells();\r\n      this.graph.setCellStyles(mxConstants.STYLE_FONTCOLOR, value, [...cell]);\r\n      // this.graph.refresh(cell)\r\n    },\r\n\r\n    //\r\n    changeLabelBackgroundColor (value) {\r\n      var cell = this.graph.getSelectionCells();\r\n      this.graph.setCellStyles(mxConstants.STYLE_LABEL_BACKGROUNDCOLOR, value, [...cell]);\r\n      // this.graph.refresh(cell)\r\n    },\r\n\r\n    changeFillColor (value) {\r\n      var cell = this.graph.getSelectionCells();\r\n      this.graph.setCellStyles(mxConstants.STYLE_FILLCOLOR, value, [...cell]);\r\n    },\r\n\r\n    changeShadow (value) {\r\n      var cell = this.graph.getSelectionCells();\r\n      this.graph.setCellStyles(mxConstants.STYLE_SHADOW, +(value), [...cell]);\r\n    },\r\n\r\n    changeFontStyle (value) {\r\n      var cell = this.graph.getSelectionCells();\r\n      this.graph.setCellStyles(mxConstants.STYLE_FONTSTYLE, value, [...cell]);\r\n    },\r\n\r\n    changeNodeimage (value) {\r\n      var cell = this.graph.getSelectionCells();\r\n      this.graph.setCellStyles(mxConstants.STYLE_IMAGE, value, [...cell]);\r\n    },\r\n\r\n    // \r\n    deleteNode () {\r\n      var cells = this.graph.getSelectionCells();\r\n      this.graph.removeCells([...cells]);\r\n    },\r\n\r\n    // \r\n    edgeChange (value) {\r\n      try {\r\n        var cell = this.graph.getSelectionCells();\r\n        this.graph.setCellStyles('edgeStyle', value, [...cell]);\r\n        let style = cell[0].style;\r\n        let valStr = cell[0].value;\r\n        this.graph.removeCells(cell);\r\n        let parent = this.graph.getDefaultParent();\r\n        let v1 = '';\r\n        let v2 = '';\r\n        // ID\r\n        parent['children'].forEach(item => {\r\n          item['id'] === cell[0].source.id ? v1 = item : false;\r\n          item['id'] === cell[0].target.id ? v2 = item : false;\r\n        });\r\n        this.graph.getModel().beginUpdate();\r\n        this.graph.insertEdge(parent, null, valStr, v1, v2, style);\r\n        this.graph.getModel().endUpdate();\r\n        this.$message.success('Succeeded in switching the connection style');\r\n      } catch (error) {\r\n        this.$message.error('Failed to switch the connection style');\r\n        console.log(error);\r\n      }\r\n    },\r\n\r\n    // \r\n    textValueChange (value) {\r\n      var cell = this.graph.getSelectionCells();\r\n      console.log(value, 'Node text new content', this.graph);\r\n      this.graph.cellLabelChanged(cell[0], value)\r\n    },\r\n    changeConfigOrder (val) {\r\n      // normalType,title\r\n      this.currentNormalType.title = val.newConfigOrder;\r\n      // cell\r\n      this.graph.setCellStyles(mxConstants.STYLE_IMAGE, `./images/order/unselect-${val.newConfigOrder}.png`, [this.currentNormalType]);\r\n      this.graph.refresh(this.currentNormalType);\r\n    },\r\n\r\n    //\r\n    copy () {\r\n      let selectionCells = this.graph.getSelectionCells();\r\n      mxClipboard.copy(this.graph, selectionCells);\r\n    },\r\n    //\r\n    paste () {\r\n      mxClipboard.paste(this.graph);\r\n    },\r\n    //\r\n    cut () {\r\n      var cells = [];\r\n      cells = this.graph.getSelectionCells();\r\n      mxClipboard.cut(this.graph, cells);\r\n    },\r\n    // \r\n    goForward () {\r\n      this.undoMng.redo();\r\n    },\r\n\r\n    // \r\n    goBack () {\r\n      this.undoMng.undo();\r\n    },\r\n\r\n    // \r\n    zoomIn () {\r\n      this.graph.zoomIn();\r\n    },\r\n\r\n    // \r\n    zoomOut () {\r\n      this.graph.zoomOut();\r\n    },\r\n\r\n    // \r\n    autoSize () {\r\n      // \r\n      // this.editor.execute('actualSize');\r\n      //\r\n      this.graph.zoomActual();\r\n      this.graph.fit();//\r\n      this.graph.center();//\r\n    },\r\n\r\n    // \r\n    showImage () {\r\n      this.editor.execute('show');//,svg\r\n      // svg\r\n      console.log('this.gtaph', this.graph)\r\n      const svg = this.exportModelSvg();\r\n      const blob = new Blob([svg], { type: 'image/svg+xml' });\r\n      const url = URL.createObjectURL(blob);\r\n      let link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = 'model.svg';\r\n      link.click();\r\n    },\r\n\r\n    exportModelSvg () {\r\n      let scale = this.graph.view.scale;\r\n      let bounds = this.graph.getGraphBounds();\r\n      let border = 10;\r\n\r\n      // Prepares SVG document that holds the output\r\n      let svgDoc = mxUtils.createXmlDocument();\r\n      let root = (svgDoc.createElementNS != null) ?\r\n        svgDoc.createElementNS(mxConstants.NS_SVG, 'svg') : svgDoc.createElement('svg');\r\n\r\n      if (root.style != null) {\r\n        root.style.backgroundColor = '#FFFFFF';\r\n      } else {\r\n        root.setAttribute('style', 'background-color:#FFFFFF');\r\n      }\r\n\r\n      if (svgDoc.createElementNS == null) {\r\n        root.setAttribute('xmlns', mxConstants.NS_SVG);\r\n      }\r\n      let width = Math.ceil(bounds.width * scale / scale + 2 * border);\r\n      let height = Math.ceil(bounds.height * scale / scale + 2 * border);\r\n      root.setAttribute('class', 'svg-container');\r\n      root.setAttribute('width', width + 'px');\r\n      root.setAttribute('height', height + 'px');\r\n      root.setAttribute('viewBox', \"0 0 \" + width + \" \" + height);\r\n      root.setAttribute('xmlns:xlink', mxConstants.NS_XLINK);\r\n      root.setAttribute('version', '1.1');\r\n\r\n      // Adds group for anti-aliasing via transform\r\n      let group = (svgDoc.createElementNS != null) ?\r\n        svgDoc.createElementNS(mxConstants.NS_SVG, 'g') : svgDoc.createElement('g');\r\n      group.setAttribute('transform', 'translate(0.5,0.5)');\r\n      root.appendChild(group);\r\n      svgDoc.appendChild(root);\r\n\r\n      // Renders graph. Offset will be multiplied with state's scale when painting state.\r\n      let svgCanvas = new mxSvgCanvas2D(group);\r\n      svgCanvas.translate(Math.floor(border / scale - bounds.x), Math.floor(border / scale - bounds.y));\r\n      svgCanvas.scale(scale);\r\n\r\n      let imgExport = new mxImageExport();\r\n      imgExport.drawState(this.graph.getView().getState(this.graph.model.root), svgCanvas);\r\n\r\n      //let xml = encodeURIComponent(mxUtils.getXml(root)); //no need\r\n      let xml = mxUtils.getXml(root);\r\n      return xml;\r\n\r\n    },\r\n    enGroup () {\r\n      this.editor.graph.setSelectionCell(this.editor.groupCells());\r\n      this.$message.success('Combination success');\r\n      // this.editor.groupCells(null, 0, this.graph.getSelectionCells());\r\n    },\r\n\r\n    // xml\r\n    inPutXml () {\r\n      this.isOutputXml = false;\r\n      this.uploadDataVisible = true;\r\n      this.graphXml = '';\r\n    },\r\n\r\n    // xml\r\n    uploadPaintFlow (newvalue) {\r\n      this.graph.selectAll();\r\n      this.graph.removeCells(this.graph.getSelectionCells());\r\n      setTimeout(() => {\r\n        this.decode(newvalue, this.graph);\r\n        this.$message.success('Render successfully');\r\n      }, 1000);\r\n    },\r\n\r\n    createXmlDom (str) {\r\n      if (document.all) { //IE\r\n        var xmlDom = new ActiveXObject('Microsoft.XMLDOM');\r\n        xmlDom.loadXML(str);\r\n        return xmlDom;\r\n      } else {\r\n        return (new DOMParser()).parseFromString(str, 'text/xml');\r\n      }\r\n    },\r\n\r\n    // xml\r\n    decode (graphXml, graph) {\r\n      this.graph.getModel().beginUpdate();\r\n      try {\r\n        //  :\r\n        // const xmlDocument = mxUtils.parseXml(graphXml)\r\n        // const decoder = new mxCodec(xmlDocument)\r\n        // decoder.decode(xmlDocument.documentElement, graph.getModel())\r\n        //  :\r\n        var xmlDoc = this.createXmlDom(graphXml);\r\n        var node = xmlDoc.documentElement;\r\n        var dec = new mxCodec(node.ownerDocument);\r\n        dec.decode(node, graph.getModel());\r\n      } finally {\r\n        this.graph.getModel().endUpdate();\r\n        // \r\n        this.autoSize()\r\n      }\r\n    },\r\n\r\n    // xml\r\n    outPutXml () {\r\n      this.isOutputXml = true;\r\n      this.uploadDataVisible = true;\r\n      this.graphXml = this.encode(this.graph);\r\n    },\r\n\r\n    // xml\r\n    encode (graph) {\r\n      const encoder = new mxCodec();\r\n      const result = encoder.encode(graph.getModel());\r\n      return mxUtils.getPrettyXml(result);\r\n    },\r\n    //\r\n    addStencilPalette (title, name, file) {\r\n      let req = mxUtils.load(file);\r\n      let root = req.getDocumentElement();\r\n      let shape = root.firstChild;\r\n      this.$set(this.palettes, name, { title, name, shapes: [] });\r\n      while (shape != null) {\r\n        if (shape.nodeType === mxConstants.NODETYPE_ELEMENT) {\r\n          const shapeName = shape.getAttribute('name');\r\n          const h = shape.getAttribute('h');\r\n          // shape.querySelector('path').setAttribute('fill', 'transparent')\r\n          const w = shape.getAttribute('w');\r\n          mxStencilRegistry.addStencil(shapeName, new mxStencil(shape));\r\n          this.palettes[name]['shapes'].push({\r\n            name: shape.getAttribute('name'),\r\n            width: w / 2,\r\n            height: h / 2,\r\n            fill: 'transparent',\r\n          });\r\n        }\r\n        shape = shape.nextSibling;\r\n      }\r\n    },\r\n\r\n    // \r\n    initStencilToolBar () {\r\n      var stencilDomArray = this.$refs.stencilDragItem;\r\n      if (!(stencilDomArray instanceof Array) || stencilDomArray.length <= 0 || (this.graph == null || this.graph == undefined)) {\r\n        return;\r\n      }\r\n      stencilDomArray.forEach(dom => {\r\n        const shapeIndex = dom.getAttribute('shapeIndex');\r\n        const paletteIndex = dom.getAttribute('paletteIndex');\r\n        const shapeItem = Object.values(this.palettes)[paletteIndex]['shapes'][shapeIndex];\r\n        const shapeWidth = shapeItem['width'];\r\n        const shapeHeight = shapeItem['height'];\r\n        const stencilDragHandler = (graph, evt, cell, x, y) => {\r\n          this.instanceGraph(this.graph, shapeItem, x, y, shapeWidth, shapeHeight, cell);\r\n        };\r\n        var createDragPreview = () => {\r\n          //\r\n          const elt = document.createElement('div');\r\n          elt.style.border = '2px dotted black';\r\n          elt.style.cursor = 'pointer';\r\n          elt.style.width = `${shapeWidth}px`;\r\n          elt.style.height = `${shapeHeight}px`;\r\n          elt.style.transform = 'translate(-50%,-50%)';\r\n          return elt;\r\n        };\r\n        dom.appendChild(this.createThumb(shapeItem, shapeWidth, shapeHeight));\r\n        mxUtils.makeDraggable(dom, this.graph, stencilDragHandler, createDragPreview(), 0, 0, false, true);\r\n      });\r\n    },\r\n\r\n    // \r\n    instanceGraph (graph, shapeItem, x, y, width, height, dropCell) {\r\n      const drop = !R.isNil(dropCell);\r\n      // drop && this.$message.info(`${dropCell.title}`);\r\n      const realX = drop ? x - dropCell.geometry.x : x;\r\n      const realY = drop ? y - dropCell.geometry.y : y;\r\n      const parent = drop ? dropCell : graph.getDefaultParent();\r\n      graph.getModel().beginUpdate();\r\n      try {\r\n        let cell = graph.insertVertex(parent, null, null, realX - (width / 2), realY - (height / 2), width, height, `shape=${shapeItem['name']};whiteSpace=wrap;word-break=break-all;`);\r\n        cell['isGroup'] = false\r\n        cell.customer = true;\r\n      } finally {\r\n        graph.getModel().endUpdate();\r\n      }\r\n    },\r\n\r\n    // \r\n    createThumb (item, width, height) {\r\n      const tmpGraph = new mxGraph(document.createElement('div'));\r\n      const thumbBorder = 2;\r\n      tmpGraph.labelsVisible = false;\r\n      tmpGraph.view.scaleAndTranslate(1, 0, 0);\r\n      this.instanceGraph(tmpGraph, item, 0, 0, width, height);\r\n      const bounds = tmpGraph.getGraphBounds();\r\n      const s = Math.floor(Math.min((width - 2 * thumbBorder) / bounds.width, (height - 2 * thumbBorder) / bounds.height) * 100) / 100;\r\n\r\n      tmpGraph.view.scaleAndTranslate(s, Math.floor((width - bounds.width * s) / 2 / s - bounds.x), Math.floor((height - bounds.height * s) / 2 / s - bounds.y));\r\n\r\n      const node = tmpGraph.view.getCanvas().ownerSVGElement.cloneNode(true);\r\n\r\n      node.style.position = 'relative';\r\n      node.style.overflow = 'hidden';\r\n      node.style.cursor = 'pointer';\r\n      node.style.width = `${width}px`;\r\n      node.style.height = `${height}px`;\r\n      node.style.left = `${thumbBorder}px`;\r\n      node.style.top = `${thumbBorder}px`;\r\n      node.style.display = 'inline-block';\r\n      return node;\r\n    },\r\n\r\n    // \r\n    addPoint (cell, number) {\r\n      const normalTypeVertex = this.graph.insertVertex(cell, null, null,\r\n        null, null, 30, 30,\r\n        `port;normalType;orderPoint=true;fillColor=none;image=./images/order/unselect-${number}.png;spacingLeft=-45px;spacingBottom=-45px`);\r\n      // .\r\n      // normalTypeVertex.geometry.offset = new mxPoint(45, 45);\r\n      // \r\n      // normalTypeVertex.setConnectable(false);\r\n      normalTypeVertex.id = (cell.id).split('-')[0] + `-unselect-${number}`;\r\n      normalTypeVertex.value = number;\r\n      normalTypeVertex.geometry.relative = true;\r\n      // \r\n      // const oldGetCursorForCell = mxGraph.prototype.getCursorForCell;\r\n      // this.graph.getCursorForCell = function (...args) {\r\n      //   const [cell] = args;\r\n      //   if (cell.edge || cell.style == undefined) {\r\n      //     return;\r\n      //   }\r\n      //   return cell.style.includes('normalType') ?\r\n      //     'pointer' :\r\n      //     oldGetCursorForCell.apply(this, args);\r\n      // };\r\n    },\r\n\r\n    // \r\n    loadFlowCase (index) {\r\n      this.$confirm('Make sure your current flowchart data is saved locally ?', 'Tips', {\r\n        confirmButtonText: 'I have saved',\r\n        cancelButtonText: 'unload',\r\n        type: 'warning',\r\n      }).then(() => {\r\n        let loadData = '';\r\n        switch (index) {\r\n          case 1:\r\n            loadData = xmlData1;\r\n            break;\r\n          case 2:\r\n            loadData = xmlData2;\r\n            break;\r\n          case 3:\r\n            loadData = xmlData3;\r\n            break;\r\n        }\r\n        console.log('loadData', loadData);\r\n        let newXml = mxUtils.load(loadData).request.response;\r\n        this.graph.selectAll();\r\n        this.graph.removeCells(this.graph.getSelectionCells());\r\n        setTimeout(() => {\r\n          this.decode(newXml, this.graph);\r\n\r\n          this.$message.success('');\r\n        }, 1000);\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '',\r\n        });\r\n      });\r\n    },\r\n    handleScroll (e) {\r\n      if (e.wheelDelta === 120) {\r\n        this.graph.zoomIn()\r\n      } else {\r\n        this.graph.zoomOut()\r\n      }\r\n    },\r\n  },\r\n  mounted () {\r\n    // \r\n    if (!mxClient.isBrowserSupported()) {\r\n      this.$message.error('Chrome!');\r\n    } else {\r\n      // Overridden to define per-shape connection points\r\n      mxGraph.prototype.getAllConnectionConstraints = function (terminal) {\r\n        if (terminal != null && terminal.shape != null) {\r\n          if (terminal.shape.stencil != null) {\r\n            if (terminal.shape.stencil.constraints != null) {\r\n              return terminal.shape.stencil.constraints;\r\n            }\r\n          } else if (terminal.shape.constraints != null) {\r\n            return terminal.shape.constraints;\r\n          }\r\n        }\r\n        return null;\r\n      };\r\n      this.createGraph();\r\n      this.eventCenter();\r\n      this.configMouseEvent();\r\n      this.configMenu();\r\n      // this.addStencilPalette('Arrow set', 'arrows', path.join('./stencil/arrows.xml'));\r\n      this.$nextTick(() => {\r\n        this.initCustomToolbar();\r\n        this.initGeneralTool();\r\n        this.initStencilToolBar();\r\n        this.makeToolbarDraggable();\r\n        this.configKeyEvent();\r\n      });\r\n    }\r\n    document.getElementById('graphContainer').addEventListener('mousewheel', this.handleScroll, true) // \r\n  },\r\n  destroyed () {\r\n    document.getElementById('graphContainer').removeEventListener('mousewheel', this.handleScroll) //  \r\n    this.graph.destroy();\r\n  },\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n@import \"./general-shap.css\";\r\n.customToolbarContainer {\r\n  width: 100%;\r\n  height: 100vh;\r\n  display: flex;\r\n  position: relative;\r\n  overflow: hidden;\r\n\r\n  .toolbarContainer {\r\n    padding-top: 50px;\r\n    font-size: 20px;\r\n    background: #efefef;\r\n    text-align: center;\r\n    background-color: #fff;\r\n    border-right: 1px solid #ededed;\r\n    width: 10%;\r\n    position: relative;\r\n    box-sizing: border-box;\r\n    overflow-y: scroll;\r\n    .general-toolbar {\r\n      .el-collapse-item__wrap .el-collapse-item__content {\r\n        width: 100%;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        justify-content: space-around;\r\n        align-content: space-around;\r\n        .common {\r\n          width: 30%;\r\n          cursor: pointer;\r\n          // padding: 10px;\r\n          height: 50px;\r\n          white-space: wrap;\r\n          text-align: center;\r\n          position: relative;\r\n          .generalTooltitle {\r\n            position: absolute;\r\n            bottom: -10px;\r\n            left: 0;\r\n            width: 100%;\r\n            // transform: translateX(-50%);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .custom-toolbar {\r\n      .custom-node {\r\n        display: inline-block;\r\n        margin: 10px 0 0 0;\r\n        width: 28%;\r\n        height: 60px;\r\n        border: 1px solid #000000;\r\n        padding: 5px 0;\r\n        img {\r\n          // width: 34px;\r\n          height: 34px;\r\n        }\r\n      }\r\n      .rectangle-node {\r\n        width: 45%;\r\n        height: 40px;\r\n        margin: 10px 0 0 0;\r\n        background-color: #ffff;\r\n        position: relative;\r\n        border: 1px solid #000000;\r\n        padding: none;\r\n        img {\r\n          position: absolute;\r\n          left: 0;\r\n          // width: none;\r\n          height: 35px;\r\n          top: 50%;\r\n          transform: translateY(-50%);\r\n        }\r\n        .node-title {\r\n          position: absolute;\r\n          left: 60%;\r\n          top: 50%;\r\n          transform: translate(-50%, -50%);\r\n        }\r\n      }\r\n      .el-collapse-item__content {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        justify-content: space-around;\r\n        align-content: space-around;\r\n        span {\r\n          cursor: pointer;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .toolbarContainer::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n  .graphContainer {\r\n    margin-top: 50px;\r\n    height: 100% !important;\r\n    line-height: 100%;\r\n    position: relative;\r\n    overflow: hidden;\r\n    background-color: #fff !important;\r\n    flex: 1;\r\n  }\r\n  .graphContainer-background {\r\n    background-image: url(\"../../assets/grid.gif\");\r\n  }\r\n  .top-tools {\r\n    position: absolute;\r\n    display: flex;\r\n    align-items: center;\r\n    box-sizing: border-box;\r\n    top: 0;\r\n    left: 0;\r\n    padding: 0 20px 0 20px;\r\n    width: 100%;\r\n    z-index: 1000;\r\n    background-color: #fff;\r\n    height: 50px;\r\n    // border-bottom: 1px solid #ededed;\r\n    box-shadow: 0px 2px 8px -4px #c4c7c1;\r\n    .select-edgetype {\r\n      width: 100px;\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n  .mxRubberband {\r\n    background-color: rgb(58, 58, 207);\r\n    position: absolute;\r\n  }\r\n  .el-collapse-item__header {\r\n    padding-left: 30px;\r\n  }\r\n  .right-bar {\r\n    width: 260px;\r\n    background-color: #fff;\r\n    height: 100%;\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    border-left: 1px solid #ededed;\r\n    padding-top: 50px;\r\n    box-sizing: border-box;\r\n    .json-viewer {\r\n      overflow: auto;\r\n      position: absolute;\r\n      top: 35%;\r\n      width: 260px;\r\n      height: 70%;\r\n      bottom: 0;\r\n      right: 0;\r\n    }\r\n  }\r\n  .tools-group {\r\n    display: flex;\r\n    justify-content: center;\r\n    button {\r\n      margin-left: 22px;\r\n    }\r\n  }\r\n  .aside-button-group {\r\n    width: 100%;\r\n    position: sticky;\r\n    top: 0px;\r\n    background: #ffffff;\r\n    box-sizing: border-box;\r\n    z-index: 1000;\r\n    border: 1px solid #ededed;\r\n    border-left: none;\r\n  }\r\n}\r\n\r\ntable.mxPopupMenu {\r\n  background: #fff;\r\n  cursor: pointer;\r\n  border: 1px solid #ededed;\r\n  padding: 5px;\r\n}\r\n\r\ndiv.mxPopupMenu {\r\n  position: absolute;\r\n}\r\n.shapgroud {\r\n  .el-collapse-item__content {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n  }\r\n  svg g path {\r\n    fill: transparent;\r\n  }\r\n  .stencil-node {\r\n    width: 20%;\r\n  }\r\n  svg g path {\r\n    stroke: #515151;\r\n    -webkit-text-fill-color: #515151;\r\n  }\r\n}\r\n\r\n.flow {\r\n  stroke-dasharray: 8;\r\n  animation: dash 0.5s linear;\r\n  animation-iteration-count: infinite;\r\n}\r\n@keyframes dash {\r\n  to {\r\n    stroke-dashoffset: -16;\r\n  }\r\n}\r\n.group-item {\r\n  cursor: pointer;\r\n  height: 40px;\r\n  margin: 5px 0;\r\n  line-height: 40px;\r\n  width: 80%;\r\n  display: inline-block;\r\n  border: 1px solid #eeee;\r\n}\r\n</style>\r\n"]}]}