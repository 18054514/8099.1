{"remainingRequest":"D:\\thousandProject\\Mxgraph-EasyFlowEditor\\node_modules\\babel-loader\\lib\\index.js!D:\\thousandProject\\Mxgraph-EasyFlowEditor\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\thousandProject\\Mxgraph-EasyFlowEditor\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\thousandProject\\Mxgraph-EasyFlowEditor\\src\\views\\customToolbar\\component\\uploadData.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\thousandProject\\Mxgraph-EasyFlowEditor\\src\\views\\customToolbar\\component\\uploadData.vue","mtime":1691244427717},{"path":"D:\\thousandProject\\Mxgraph-EasyFlowEditor\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\thousandProject\\Mxgraph-EasyFlowEditor\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\thousandProject\\Mxgraph-EasyFlowEditor\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\thousandProject\\Mxgraph-EasyFlowEditor\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICdjb2RlbWlycm9yL2xpYi9jb2RlbWlycm9yLmNzcyc7CmltcG9ydCB7IGNvZGVtaXJyb3IgfSBmcm9tICd2dWUtY29kZW1pcnJvcic7IC8vIOWvvOWFpeS4u+mimCDmoLflvI8KLy8gaW1wb3J0ICdjb2RlbWlycm9yL3RoZW1lL21kbi1saWtlLmNzcycKCmltcG9ydCAnY29kZW1pcnJvci90aGVtZS9sZXNzZXItZGFyay5jc3MnOwppbXBvcnQgJ2NvZGVtaXJyb3IvbW9kZS9tYXJrZG93bi9tYXJrZG93bi5qcyc7IC8vIOWvvOWFpeaVsOaNruexu+Wei+ivhuWIq+aWh+S7tgoKaW1wb3J0ICJjb2RlbWlycm9yL21vZGUvamF2YXNjcmlwdC9qYXZhc2NyaXB0LmpzIjsKaW1wb3J0ICJjb2RlbWlycm9yL21vZGUvcHJvcGVydGllcy9wcm9wZXJ0aWVzLmpzIjsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL3Njcm9sbC9hbm5vdGF0ZXNjcm9sbGJhci5qcyc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9zZWFyY2gvbWF0Y2hlc29uc2Nyb2xsYmFyLmpzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL3NlYXJjaC9tYXRjaC1oaWdobGlnaHRlci5qcyc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9zZWFyY2gvanVtcC10by1saW5lLmpzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL3NlbGVjdGlvbi9hY3RpdmUtbGluZSc7IC8v5YWJ5qCH6KGM6IOM5pmv6auY5Lqu77yM6YWN572u6YeM6Z2i5Lmf6ZyA6KaBc3R5bGVBY3RpdmVMaW5l6K6+572u5Li6dHJ1ZQoKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2RpYWxvZy9kaWFsb2cuanMnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZGlhbG9nL2RpYWxvZy5jc3MnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vc2VhcmNoL3NlYXJjaGN1cnNvci5qcyc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9zZWFyY2gvc2VhcmNoLmpzJzsgLy8g5oqY5Y+gCgppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZm9sZC9mb2xkZ3V0dGVyLmNzcyc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9mb2xkL2ZvbGRjb2RlJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2ZvbGQvZm9sZGd1dHRlcic7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9mb2xkL2JyYWNlLWZvbGQnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZm9sZC9jb21tZW50LWZvbGQnOwppbXBvcnQgWDJKUyBmcm9tICd4MmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ2dyYXBoWG1sJywgJ2lzT3V0cHV0WG1sJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHhtbDJqc29uOiAnJywKICAgICAgdXBsb2FkRmlsZXM6IFtdLAogICAgICBjZW50ZXJEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgY3VycmVudE5vZGVEYXRhOiAiIiwKICAgICAgLy8gY29kZW1pcnJvcumFjee9rumhuQogICAgICBvcHRpb25zOiB7CiAgICAgICAgdGFiU2l6ZTogNCwKICAgICAgICBsaW5lTnVtYmVyczogdHJ1ZSwKICAgICAgICBsaW5lOiB0cnVlLAogICAgICAgIG1vZGU6ICd0ZXh0L3gtbWFya2Rvd24nLAogICAgICAgIHRoZW1lOiAnbGVzc2VyLWRhcmsnLAogICAgICAgIGZvbGRHdXR0ZXI6IHRydWUsCiAgICAgICAgbGluZVdyYXBwaW5nOiB0cnVlLAogICAgICAgIHN0eWxlQWN0aXZlTGluZTogdHJ1ZSwKICAgICAgICBhdXRvUmVmcmVzaDogdHJ1ZSwKICAgICAgICBsaW50OiB0cnVlLAogICAgICAgIGd1dHRlcnM6IFsnQ29kZU1pcnJvci1saW5lbnVtYmVycycsICdDb2RlTWlycm9yLWZvbGRndXR0ZXInLCAnQ29kZU1pcnJvci1saW50LW1hcmtlcnMnXQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgY29kZW1pcnJvcjogY29kZW1pcnJvcgogIH0sCiAgd2F0Y2g6IHsKICAgIGN1cnJlbnROb2RlRGF0YTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld3ZhbHVlKSB7CiAgICAgICAgLy8gbGV0IHhtbGpzb24gPSB4MmpzLnhtbDJqcyhuZXd2YWx1ZSkgLy94bWwyanPmlrnms5XvvIzkvKDlhaV4bWzmoLzlvI/nmoTmlbDmja7vvIzov5Tlm55qc29u5a+56LGhCiAgICAgICAgLy/liJvlu7rkuIDkuKp4Mmpz5a+56LGh6L+b6KGM6L2s5o2iCiAgICAgICAgdmFyIHgyanMgPSBuZXcgWDJKUygpOwogICAgICAgIHRoaXMueG1sMmpzb24gPSB4MmpzLnhtbDJqcyhuZXd2YWx1ZSk7IC8vIHRoaXMuY3VycmVudE5vZGVEYXRhID0gbmV3dmFsdWUKICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBkZWVwOiB0cnVlCiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5jZW50ZXJEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIHRoaXMuY3VycmVudE5vZGVEYXRhID0gdGhpcy5ncmFwaFhtbDsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy5jZW50ZXJEaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuJHBhcmVudC51cGxvYWREYXRhVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIHNhdmVYbWxGaWxlOiBmdW5jdGlvbiBzYXZlWG1sRmlsZSgpIHsKICAgICAgdmFyIGRhdGFzdHIgPSAiZGF0YTp0ZXh0L2pzb247Y2hhcnNldD11dGYtOCwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuY3VycmVudE5vZGVEYXRhKTsKICAgICAgdmFyIGRvd25sb2FkQW5jaG9yTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgZG93bmxvYWRBbmNob3JOb2RlLnNldEF0dHJpYnV0ZSgiaHJlZiIsIGRhdGFzdHIpOwogICAgICBkb3dubG9hZEFuY2hvck5vZGUuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsICdkYXRhLnhtbCcpOwogICAgICBkb3dubG9hZEFuY2hvck5vZGUuY2xpY2soKTsKICAgICAgZG93bmxvYWRBbmNob3JOb2RlLnJlbW92ZSgpOwogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuato+WcqOS4i+i9veS4rSzor7fnqI3lkI4uLi4iKTsKICAgIH0sCiAgICBjb25maXJtVXBsb2FkOiBmdW5jdGlvbiBjb25maXJtVXBsb2FkKCkgewogICAgICAvLyDop6blj5HniLbnu4Tku7bph43nu5jlh73mlbAKICAgICAgdGhpcy4kZW1pdCgidXBsb2FkUGFpbnRGbG93IiwgdGhpcy5jdXJyZW50Tm9kZURhdGEpOwogICAgICB0aGlzLmNlbnRlckRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy4kcGFyZW50LnVwbG9hZERhdGFWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgY2FuY2VsVXBsb2FkOiBmdW5jdGlvbiBjYW5jZWxVcGxvYWQoKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudE5vZGVEYXRhKTsKICAgICAgdGhpcy5jZW50ZXJEaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuJHBhcmVudC51cGxvYWREYXRhVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmN1cnJlbnROb2RlRGF0YSA9ICIiOwogICAgfSwKICAgIHRpcmdnZXJGaWxlOiBmdW5jdGlvbiB0aXJnZ2VyRmlsZSgpIHt9LAogICAgZmlsZUNoYW5nZTogZnVuY3Rpb24gZmlsZUNoYW5nZShmaWxlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyDojrflj5bmlofku7bnsbvlnosKICAgICAgdmFyIGZpbGVUeXBlID0gZmlsZS5uYW1lLnNwbGl0KCIuIikucG9wKCk7CgogICAgICBpZiAoZmlsZVR5cGUgIT09ICd4bWwnKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiK5Lyg5paH5Lu257G75Z6L6ZSZ6K+vLOivt+mHjeaWsOS4iuS8oFhNTOexu+Wei+eahOaWh+S7tiIpOwogICAgICAgIHRoaXMudXBsb2FkRmlsZXMgPSBbXTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChmaWxlKSB7CiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZS5yYXcpOyAvL+azqOaEj+ivu+WPluS4reaWh+eahOaYr+eUqOi/meS4que8luegge+8jOS4jeaYr3V0Zi04CgogICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmlofku7bkuIrkvKDmiJDlip8iKTsKCiAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVhZGVyLnJlc3VsdDsKICAgICAgICAgIF90aGlzLmN1cnJlbnROb2RlRGF0YSA9IHJlc3VsdDsKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgZXhjZWVkRmlsZTogZnVuY3Rpb24gZXhjZWVkRmlsZSgpIHsKICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6LaF5Ye65paH5Lu25Y+v5LiK5Lyg5pWw6YePLOivt+WFiOa4hemZpOaWh+S7tiIpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["uploadData.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <el-dialog\r\n    :title=\"isOutputXml ? '数据导出' : '数据导入'\"\r\n    :visible.sync=\"centerDialogVisible\"\r\n    width=\"70%;\"\r\n    center\r\n    @close=\"close\"\r\n  >\r\n    <el-upload\r\n      class=\"upload-box\"\r\n      drag\r\n      accept=\".xml\"\r\n      action\r\n      :file-list=\"uploadFiles\"\r\n      :on-change=\"fileChange\"\r\n      :auto-upload=\"false\"\r\n      :limit=\"1\"\r\n      :on-exceed=\"exceedFile\"\r\n      v-if=\"!isOutputXml\"\r\n    >\r\n      <i class=\"el-icon-upload\"></i>\r\n      <div class=\"el-upload__text\">\r\n        将文件拖到此处，或\r\n        <em>点击上传</em>\r\n        <div slot=\"tip\" class=\"el-upload__tip\">\r\n          只能上传\r\n          <em>xml</em> 文件，且最大文件数量不超过 <em>1</em> 个\r\n        </div>\r\n      </div>\r\n    </el-upload>\r\n    <!--codemirror插件-->\r\n    <div style=\"display: flex\">\r\n      <codemirror\r\n        :value=\"currentNodeData\"\r\n        v-model=\"currentNodeData\"\r\n        :options=\"options\"\r\n        :style=\"{ width: isOutputXml ? '50%' : '100%' }\"\r\n        class=\"codemirror\"\r\n      ></codemirror>\r\n      <!-- xml转json -->\r\n      <json-viewer\r\n        v-if=\"isOutputXml\"\r\n        class=\"xmlToJson\"\r\n        :value=\"xml2json\"\r\n        :expand-depth=\"5\"\r\n        copyable\r\n        sort\r\n      ></json-viewer>\r\n    </div>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"cancelUpload\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"confirmUpload\" v-if=\"!isOutputXml\"\r\n        >导入</el-button\r\n      >\r\n      <el-button type=\"primary\" @click=\"saveXmlFile\" v-if=\"isOutputXml\"\r\n        >另存为XML文件</el-button\r\n      >\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n<script>\r\nimport 'codemirror/lib/codemirror.css'\r\nimport { codemirror } from 'vue-codemirror'\r\n// 导入主题 样式\r\n// import 'codemirror/theme/mdn-like.css'\r\nimport 'codemirror/theme/lesser-dark.css'\r\nimport 'codemirror/mode/markdown/markdown.js'\r\n// 导入数据类型识别文件\r\nimport \"codemirror/mode/javascript/javascript.js\"\r\nimport \"codemirror/mode/properties/properties.js\"\r\nimport 'codemirror/addon/scroll/annotatescrollbar.js'\r\nimport 'codemirror/addon/search/matchesonscrollbar.js'\r\nimport 'codemirror/addon/search/match-highlighter.js'\r\nimport 'codemirror/addon/search/jump-to-line.js'\r\nimport 'codemirror/addon/selection/active-line' //光标行背景高亮，配置里面也需要styleActiveLine设置为true\r\n\r\nimport 'codemirror/addon/dialog/dialog.js'\r\nimport 'codemirror/addon/dialog/dialog.css'\r\nimport 'codemirror/addon/search/searchcursor.js'\r\nimport 'codemirror/addon/search/search.js'\r\n// 折叠\r\nimport 'codemirror/addon/fold/foldgutter.css'\r\nimport 'codemirror/addon/fold/foldcode'\r\nimport 'codemirror/addon/fold/foldgutter'\r\nimport 'codemirror/addon/fold/brace-fold'\r\nimport 'codemirror/addon/fold/comment-fold'\r\nimport X2JS from 'x2js'\r\n\r\nexport default {\r\n  props: ['graphXml', 'isOutputXml'],\r\n  data () {\r\n    return {\r\n      xml2json: '',\r\n      uploadFiles: [],\r\n      centerDialogVisible: false,\r\n      currentNodeData: \"\",\r\n      // codemirror配置项\r\n      options: {\r\n        tabSize: 4,\r\n        lineNumbers: true,\r\n        line: true,\r\n        mode: 'text/x-markdown',\r\n        theme: 'lesser-dark',\r\n        foldGutter: true,\r\n        lineWrapping: true,\r\n        styleActiveLine: true,\r\n        autoRefresh: true,\r\n        lint: true,\r\n        gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter', 'CodeMirror-lint-markers'],\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    codemirror\r\n  },\r\n  watch: {\r\n    currentNodeData: {\r\n      handler (newvalue) {\r\n        // let xmljson = x2js.xml2js(newvalue) //xml2js方法，传入xml格式的数据，返回json对象\r\n        //创建一个x2js对象进行转换\r\n        var x2js = new X2JS();\r\n        this.xml2json = x2js.xml2js(newvalue);\r\n        // this.currentNodeData = newvalue\r\n      },\r\n      immediate: true,\r\n      deep: true\r\n    }\r\n  },\r\n  mounted () {\r\n    this.centerDialogVisible = true\r\n    this.currentNodeData = this.graphXml\r\n  },\r\n  methods: {\r\n\r\n    close () {\r\n      this.centerDialogVisible = false\r\n      this.$parent.uploadDataVisible = false;\r\n    },\r\n    saveXmlFile () {\r\n      var datastr = \"data:text/json;charset=utf-8,\" + encodeURIComponent(this.currentNodeData);\r\n      var downloadAnchorNode = document.createElement('a')\r\n      downloadAnchorNode.setAttribute(\"href\", datastr);\r\n      downloadAnchorNode.setAttribute(\"download\", 'data.xml')\r\n      downloadAnchorNode.click();\r\n      downloadAnchorNode.remove();\r\n      this.$message.success(\"正在下载中,请稍后...\")\r\n    },\r\n    confirmUpload () {\r\n      // 触发父组件重绘函数\r\n      this.$emit(\"uploadPaintFlow\", this.currentNodeData)\r\n      this.centerDialogVisible = false\r\n      this.$parent.uploadDataVisible = false;\r\n    },\r\n    cancelUpload () {\r\n      console.log(this.currentNodeData)\r\n      this.centerDialogVisible = false\r\n      this.$parent.uploadDataVisible = false;\r\n      this.currentNodeData = \"\"\r\n    },\r\n\r\n    tirggerFile () {\r\n\r\n    },\r\n    fileChange (file) {\r\n      // 获取文件类型\r\n      var fileType = file.name.split(\".\").pop()\r\n      if (fileType !== 'xml') {\r\n        this.$message.error(\"上传文件类型错误,请重新上传XML类型的文件\")\r\n        this.uploadFiles = []\r\n        return\r\n      }\r\n      if (file) {\r\n        let reader = new FileReader()\r\n        reader.readAsText(file.raw) //注意读取中文的是用这个编码，不是utf-8\r\n        reader.onload = () => {\r\n          this.$message.success(\"文件上传成功\")\r\n          var result = reader.result;\r\n          this.currentNodeData = result\r\n        }\r\n      }\r\n    },\r\n    exceedFile () {\r\n      this.$message.error(\"超出文件可上传数量,请先清除文件\")\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n.upload-box {\r\n  .el-upload {\r\n    display: block;\r\n    width: 360px;\r\n    margin: 0 auto;\r\n  }\r\n}\r\n.codemirror {\r\n  margin-top: 40px;\r\n  border-style: solid;\r\n  border-color: #578dbf;\r\n  border-width: 2px 2px 2px 0;\r\n  position: relative;\r\n  height: 500px;\r\n}\r\n.CodeMirror {\r\n  height: 100%;\r\n}\r\n.codemirror::before {\r\n  position: absolute;\r\n  font-size: 17px;\r\n  top: -30px;\r\n  left: 10px;\r\n  content: \"数据预览 :\";\r\n}\r\n.xmlToJson {\r\n  width: 50%;\r\n  height: 100%;\r\n}\r\n.xmlToJson::before {\r\n  position: absolute;\r\n  font-size: 17px;\r\n  top: 0px;\r\n  left: 10px;\r\n  content: \"XML转JSON :\";\r\n}\r\n</style>"],"sourceRoot":"src/views/customToolbar/component"}]}